{"version":3,"file":"bundle.js","sources":["../../node_modules/underscore/modules/_setup.js","../../node_modules/underscore/modules/restArguments.js","../../node_modules/underscore/modules/isObject.js","../../node_modules/underscore/modules/isUndefined.js","../../node_modules/underscore/modules/isBoolean.js","../../node_modules/underscore/modules/_tagTester.js","../../node_modules/underscore/modules/isString.js","../../node_modules/underscore/modules/isNumber.js","../../node_modules/underscore/modules/isDate.js","../../node_modules/underscore/modules/isRegExp.js","../../node_modules/underscore/modules/isError.js","../../node_modules/underscore/modules/isSymbol.js","../../node_modules/underscore/modules/isArrayBuffer.js","../../node_modules/underscore/modules/isFunction.js","../../node_modules/underscore/modules/_hasObjectTag.js","../../node_modules/underscore/modules/_stringTagBug.js","../../node_modules/underscore/modules/isDataView.js","../../node_modules/underscore/modules/isArray.js","../../node_modules/underscore/modules/_has.js","../../node_modules/underscore/modules/isArguments.js","../../node_modules/underscore/modules/isNaN.js","../../node_modules/underscore/modules/constant.js","../../node_modules/underscore/modules/_createSizePropertyCheck.js","../../node_modules/underscore/modules/_shallowProperty.js","../../node_modules/underscore/modules/_getByteLength.js","../../node_modules/underscore/modules/_isBufferLike.js","../../node_modules/underscore/modules/isTypedArray.js","../../node_modules/underscore/modules/_getLength.js","../../node_modules/underscore/modules/_collectNonEnumProps.js","../../node_modules/underscore/modules/keys.js","../../node_modules/underscore/modules/isMatch.js","../../node_modules/underscore/modules/underscore.js","../../node_modules/underscore/modules/_toBufferView.js","../../node_modules/underscore/modules/isEqual.js","../../node_modules/underscore/modules/allKeys.js","../../node_modules/underscore/modules/_methodFingerprint.js","../../node_modules/underscore/modules/isMap.js","../../node_modules/underscore/modules/isWeakMap.js","../../node_modules/underscore/modules/isSet.js","../../node_modules/underscore/modules/isWeakSet.js","../../node_modules/underscore/modules/values.js","../../node_modules/underscore/modules/invert.js","../../node_modules/underscore/modules/functions.js","../../node_modules/underscore/modules/_createAssigner.js","../../node_modules/underscore/modules/extend.js","../../node_modules/underscore/modules/extendOwn.js","../../node_modules/underscore/modules/defaults.js","../../node_modules/underscore/modules/_baseCreate.js","../../node_modules/underscore/modules/toPath.js","../../node_modules/underscore/modules/_toPath.js","../../node_modules/underscore/modules/_deepGet.js","../../node_modules/underscore/modules/get.js","../../node_modules/underscore/modules/identity.js","../../node_modules/underscore/modules/matcher.js","../../node_modules/underscore/modules/property.js","../../node_modules/underscore/modules/_optimizeCb.js","../../node_modules/underscore/modules/_baseIteratee.js","../../node_modules/underscore/modules/iteratee.js","../../node_modules/underscore/modules/_cb.js","../../node_modules/underscore/modules/noop.js","../../node_modules/underscore/modules/random.js","../../node_modules/underscore/modules/now.js","../../node_modules/underscore/modules/_createEscaper.js","../../node_modules/underscore/modules/_escapeMap.js","../../node_modules/underscore/modules/escape.js","../../node_modules/underscore/modules/unescape.js","../../node_modules/underscore/modules/_unescapeMap.js","../../node_modules/underscore/modules/templateSettings.js","../../node_modules/underscore/modules/template.js","../../node_modules/underscore/modules/uniqueId.js","../../node_modules/underscore/modules/_executeBound.js","../../node_modules/underscore/modules/partial.js","../../node_modules/underscore/modules/bind.js","../../node_modules/underscore/modules/_isArrayLike.js","../../node_modules/underscore/modules/_flatten.js","../../node_modules/underscore/modules/bindAll.js","../../node_modules/underscore/modules/delay.js","../../node_modules/underscore/modules/defer.js","../../node_modules/underscore/modules/negate.js","../../node_modules/underscore/modules/before.js","../../node_modules/underscore/modules/once.js","../../node_modules/underscore/modules/findKey.js","../../node_modules/underscore/modules/_createPredicateIndexFinder.js","../../node_modules/underscore/modules/findIndex.js","../../node_modules/underscore/modules/findLastIndex.js","../../node_modules/underscore/modules/sortedIndex.js","../../node_modules/underscore/modules/_createIndexFinder.js","../../node_modules/underscore/modules/indexOf.js","../../node_modules/underscore/modules/lastIndexOf.js","../../node_modules/underscore/modules/find.js","../../node_modules/underscore/modules/each.js","../../node_modules/underscore/modules/map.js","../../node_modules/underscore/modules/_createReduce.js","../../node_modules/underscore/modules/reduce.js","../../node_modules/underscore/modules/reduceRight.js","../../node_modules/underscore/modules/filter.js","../../node_modules/underscore/modules/every.js","../../node_modules/underscore/modules/some.js","../../node_modules/underscore/modules/contains.js","../../node_modules/underscore/modules/invoke.js","../../node_modules/underscore/modules/pluck.js","../../node_modules/underscore/modules/max.js","../../node_modules/underscore/modules/toArray.js","../../node_modules/underscore/modules/sample.js","../../node_modules/underscore/modules/_group.js","../../node_modules/underscore/modules/groupBy.js","../../node_modules/underscore/modules/indexBy.js","../../node_modules/underscore/modules/countBy.js","../../node_modules/underscore/modules/partition.js","../../node_modules/underscore/modules/_keyInObj.js","../../node_modules/underscore/modules/pick.js","../../node_modules/underscore/modules/omit.js","../../node_modules/underscore/modules/initial.js","../../node_modules/underscore/modules/first.js","../../node_modules/underscore/modules/rest.js","../../node_modules/underscore/modules/difference.js","../../node_modules/underscore/modules/without.js","../../node_modules/underscore/modules/uniq.js","../../node_modules/underscore/modules/union.js","../../node_modules/underscore/modules/unzip.js","../../node_modules/underscore/modules/zip.js","../../node_modules/underscore/modules/_chainResult.js","../../node_modules/underscore/modules/mixin.js","../../node_modules/underscore/modules/underscore-array-methods.js","../../node_modules/underscore/modules/index-default.js","../../node_modules/underscore/modules/isNull.js","../../node_modules/underscore/modules/isElement.js","../../node_modules/underscore/modules/isFinite.js","../../node_modules/underscore/modules/isEmpty.js","../../node_modules/underscore/modules/pairs.js","../../node_modules/underscore/modules/create.js","../../node_modules/underscore/modules/clone.js","../../node_modules/underscore/modules/tap.js","../../node_modules/underscore/modules/has.js","../../node_modules/underscore/modules/mapObject.js","../../node_modules/underscore/modules/propertyOf.js","../../node_modules/underscore/modules/times.js","../../node_modules/underscore/modules/result.js","../../node_modules/underscore/modules/chain.js","../../node_modules/underscore/modules/memoize.js","../../node_modules/underscore/modules/throttle.js","../../node_modules/underscore/modules/debounce.js","../../node_modules/underscore/modules/wrap.js","../../node_modules/underscore/modules/compose.js","../../node_modules/underscore/modules/after.js","../../node_modules/underscore/modules/findWhere.js","../../node_modules/underscore/modules/reject.js","../../node_modules/underscore/modules/where.js","../../node_modules/underscore/modules/min.js","../../node_modules/underscore/modules/shuffle.js","../../node_modules/underscore/modules/sortBy.js","../../node_modules/underscore/modules/size.js","../../node_modules/underscore/modules/last.js","../../node_modules/underscore/modules/compact.js","../../node_modules/underscore/modules/flatten.js","../../node_modules/underscore/modules/intersection.js","../../node_modules/underscore/modules/object.js","../../node_modules/underscore/modules/range.js","../../node_modules/underscore/modules/chunk.js","../js/validUrl.js","../js/linkBoxes.js","../js/newLink.js","../js/preLinkMark.js","../js/copyPasteEvents.js","../js/index.js","../js/shared.js"],"sourcesContent":["// Current version.\nexport var VERSION = '1.13.4';\n\n// Establish the root object, `window` (`self`) in the browser, `global`\n// on the server, or `this` in some virtual machines. We use `self`\n// instead of `window` for `WebWorker` support.\nexport var root = (typeof self == 'object' && self.self === self && self) ||\n          (typeof global == 'object' && global.global === global && global) ||\n          Function('return this')() ||\n          {};\n\n// Save bytes in the minified (but not gzipped) version:\nexport var ArrayProto = Array.prototype, ObjProto = Object.prototype;\nexport var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\n\n// Create quick reference variables for speed access to core prototypes.\nexport var push = ArrayProto.push,\n    slice = ArrayProto.slice,\n    toString = ObjProto.toString,\n    hasOwnProperty = ObjProto.hasOwnProperty;\n\n// Modern feature detection.\nexport var supportsArrayBuffer = typeof ArrayBuffer !== 'undefined',\n    supportsDataView = typeof DataView !== 'undefined';\n\n// All **ECMAScript 5+** native function implementations that we hope to use\n// are declared here.\nexport var nativeIsArray = Array.isArray,\n    nativeKeys = Object.keys,\n    nativeCreate = Object.create,\n    nativeIsView = supportsArrayBuffer && ArrayBuffer.isView;\n\n// Create references to these builtin functions because we override them.\nexport var _isNaN = isNaN,\n    _isFinite = isFinite;\n\n// Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\nexport var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\nexport var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n  'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n// The largest integer that can be represented exactly.\nexport var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n","// Some functions take a variable number of arguments, or a few expected\n// arguments at the beginning and then a variable number of values to operate\n// on. This helper accumulates all remaining arguments past the function’s\n// argument length (or an explicit `startIndex`), into an array that becomes\n// the last argument. Similar to ES6’s \"rest parameter\".\nexport default function restArguments(func, startIndex) {\n  startIndex = startIndex == null ? func.length - 1 : +startIndex;\n  return function() {\n    var length = Math.max(arguments.length - startIndex, 0),\n        rest = Array(length),\n        index = 0;\n    for (; index < length; index++) {\n      rest[index] = arguments[index + startIndex];\n    }\n    switch (startIndex) {\n      case 0: return func.call(this, rest);\n      case 1: return func.call(this, arguments[0], rest);\n      case 2: return func.call(this, arguments[0], arguments[1], rest);\n    }\n    var args = Array(startIndex + 1);\n    for (index = 0; index < startIndex; index++) {\n      args[index] = arguments[index];\n    }\n    args[startIndex] = rest;\n    return func.apply(this, args);\n  };\n}\n","// Is a given variable an object?\nexport default function isObject(obj) {\n  var type = typeof obj;\n  return type === 'function' || (type === 'object' && !!obj);\n}\n","// Is a given variable undefined?\nexport default function isUndefined(obj) {\n  return obj === void 0;\n}\n","import { toString } from './_setup.js';\n\n// Is a given value a boolean?\nexport default function isBoolean(obj) {\n  return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n}\n","import { toString } from './_setup.js';\n\n// Internal function for creating a `toString`-based type tester.\nexport default function tagTester(name) {\n  var tag = '[object ' + name + ']';\n  return function(obj) {\n    return toString.call(obj) === tag;\n  };\n}\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('String');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Number');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Date');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('RegExp');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Error');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Symbol');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('ArrayBuffer');\n","import tagTester from './_tagTester.js';\nimport { root } from './_setup.js';\n\nvar isFunction = tagTester('Function');\n\n// Optimize `isFunction` if appropriate. Work around some `typeof` bugs in old\n// v8, IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).\nvar nodelist = root.document && root.document.childNodes;\nif (typeof /./ != 'function' && typeof Int8Array != 'object' && typeof nodelist != 'function') {\n  isFunction = function(obj) {\n    return typeof obj == 'function' || false;\n  };\n}\n\nexport default isFunction;\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Object');\n","import { supportsDataView } from './_setup.js';\nimport hasObjectTag from './_hasObjectTag.js';\n\n// In IE 10 - Edge 13, `DataView` has string tag `'[object Object]'`.\n// In IE 11, the most common among them, this problem also applies to\n// `Map`, `WeakMap` and `Set`.\nexport var hasStringTagBug = (\n      supportsDataView && hasObjectTag(new DataView(new ArrayBuffer(8)))\n    ),\n    isIE11 = (typeof Map !== 'undefined' && hasObjectTag(new Map));\n","import tagTester from './_tagTester.js';\nimport isFunction from './isFunction.js';\nimport isArrayBuffer from './isArrayBuffer.js';\nimport { hasStringTagBug } from './_stringTagBug.js';\n\nvar isDataView = tagTester('DataView');\n\n// In IE 10 - Edge 13, we need a different heuristic\n// to determine whether an object is a `DataView`.\nfunction ie10IsDataView(obj) {\n  return obj != null && isFunction(obj.getInt8) && isArrayBuffer(obj.buffer);\n}\n\nexport default (hasStringTagBug ? ie10IsDataView : isDataView);\n","import { nativeIsArray } from './_setup.js';\nimport tagTester from './_tagTester.js';\n\n// Is a given value an array?\n// Delegates to ECMA5's native `Array.isArray`.\nexport default nativeIsArray || tagTester('Array');\n","import { hasOwnProperty } from './_setup.js';\n\n// Internal function to check whether `key` is an own property name of `obj`.\nexport default function has(obj, key) {\n  return obj != null && hasOwnProperty.call(obj, key);\n}\n","import tagTester from './_tagTester.js';\nimport has from './_has.js';\n\nvar isArguments = tagTester('Arguments');\n\n// Define a fallback version of the method in browsers (ahem, IE < 9), where\n// there isn't any inspectable \"Arguments\" type.\n(function() {\n  if (!isArguments(arguments)) {\n    isArguments = function(obj) {\n      return has(obj, 'callee');\n    };\n  }\n}());\n\nexport default isArguments;\n","import { _isNaN } from './_setup.js';\nimport isNumber from './isNumber.js';\n\n// Is the given value `NaN`?\nexport default function isNaN(obj) {\n  return isNumber(obj) && _isNaN(obj);\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function constant(value) {\n  return function() {\n    return value;\n  };\n}\n","import { MAX_ARRAY_INDEX } from './_setup.js';\n\n// Common internal logic for `isArrayLike` and `isBufferLike`.\nexport default function createSizePropertyCheck(getSizeProperty) {\n  return function(collection) {\n    var sizeProperty = getSizeProperty(collection);\n    return typeof sizeProperty == 'number' && sizeProperty >= 0 && sizeProperty <= MAX_ARRAY_INDEX;\n  }\n}\n","// Internal helper to generate a function to obtain property `key` from `obj`.\nexport default function shallowProperty(key) {\n  return function(obj) {\n    return obj == null ? void 0 : obj[key];\n  };\n}\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `byteLength` property of an object.\nexport default shallowProperty('byteLength');\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getByteLength from './_getByteLength.js';\n\n// Internal helper to determine whether we should spend extensive checks against\n// `ArrayBuffer` et al.\nexport default createSizePropertyCheck(getByteLength);\n","import { supportsArrayBuffer, nativeIsView, toString } from './_setup.js';\nimport isDataView from './isDataView.js';\nimport constant from './constant.js';\nimport isBufferLike from './_isBufferLike.js';\n\n// Is a given value a typed array?\nvar typedArrayPattern = /\\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\\]/;\nfunction isTypedArray(obj) {\n  // `ArrayBuffer.isView` is the most future-proof, so use it when available.\n  // Otherwise, fall back on the above regular expression.\n  return nativeIsView ? (nativeIsView(obj) && !isDataView(obj)) :\n                isBufferLike(obj) && typedArrayPattern.test(toString.call(obj));\n}\n\nexport default supportsArrayBuffer ? isTypedArray : constant(false);\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `length` property of an object.\nexport default shallowProperty('length');\n","import { nonEnumerableProps, ObjProto } from './_setup.js';\nimport isFunction from './isFunction.js';\nimport has from './_has.js';\n\n// Internal helper to create a simple lookup structure.\n// `collectNonEnumProps` used to depend on `_.contains`, but this led to\n// circular imports. `emulatedSet` is a one-off solution that only works for\n// arrays of strings.\nfunction emulatedSet(keys) {\n  var hash = {};\n  for (var l = keys.length, i = 0; i < l; ++i) hash[keys[i]] = true;\n  return {\n    contains: function(key) { return hash[key] === true; },\n    push: function(key) {\n      hash[key] = true;\n      return keys.push(key);\n    }\n  };\n}\n\n// Internal helper. Checks `keys` for the presence of keys in IE < 9 that won't\n// be iterated by `for key in ...` and thus missed. Extends `keys` in place if\n// needed.\nexport default function collectNonEnumProps(obj, keys) {\n  keys = emulatedSet(keys);\n  var nonEnumIdx = nonEnumerableProps.length;\n  var constructor = obj.constructor;\n  var proto = (isFunction(constructor) && constructor.prototype) || ObjProto;\n\n  // Constructor is a special case.\n  var prop = 'constructor';\n  if (has(obj, prop) && !keys.contains(prop)) keys.push(prop);\n\n  while (nonEnumIdx--) {\n    prop = nonEnumerableProps[nonEnumIdx];\n    if (prop in obj && obj[prop] !== proto[prop] && !keys.contains(prop)) {\n      keys.push(prop);\n    }\n  }\n}\n","import isObject from './isObject.js';\nimport { nativeKeys, hasEnumBug } from './_setup.js';\nimport has from './_has.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve the names of an object's own properties.\n// Delegates to **ECMAScript 5**'s native `Object.keys`.\nexport default function keys(obj) {\n  if (!isObject(obj)) return [];\n  if (nativeKeys) return nativeKeys(obj);\n  var keys = [];\n  for (var key in obj) if (has(obj, key)) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import keys from './keys.js';\n\n// Returns whether an object has a given set of `key:value` pairs.\nexport default function isMatch(object, attrs) {\n  var _keys = keys(attrs), length = _keys.length;\n  if (object == null) return !length;\n  var obj = Object(object);\n  for (var i = 0; i < length; i++) {\n    var key = _keys[i];\n    if (attrs[key] !== obj[key] || !(key in obj)) return false;\n  }\n  return true;\n}\n","import { VERSION } from './_setup.js';\n\n// If Underscore is called as a function, it returns a wrapped object that can\n// be used OO-style. This wrapper holds altered versions of all functions added\n// through `_.mixin`. Wrapped objects may be chained.\nexport default function _(obj) {\n  if (obj instanceof _) return obj;\n  if (!(this instanceof _)) return new _(obj);\n  this._wrapped = obj;\n}\n\n_.VERSION = VERSION;\n\n// Extracts the result from a wrapped and chained object.\n_.prototype.value = function() {\n  return this._wrapped;\n};\n\n// Provide unwrapping proxies for some methods used in engine operations\n// such as arithmetic and JSON stringification.\n_.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n_.prototype.toString = function() {\n  return String(this._wrapped);\n};\n","import getByteLength from './_getByteLength.js';\n\n// Internal function to wrap or shallow-copy an ArrayBuffer,\n// typed array or DataView to a new view, reusing the buffer.\nexport default function toBufferView(bufferSource) {\n  return new Uint8Array(\n    bufferSource.buffer || bufferSource,\n    bufferSource.byteOffset || 0,\n    getByteLength(bufferSource)\n  );\n}\n","import _ from './underscore.js';\nimport { toString, SymbolProto } from './_setup.js';\nimport getByteLength from './_getByteLength.js';\nimport isTypedArray from './isTypedArray.js';\nimport isFunction from './isFunction.js';\nimport { hasStringTagBug }  from './_stringTagBug.js';\nimport isDataView from './isDataView.js';\nimport keys from './keys.js';\nimport has from './_has.js';\nimport toBufferView from './_toBufferView.js';\n\n// We use this string twice, so give it a name for minification.\nvar tagDataView = '[object DataView]';\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction eq(a, b, aStack, bStack) {\n  // Identical objects are equal. `0 === -0`, but they aren't identical.\n  // See the [Harmony `egal` proposal](https://wiki.ecmascript.org/doku.php?id=harmony:egal).\n  if (a === b) return a !== 0 || 1 / a === 1 / b;\n  // `null` or `undefined` only equal to itself (strict comparison).\n  if (a == null || b == null) return false;\n  // `NaN`s are equivalent, but non-reflexive.\n  if (a !== a) return b !== b;\n  // Exhaust primitive checks\n  var type = typeof a;\n  if (type !== 'function' && type !== 'object' && typeof b != 'object') return false;\n  return deepEq(a, b, aStack, bStack);\n}\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction deepEq(a, b, aStack, bStack) {\n  // Unwrap any wrapped objects.\n  if (a instanceof _) a = a._wrapped;\n  if (b instanceof _) b = b._wrapped;\n  // Compare `[[Class]]` names.\n  var className = toString.call(a);\n  if (className !== toString.call(b)) return false;\n  // Work around a bug in IE 10 - Edge 13.\n  if (hasStringTagBug && className == '[object Object]' && isDataView(a)) {\n    if (!isDataView(b)) return false;\n    className = tagDataView;\n  }\n  switch (className) {\n    // These types are compared by value.\n    case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n    case '[object String]':\n      // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n      // equivalent to `new String(\"5\")`.\n      return '' + a === '' + b;\n    case '[object Number]':\n      // `NaN`s are equivalent, but non-reflexive.\n      // Object(NaN) is equivalent to NaN.\n      if (+a !== +a) return +b !== +b;\n      // An `egal` comparison is performed for other numeric values.\n      return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n    case '[object Date]':\n    case '[object Boolean]':\n      // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n      // millisecond representations. Note that invalid dates with millisecond representations\n      // of `NaN` are not equivalent.\n      return +a === +b;\n    case '[object Symbol]':\n      return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);\n    case '[object ArrayBuffer]':\n    case tagDataView:\n      // Coerce to typed array so we can fall through.\n      return deepEq(toBufferView(a), toBufferView(b), aStack, bStack);\n  }\n\n  var areArrays = className === '[object Array]';\n  if (!areArrays && isTypedArray(a)) {\n      var byteLength = getByteLength(a);\n      if (byteLength !== getByteLength(b)) return false;\n      if (a.buffer === b.buffer && a.byteOffset === b.byteOffset) return true;\n      areArrays = true;\n  }\n  if (!areArrays) {\n    if (typeof a != 'object' || typeof b != 'object') return false;\n\n    // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n    // from different frames are.\n    var aCtor = a.constructor, bCtor = b.constructor;\n    if (aCtor !== bCtor && !(isFunction(aCtor) && aCtor instanceof aCtor &&\n                             isFunction(bCtor) && bCtor instanceof bCtor)\n                        && ('constructor' in a && 'constructor' in b)) {\n      return false;\n    }\n  }\n  // Assume equality for cyclic structures. The algorithm for detecting cyclic\n  // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n  // Initializing stack of traversed objects.\n  // It's done here since we only need them for objects and arrays comparison.\n  aStack = aStack || [];\n  bStack = bStack || [];\n  var length = aStack.length;\n  while (length--) {\n    // Linear search. Performance is inversely proportional to the number of\n    // unique nested structures.\n    if (aStack[length] === a) return bStack[length] === b;\n  }\n\n  // Add the first object to the stack of traversed objects.\n  aStack.push(a);\n  bStack.push(b);\n\n  // Recursively compare objects and arrays.\n  if (areArrays) {\n    // Compare array lengths to determine if a deep comparison is necessary.\n    length = a.length;\n    if (length !== b.length) return false;\n    // Deep compare the contents, ignoring non-numeric properties.\n    while (length--) {\n      if (!eq(a[length], b[length], aStack, bStack)) return false;\n    }\n  } else {\n    // Deep compare objects.\n    var _keys = keys(a), key;\n    length = _keys.length;\n    // Ensure that both objects contain the same number of properties before comparing deep equality.\n    if (keys(b).length !== length) return false;\n    while (length--) {\n      // Deep compare each member\n      key = _keys[length];\n      if (!(has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n    }\n  }\n  // Remove the first object from the stack of traversed objects.\n  aStack.pop();\n  bStack.pop();\n  return true;\n}\n\n// Perform a deep comparison to check if two objects are equal.\nexport default function isEqual(a, b) {\n  return eq(a, b);\n}\n","import isObject from './isObject.js';\nimport { hasEnumBug } from './_setup.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve all the enumerable property names of an object.\nexport default function allKeys(obj) {\n  if (!isObject(obj)) return [];\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import getLength from './_getLength.js';\nimport isFunction from './isFunction.js';\nimport allKeys from './allKeys.js';\n\n// Since the regular `Object.prototype.toString` type tests don't work for\n// some types in IE 11, we use a fingerprinting heuristic instead, based\n// on the methods. It's not great, but it's the best we got.\n// The fingerprint method lists are defined below.\nexport function ie11fingerprint(methods) {\n  var length = getLength(methods);\n  return function(obj) {\n    if (obj == null) return false;\n    // `Map`, `WeakMap` and `Set` have no enumerable keys.\n    var keys = allKeys(obj);\n    if (getLength(keys)) return false;\n    for (var i = 0; i < length; i++) {\n      if (!isFunction(obj[methods[i]])) return false;\n    }\n    // If we are testing against `WeakMap`, we need to ensure that\n    // `obj` doesn't have a `forEach` method in order to distinguish\n    // it from a regular `Map`.\n    return methods !== weakMapMethods || !isFunction(obj[forEachName]);\n  };\n}\n\n// In the interest of compact minification, we write\n// each string in the fingerprints only once.\nvar forEachName = 'forEach',\n    hasName = 'has',\n    commonInit = ['clear', 'delete'],\n    mapTail = ['get', hasName, 'set'];\n\n// `Map`, `WeakMap` and `Set` each have slightly different\n// combinations of the above sublists.\nexport var mapMethods = commonInit.concat(forEachName, mapTail),\n    weakMapMethods = commonInit.concat(mapTail),\n    setMethods = ['add'].concat(commonInit, forEachName, hasName);\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, mapMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(mapMethods) : tagTester('Map');\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, weakMapMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(weakMapMethods) : tagTester('WeakMap');\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, setMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(setMethods) : tagTester('Set');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('WeakSet');\n","import keys from './keys.js';\n\n// Retrieve the values of an object's properties.\nexport default function values(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var values = Array(length);\n  for (var i = 0; i < length; i++) {\n    values[i] = obj[_keys[i]];\n  }\n  return values;\n}\n","import keys from './keys.js';\n\n// Invert the keys and values of an object. The values must be serializable.\nexport default function invert(obj) {\n  var result = {};\n  var _keys = keys(obj);\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    result[obj[_keys[i]]] = _keys[i];\n  }\n  return result;\n}\n","import isFunction from './isFunction.js';\n\n// Return a sorted list of the function names available on the object.\nexport default function functions(obj) {\n  var names = [];\n  for (var key in obj) {\n    if (isFunction(obj[key])) names.push(key);\n  }\n  return names.sort();\n}\n","// An internal function for creating assigner functions.\nexport default function createAssigner(keysFunc, defaults) {\n  return function(obj) {\n    var length = arguments.length;\n    if (defaults) obj = Object(obj);\n    if (length < 2 || obj == null) return obj;\n    for (var index = 1; index < length; index++) {\n      var source = arguments[index],\n          keys = keysFunc(source),\n          l = keys.length;\n      for (var i = 0; i < l; i++) {\n        var key = keys[i];\n        if (!defaults || obj[key] === void 0) obj[key] = source[key];\n      }\n    }\n    return obj;\n  };\n}\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Extend a given object with all the properties in passed-in object(s).\nexport default createAssigner(allKeys);\n","import createAssigner from './_createAssigner.js';\nimport keys from './keys.js';\n\n// Assigns a given object with all the own properties in the passed-in\n// object(s).\n// (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\nexport default createAssigner(keys);\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Fill in a given object with default properties.\nexport default createAssigner(allKeys, true);\n","import isObject from './isObject.js';\nimport { nativeCreate } from './_setup.js';\n\n// Create a naked function reference for surrogate-prototype-swapping.\nfunction ctor() {\n  return function(){};\n}\n\n// An internal function for creating a new object that inherits from another.\nexport default function baseCreate(prototype) {\n  if (!isObject(prototype)) return {};\n  if (nativeCreate) return nativeCreate(prototype);\n  var Ctor = ctor();\n  Ctor.prototype = prototype;\n  var result = new Ctor;\n  Ctor.prototype = null;\n  return result;\n}\n","import _ from './underscore.js';\nimport isArray from './isArray.js';\n\n// Normalize a (deep) property `path` to array.\n// Like `_.iteratee`, this function can be customized.\nexport default function toPath(path) {\n  return isArray(path) ? path : [path];\n}\n_.toPath = toPath;\n","import _ from './underscore.js';\nimport './toPath.js';\n\n// Internal wrapper for `_.toPath` to enable minification.\n// Similar to `cb` for `_.iteratee`.\nexport default function toPath(path) {\n  return _.toPath(path);\n}\n","// Internal function to obtain a nested property in `obj` along `path`.\nexport default function deepGet(obj, path) {\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    if (obj == null) return void 0;\n    obj = obj[path[i]];\n  }\n  return length ? obj : void 0;\n}\n","import toPath from './_toPath.js';\nimport deepGet from './_deepGet.js';\nimport isUndefined from './isUndefined.js';\n\n// Get the value of the (deep) property on `path` from `object`.\n// If any property in `path` does not exist or if the value is\n// `undefined`, return `defaultValue` instead.\n// The `path` is normalized through `_.toPath`.\nexport default function get(object, path, defaultValue) {\n  var value = deepGet(object, toPath(path));\n  return isUndefined(value) ? defaultValue : value;\n}\n","// Keep the identity function around for default iteratees.\nexport default function identity(value) {\n  return value;\n}\n","import extendOwn from './extendOwn.js';\nimport isMatch from './isMatch.js';\n\n// Returns a predicate for checking whether an object has a given set of\n// `key:value` pairs.\nexport default function matcher(attrs) {\n  attrs = extendOwn({}, attrs);\n  return function(obj) {\n    return isMatch(obj, attrs);\n  };\n}\n","import deepGet from './_deepGet.js';\nimport toPath from './_toPath.js';\n\n// Creates a function that, when passed an object, will traverse that object’s\n// properties down the given `path`, specified as an array of keys or indices.\nexport default function property(path) {\n  path = toPath(path);\n  return function(obj) {\n    return deepGet(obj, path);\n  };\n}\n","// Internal function that returns an efficient (for current engines) version\n// of the passed-in callback, to be repeatedly applied in other Underscore\n// functions.\nexport default function optimizeCb(func, context, argCount) {\n  if (context === void 0) return func;\n  switch (argCount == null ? 3 : argCount) {\n    case 1: return function(value) {\n      return func.call(context, value);\n    };\n    // The 2-argument case is omitted because we’re not using it.\n    case 3: return function(value, index, collection) {\n      return func.call(context, value, index, collection);\n    };\n    case 4: return function(accumulator, value, index, collection) {\n      return func.call(context, accumulator, value, index, collection);\n    };\n  }\n  return function() {\n    return func.apply(context, arguments);\n  };\n}\n","import identity from './identity.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport matcher from './matcher.js';\nimport property from './property.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// An internal function to generate callbacks that can be applied to each\n// element in a collection, returning the desired result — either `_.identity`,\n// an arbitrary callback, a property matcher, or a property accessor.\nexport default function baseIteratee(value, context, argCount) {\n  if (value == null) return identity;\n  if (isFunction(value)) return optimizeCb(value, context, argCount);\n  if (isObject(value) && !isArray(value)) return matcher(value);\n  return property(value);\n}\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\n\n// External wrapper for our callback generator. Users may customize\n// `_.iteratee` if they want additional predicate/iteratee shorthand styles.\n// This abstraction hides the internal-only `argCount` argument.\nexport default function iteratee(value, context) {\n  return baseIteratee(value, context, Infinity);\n}\n_.iteratee = iteratee;\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\nimport iteratee from './iteratee.js';\n\n// The function we call internally to generate a callback. It invokes\n// `_.iteratee` if overridden, otherwise `baseIteratee`.\nexport default function cb(value, context, argCount) {\n  if (_.iteratee !== iteratee) return _.iteratee(value, context);\n  return baseIteratee(value, context, argCount);\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function noop(){}\n","// Return a random integer between `min` and `max` (inclusive).\nexport default function random(min, max) {\n  if (max == null) {\n    max = min;\n    min = 0;\n  }\n  return min + Math.floor(Math.random() * (max - min + 1));\n}\n","// A (possibly faster) way to get the current timestamp as an integer.\nexport default Date.now || function() {\n  return new Date().getTime();\n};\n","import keys from './keys.js';\n\n// Internal helper to generate functions for escaping and unescaping strings\n// to/from HTML interpolation.\nexport default function createEscaper(map) {\n  var escaper = function(match) {\n    return map[match];\n  };\n  // Regexes for identifying a key that needs to be escaped.\n  var source = '(?:' + keys(map).join('|') + ')';\n  var testRegexp = RegExp(source);\n  var replaceRegexp = RegExp(source, 'g');\n  return function(string) {\n    string = string == null ? '' : '' + string;\n    return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n  };\n}\n","// Internal list of HTML entities for escaping.\nexport default {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;'\n};\n","import createEscaper from './_createEscaper.js';\nimport escapeMap from './_escapeMap.js';\n\n// Function for escaping strings to HTML interpolation.\nexport default createEscaper(escapeMap);\n","import createEscaper from './_createEscaper.js';\nimport unescapeMap from './_unescapeMap.js';\n\n// Function for unescaping strings from HTML interpolation.\nexport default createEscaper(unescapeMap);\n","import invert from './invert.js';\nimport escapeMap from './_escapeMap.js';\n\n// Internal list of HTML entities for unescaping.\nexport default invert(escapeMap);\n","import _ from './underscore.js';\n\n// By default, Underscore uses ERB-style template delimiters. Change the\n// following template settings to use alternative delimiters.\nexport default _.templateSettings = {\n  evaluate: /<%([\\s\\S]+?)%>/g,\n  interpolate: /<%=([\\s\\S]+?)%>/g,\n  escape: /<%-([\\s\\S]+?)%>/g\n};\n","import defaults from './defaults.js';\nimport _ from './underscore.js';\nimport './templateSettings.js';\n\n// When customizing `_.templateSettings`, if you don't want to define an\n// interpolation, evaluation or escaping regex, we need one that is\n// guaranteed not to match.\nvar noMatch = /(.)^/;\n\n// Certain characters need to be escaped so that they can be put into a\n// string literal.\nvar escapes = {\n  \"'\": \"'\",\n  '\\\\': '\\\\',\n  '\\r': 'r',\n  '\\n': 'n',\n  '\\u2028': 'u2028',\n  '\\u2029': 'u2029'\n};\n\nvar escapeRegExp = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\nfunction escapeChar(match) {\n  return '\\\\' + escapes[match];\n}\n\n// In order to prevent third-party code injection through\n// `_.templateSettings.variable`, we test it against the following regular\n// expression. It is intentionally a bit more liberal than just matching valid\n// identifiers, but still prevents possible loopholes through defaults or\n// destructuring assignment.\nvar bareIdentifier = /^\\s*(\\w|\\$)+\\s*$/;\n\n// JavaScript micro-templating, similar to John Resig's implementation.\n// Underscore templating handles arbitrary delimiters, preserves whitespace,\n// and correctly escapes quotes within interpolated code.\n// NB: `oldSettings` only exists for backwards compatibility.\nexport default function template(text, settings, oldSettings) {\n  if (!settings && oldSettings) settings = oldSettings;\n  settings = defaults({}, settings, _.templateSettings);\n\n  // Combine delimiters into one regular expression via alternation.\n  var matcher = RegExp([\n    (settings.escape || noMatch).source,\n    (settings.interpolate || noMatch).source,\n    (settings.evaluate || noMatch).source\n  ].join('|') + '|$', 'g');\n\n  // Compile the template source, escaping string literals appropriately.\n  var index = 0;\n  var source = \"__p+='\";\n  text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n    source += text.slice(index, offset).replace(escapeRegExp, escapeChar);\n    index = offset + match.length;\n\n    if (escape) {\n      source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n    } else if (interpolate) {\n      source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n    } else if (evaluate) {\n      source += \"';\\n\" + evaluate + \"\\n__p+='\";\n    }\n\n    // Adobe VMs need the match returned to produce the correct offset.\n    return match;\n  });\n  source += \"';\\n\";\n\n  var argument = settings.variable;\n  if (argument) {\n    // Insure against third-party code injection. (CVE-2021-23358)\n    if (!bareIdentifier.test(argument)) throw new Error(\n      'variable is not a bare identifier: ' + argument\n    );\n  } else {\n    // If a variable is not specified, place data values in local scope.\n    source = 'with(obj||{}){\\n' + source + '}\\n';\n    argument = 'obj';\n  }\n\n  source = \"var __t,__p='',__j=Array.prototype.join,\" +\n    \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n    source + 'return __p;\\n';\n\n  var render;\n  try {\n    render = new Function(argument, '_', source);\n  } catch (e) {\n    e.source = source;\n    throw e;\n  }\n\n  var template = function(data) {\n    return render.call(this, data, _);\n  };\n\n  // Provide the compiled source as a convenience for precompilation.\n  template.source = 'function(' + argument + '){\\n' + source + '}';\n\n  return template;\n}\n","// Generate a unique integer id (unique within the entire client session).\n// Useful for temporary DOM ids.\nvar idCounter = 0;\nexport default function uniqueId(prefix) {\n  var id = ++idCounter + '';\n  return prefix ? prefix + id : id;\n}\n","import baseCreate from './_baseCreate.js';\nimport isObject from './isObject.js';\n\n// Internal function to execute `sourceFunc` bound to `context` with optional\n// `args`. Determines whether to execute a function as a constructor or as a\n// normal function.\nexport default function executeBound(sourceFunc, boundFunc, context, callingContext, args) {\n  if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n  var self = baseCreate(sourceFunc.prototype);\n  var result = sourceFunc.apply(self, args);\n  if (isObject(result)) return result;\n  return self;\n}\n","import restArguments from './restArguments.js';\nimport executeBound from './_executeBound.js';\nimport _ from './underscore.js';\n\n// Partially apply a function by creating a version that has had some of its\n// arguments pre-filled, without changing its dynamic `this` context. `_` acts\n// as a placeholder by default, allowing any combination of arguments to be\n// pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.\nvar partial = restArguments(function(func, boundArgs) {\n  var placeholder = partial.placeholder;\n  var bound = function() {\n    var position = 0, length = boundArgs.length;\n    var args = Array(length);\n    for (var i = 0; i < length; i++) {\n      args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];\n    }\n    while (position < arguments.length) args.push(arguments[position++]);\n    return executeBound(func, bound, this, this, args);\n  };\n  return bound;\n});\n\npartial.placeholder = _;\nexport default partial;\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport executeBound from './_executeBound.js';\n\n// Create a function bound to a given object (assigning `this`, and arguments,\n// optionally).\nexport default restArguments(function(func, context, args) {\n  if (!isFunction(func)) throw new TypeError('Bind must be called on a function');\n  var bound = restArguments(function(callArgs) {\n    return executeBound(func, bound, context, this, args.concat(callArgs));\n  });\n  return bound;\n});\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getLength from './_getLength.js';\n\n// Internal helper for collection methods to determine whether a collection\n// should be iterated as an array or as an object.\n// Related: https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n// Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\nexport default createSizePropertyCheck(getLength);\n","import getLength from './_getLength.js';\nimport isArrayLike from './_isArrayLike.js';\nimport isArray from './isArray.js';\nimport isArguments from './isArguments.js';\n\n// Internal implementation of a recursive `flatten` function.\nexport default function flatten(input, depth, strict, output) {\n  output = output || [];\n  if (!depth && depth !== 0) {\n    depth = Infinity;\n  } else if (depth <= 0) {\n    return output.concat(input);\n  }\n  var idx = output.length;\n  for (var i = 0, length = getLength(input); i < length; i++) {\n    var value = input[i];\n    if (isArrayLike(value) && (isArray(value) || isArguments(value))) {\n      // Flatten current level of array or arguments object.\n      if (depth > 1) {\n        flatten(value, depth - 1, strict, output);\n        idx = output.length;\n      } else {\n        var j = 0, len = value.length;\n        while (j < len) output[idx++] = value[j++];\n      }\n    } else if (!strict) {\n      output[idx++] = value;\n    }\n  }\n  return output;\n}\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport bind from './bind.js';\n\n// Bind a number of an object's methods to that object. Remaining arguments\n// are the method names to be bound. Useful for ensuring that all callbacks\n// defined on an object belong to it.\nexport default restArguments(function(obj, keys) {\n  keys = flatten(keys, false, false);\n  var index = keys.length;\n  if (index < 1) throw new Error('bindAll must be passed function names');\n  while (index--) {\n    var key = keys[index];\n    obj[key] = bind(obj[key], obj);\n  }\n  return obj;\n});\n","import restArguments from './restArguments.js';\n\n// Delays a function for the given number of milliseconds, and then calls\n// it with the arguments supplied.\nexport default restArguments(function(func, wait, args) {\n  return setTimeout(function() {\n    return func.apply(null, args);\n  }, wait);\n});\n","import partial from './partial.js';\nimport delay from './delay.js';\nimport _ from './underscore.js';\n\n// Defers a function, scheduling it to run after the current call stack has\n// cleared.\nexport default partial(delay, _, 1);\n","// Returns a negated version of the passed-in predicate.\nexport default function negate(predicate) {\n  return function() {\n    return !predicate.apply(this, arguments);\n  };\n}\n","// Returns a function that will only be executed up to (but not including) the\n// Nth call.\nexport default function before(times, func) {\n  var memo;\n  return function() {\n    if (--times > 0) {\n      memo = func.apply(this, arguments);\n    }\n    if (times <= 1) func = null;\n    return memo;\n  };\n}\n","import partial from './partial.js';\nimport before from './before.js';\n\n// Returns a function that will be executed at most one time, no matter how\n// often you call it. Useful for lazy initialization.\nexport default partial(before, 2);\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the first key on an object that passes a truth test.\nexport default function findKey(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = keys(obj), key;\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    key = _keys[i];\n    if (predicate(obj[key], key, obj)) return key;\n  }\n}\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Internal function to generate `_.findIndex` and `_.findLastIndex`.\nexport default function createPredicateIndexFinder(dir) {\n  return function(array, predicate, context) {\n    predicate = cb(predicate, context);\n    var length = getLength(array);\n    var index = dir > 0 ? 0 : length - 1;\n    for (; index >= 0 && index < length; index += dir) {\n      if (predicate(array[index], index, array)) return index;\n    }\n    return -1;\n  };\n}\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the first index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(1);\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the last index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(-1);\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Use a comparator function to figure out the smallest index at which\n// an object should be inserted so as to maintain order. Uses binary search.\nexport default function sortedIndex(array, obj, iteratee, context) {\n  iteratee = cb(iteratee, context, 1);\n  var value = iteratee(obj);\n  var low = 0, high = getLength(array);\n  while (low < high) {\n    var mid = Math.floor((low + high) / 2);\n    if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n  }\n  return low;\n}\n","import getLength from './_getLength.js';\nimport { slice } from './_setup.js';\nimport isNaN from './isNaN.js';\n\n// Internal function to generate the `_.indexOf` and `_.lastIndexOf` functions.\nexport default function createIndexFinder(dir, predicateFind, sortedIndex) {\n  return function(array, item, idx) {\n    var i = 0, length = getLength(array);\n    if (typeof idx == 'number') {\n      if (dir > 0) {\n        i = idx >= 0 ? idx : Math.max(idx + length, i);\n      } else {\n        length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n      }\n    } else if (sortedIndex && idx && length) {\n      idx = sortedIndex(array, item);\n      return array[idx] === item ? idx : -1;\n    }\n    if (item !== item) {\n      idx = predicateFind(slice.call(array, i, length), isNaN);\n      return idx >= 0 ? idx + i : -1;\n    }\n    for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n      if (array[idx] === item) return idx;\n    }\n    return -1;\n  };\n}\n","import sortedIndex from './sortedIndex.js';\nimport findIndex from './findIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the first occurrence of an item in an array,\n// or -1 if the item is not included in the array.\n// If the array is large and already in sort order, pass `true`\n// for **isSorted** to use binary search.\nexport default createIndexFinder(1, findIndex, sortedIndex);\n","import findLastIndex from './findLastIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the last occurrence of an item in an array,\n// or -1 if the item is not included in the array.\nexport default createIndexFinder(-1, findLastIndex);\n","import isArrayLike from './_isArrayLike.js';\nimport findIndex from './findIndex.js';\nimport findKey from './findKey.js';\n\n// Return the first value which passes a truth test.\nexport default function find(obj, predicate, context) {\n  var keyFinder = isArrayLike(obj) ? findIndex : findKey;\n  var key = keyFinder(obj, predicate, context);\n  if (key !== void 0 && key !== -1) return obj[key];\n}\n","import optimizeCb from './_optimizeCb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// The cornerstone for collection functions, an `each`\n// implementation, aka `forEach`.\n// Handles raw objects in addition to array-likes. Treats all\n// sparse array-likes as if they were dense.\nexport default function each(obj, iteratee, context) {\n  iteratee = optimizeCb(iteratee, context);\n  var i, length;\n  if (isArrayLike(obj)) {\n    for (i = 0, length = obj.length; i < length; i++) {\n      iteratee(obj[i], i, obj);\n    }\n  } else {\n    var _keys = keys(obj);\n    for (i = 0, length = _keys.length; i < length; i++) {\n      iteratee(obj[_keys[i]], _keys[i], obj);\n    }\n  }\n  return obj;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the results of applying the iteratee to each element.\nexport default function map(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length,\n      results = Array(length);\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    results[index] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// Internal helper to create a reducing function, iterating left or right.\nexport default function createReduce(dir) {\n  // Wrap code that reassigns argument variables in a separate function than\n  // the one that accesses `arguments.length` to avoid a perf hit. (#1991)\n  var reducer = function(obj, iteratee, memo, initial) {\n    var _keys = !isArrayLike(obj) && keys(obj),\n        length = (_keys || obj).length,\n        index = dir > 0 ? 0 : length - 1;\n    if (!initial) {\n      memo = obj[_keys ? _keys[index] : index];\n      index += dir;\n    }\n    for (; index >= 0 && index < length; index += dir) {\n      var currentKey = _keys ? _keys[index] : index;\n      memo = iteratee(memo, obj[currentKey], currentKey, obj);\n    }\n    return memo;\n  };\n\n  return function(obj, iteratee, memo, context) {\n    var initial = arguments.length >= 3;\n    return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);\n  };\n}\n","import createReduce from './_createReduce.js';\n\n// **Reduce** builds up a single result from a list of values, aka `inject`,\n// or `foldl`.\nexport default createReduce(1);\n","import createReduce from './_createReduce.js';\n\n// The right-associative version of reduce, also known as `foldr`.\nexport default createReduce(-1);\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// Return all the elements that pass a truth test.\nexport default function filter(obj, predicate, context) {\n  var results = [];\n  predicate = cb(predicate, context);\n  each(obj, function(value, index, list) {\n    if (predicate(value, index, list)) results.push(value);\n  });\n  return results;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine whether all of the elements pass a truth test.\nexport default function every(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (!predicate(obj[currentKey], currentKey, obj)) return false;\n  }\n  return true;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine if at least one element in the object passes a truth test.\nexport default function some(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (predicate(obj[currentKey], currentKey, obj)) return true;\n  }\n  return false;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport indexOf from './indexOf.js';\n\n// Determine if the array or object contains a given item (using `===`).\nexport default function contains(obj, item, fromIndex, guard) {\n  if (!isArrayLike(obj)) obj = values(obj);\n  if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n  return indexOf(obj, item, fromIndex) >= 0;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport map from './map.js';\nimport deepGet from './_deepGet.js';\nimport toPath from './_toPath.js';\n\n// Invoke a method (with arguments) on every item in a collection.\nexport default restArguments(function(obj, path, args) {\n  var contextPath, func;\n  if (isFunction(path)) {\n    func = path;\n  } else {\n    path = toPath(path);\n    contextPath = path.slice(0, -1);\n    path = path[path.length - 1];\n  }\n  return map(obj, function(context) {\n    var method = func;\n    if (!method) {\n      if (contextPath && contextPath.length) {\n        context = deepGet(context, contextPath);\n      }\n      if (context == null) return void 0;\n      method = context[path];\n    }\n    return method == null ? method : method.apply(context, args);\n  });\n});\n","import map from './map.js';\nimport property from './property.js';\n\n// Convenience version of a common use case of `_.map`: fetching a property.\nexport default function pluck(obj, key) {\n  return map(obj, property(key));\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the maximum element (or element-based computation).\nexport default function max(obj, iteratee, context) {\n  var result = -Infinity, lastComputed = -Infinity,\n      value, computed;\n  if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value > result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed > lastComputed || (computed === -Infinity && result === -Infinity)) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArray from './isArray.js';\nimport { slice } from './_setup.js';\nimport isString from './isString.js';\nimport isArrayLike from './_isArrayLike.js';\nimport map from './map.js';\nimport identity from './identity.js';\nimport values from './values.js';\n\n// Safely create a real, live array from anything iterable.\nvar reStrSymbol = /[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;\nexport default function toArray(obj) {\n  if (!obj) return [];\n  if (isArray(obj)) return slice.call(obj);\n  if (isString(obj)) {\n    // Keep surrogate pair characters together.\n    return obj.match(reStrSymbol);\n  }\n  if (isArrayLike(obj)) return map(obj, identity);\n  return values(obj);\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport getLength from './_getLength.js';\nimport random from './random.js';\nimport toArray from './toArray.js';\n\n// Sample **n** random values from a collection using the modern version of the\n// [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\n// If **n** is not specified, returns a single random element.\n// The internal `guard` argument allows it to work with `_.map`.\nexport default function sample(obj, n, guard) {\n  if (n == null || guard) {\n    if (!isArrayLike(obj)) obj = values(obj);\n    return obj[random(obj.length - 1)];\n  }\n  var sample = toArray(obj);\n  var length = getLength(sample);\n  n = Math.max(Math.min(n, length), 0);\n  var last = length - 1;\n  for (var index = 0; index < n; index++) {\n    var rand = random(index, last);\n    var temp = sample[index];\n    sample[index] = sample[rand];\n    sample[rand] = temp;\n  }\n  return sample.slice(0, n);\n}\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// An internal function used for aggregate \"group by\" operations.\nexport default function group(behavior, partition) {\n  return function(obj, iteratee, context) {\n    var result = partition ? [[], []] : {};\n    iteratee = cb(iteratee, context);\n    each(obj, function(value, index) {\n      var key = iteratee(value, index, obj);\n      behavior(result, value, key);\n    });\n    return result;\n  };\n}\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Groups the object's values by a criterion. Pass either a string attribute\n// to group by, or a function that returns the criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key].push(value); else result[key] = [value];\n});\n","import group from './_group.js';\n\n// Indexes the object's values by a criterion, similar to `_.groupBy`, but for\n// when you know that your index values will be unique.\nexport default group(function(result, value, key) {\n  result[key] = value;\n});\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Counts instances of an object that group by a certain criterion. Pass\n// either a string attribute to count by, or a function that returns the\n// criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key]++; else result[key] = 1;\n});\n","import group from './_group.js';\n\n// Split a collection into two arrays: one whose elements all pass the given\n// truth test, and one whose elements all do not pass the truth test.\nexport default group(function(result, value, pass) {\n  result[pass ? 0 : 1].push(value);\n}, true);\n","// Internal `_.pick` helper function to determine whether `key` is an enumerable\n// property name of `obj`.\nexport default function keyInObj(value, key, obj) {\n  return key in obj;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport optimizeCb from './_optimizeCb.js';\nimport allKeys from './allKeys.js';\nimport keyInObj from './_keyInObj.js';\nimport flatten from './_flatten.js';\n\n// Return a copy of the object only containing the allowed properties.\nexport default restArguments(function(obj, keys) {\n  var result = {}, iteratee = keys[0];\n  if (obj == null) return result;\n  if (isFunction(iteratee)) {\n    if (keys.length > 1) iteratee = optimizeCb(iteratee, keys[1]);\n    keys = allKeys(obj);\n  } else {\n    iteratee = keyInObj;\n    keys = flatten(keys, false, false);\n    obj = Object(obj);\n  }\n  for (var i = 0, length = keys.length; i < length; i++) {\n    var key = keys[i];\n    var value = obj[key];\n    if (iteratee(value, key, obj)) result[key] = value;\n  }\n  return result;\n});\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport negate from './negate.js';\nimport map from './map.js';\nimport flatten from './_flatten.js';\nimport contains from './contains.js';\nimport pick from './pick.js';\n\n// Return a copy of the object without the disallowed properties.\nexport default restArguments(function(obj, keys) {\n  var iteratee = keys[0], context;\n  if (isFunction(iteratee)) {\n    iteratee = negate(iteratee);\n    if (keys.length > 1) context = keys[1];\n  } else {\n    keys = map(flatten(keys, false, false), String);\n    iteratee = function(value, key) {\n      return !contains(keys, key);\n    };\n  }\n  return pick(obj, iteratee, context);\n});\n","import { slice } from './_setup.js';\n\n// Returns everything but the last entry of the array. Especially useful on\n// the arguments object. Passing **n** will return all the values in\n// the array, excluding the last N.\nexport default function initial(array, n, guard) {\n  return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n}\n","import initial from './initial.js';\n\n// Get the first element of an array. Passing **n** will return the first N\n// values in the array. The **guard** check allows it to work with `_.map`.\nexport default function first(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[0];\n  return initial(array, array.length - n);\n}\n","import { slice } from './_setup.js';\n\n// Returns everything but the first entry of the `array`. Especially useful on\n// the `arguments` object. Passing an **n** will return the rest N values in the\n// `array`.\nexport default function rest(array, n, guard) {\n  return slice.call(array, n == null || guard ? 1 : n);\n}\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport filter from './filter.js';\nimport contains from './contains.js';\n\n// Take the difference between one array and a number of other arrays.\n// Only the elements present in just the first array will remain.\nexport default restArguments(function(array, rest) {\n  rest = flatten(rest, true, true);\n  return filter(array, function(value){\n    return !contains(rest, value);\n  });\n});\n","import restArguments from './restArguments.js';\nimport difference from './difference.js';\n\n// Return a version of the array that does not contain the specified value(s).\nexport default restArguments(function(array, otherArrays) {\n  return difference(array, otherArrays);\n});\n","import isBoolean from './isBoolean.js';\nimport cb from './_cb.js';\nimport getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce a duplicate-free version of the array. If the array has already\n// been sorted, you have the option of using a faster algorithm.\n// The faster algorithm will not work with an iteratee if the iteratee\n// is not a one-to-one function, so providing an iteratee will disable\n// the faster algorithm.\nexport default function uniq(array, isSorted, iteratee, context) {\n  if (!isBoolean(isSorted)) {\n    context = iteratee;\n    iteratee = isSorted;\n    isSorted = false;\n  }\n  if (iteratee != null) iteratee = cb(iteratee, context);\n  var result = [];\n  var seen = [];\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var value = array[i],\n        computed = iteratee ? iteratee(value, i, array) : value;\n    if (isSorted && !iteratee) {\n      if (!i || seen !== computed) result.push(value);\n      seen = computed;\n    } else if (iteratee) {\n      if (!contains(seen, computed)) {\n        seen.push(computed);\n        result.push(value);\n      }\n    } else if (!contains(result, value)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport uniq from './uniq.js';\nimport flatten from './_flatten.js';\n\n// Produce an array that contains the union: each distinct element from all of\n// the passed-in arrays.\nexport default restArguments(function(arrays) {\n  return uniq(flatten(arrays, true, true));\n});\n","import max from './max.js';\nimport getLength from './_getLength.js';\nimport pluck from './pluck.js';\n\n// Complement of zip. Unzip accepts an array of arrays and groups\n// each array's elements on shared indices.\nexport default function unzip(array) {\n  var length = (array && max(array, getLength).length) || 0;\n  var result = Array(length);\n\n  for (var index = 0; index < length; index++) {\n    result[index] = pluck(array, index);\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport unzip from './unzip.js';\n\n// Zip together multiple lists into a single array -- elements that share\n// an index go together.\nexport default restArguments(unzip);\n","import _ from './underscore.js';\n\n// Helper function to continue chaining intermediate results.\nexport default function chainResult(instance, obj) {\n  return instance._chain ? _(obj).chain() : obj;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport functions from './functions.js';\nimport { push } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add your own custom functions to the Underscore object.\nexport default function mixin(obj) {\n  each(functions(obj), function(name) {\n    var func = _[name] = obj[name];\n    _.prototype[name] = function() {\n      var args = [this._wrapped];\n      push.apply(args, arguments);\n      return chainResult(this, func.apply(_, args));\n    };\n  });\n  return _;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport { ArrayProto } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add all mutator `Array` functions to the wrapper.\neach(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) {\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) {\n        delete obj[0];\n      }\n    }\n    return chainResult(this, obj);\n  };\n});\n\n// Add all accessor `Array` functions to the wrapper.\neach(['concat', 'join', 'slice'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) obj = method.apply(obj, arguments);\n    return chainResult(this, obj);\n  };\n});\n\nexport default _;\n","// Default Export\n// ==============\n// In this module, we mix our bundled exports into the `_` object and export\n// the result. This is analogous to setting `module.exports = _` in CommonJS.\n// Hence, this module is also the entry point of our UMD bundle and the package\n// entry point for CommonJS and AMD users. In other words, this is (the source\n// of) the module you are interfacing with when you do any of the following:\n//\n// ```js\n// // CommonJS\n// var _ = require('underscore');\n//\n// // AMD\n// define(['underscore'], function(_) {...});\n//\n// // UMD in the browser\n// // _ is available as a global variable\n// ```\nimport * as allExports from './index.js';\nimport { mixin } from './index.js';\n\n// Add all of the Underscore functions to the wrapper object.\nvar _ = mixin(allExports);\n// Legacy Node.js API.\n_._ = _;\n// Export the Underscore API.\nexport default _;\n","// Is a given value equal to null?\nexport default function isNull(obj) {\n  return obj === null;\n}\n","// Is a given value a DOM element?\nexport default function isElement(obj) {\n  return !!(obj && obj.nodeType === 1);\n}\n","import { _isFinite } from './_setup.js';\nimport isSymbol from './isSymbol.js';\n\n// Is a given object a finite number?\nexport default function isFinite(obj) {\n  return !isSymbol(obj) && _isFinite(obj) && !isNaN(parseFloat(obj));\n}\n","import getLength from './_getLength.js';\nimport isArray from './isArray.js';\nimport isString from './isString.js';\nimport isArguments from './isArguments.js';\nimport keys from './keys.js';\n\n// Is a given array, string, or object empty?\n// An \"empty\" object has no enumerable own-properties.\nexport default function isEmpty(obj) {\n  if (obj == null) return true;\n  // Skip the more expensive `toString`-based type checks if `obj` has no\n  // `.length`.\n  var length = getLength(obj);\n  if (typeof length == 'number' && (\n    isArray(obj) || isString(obj) || isArguments(obj)\n  )) return length === 0;\n  return getLength(keys(obj)) === 0;\n}\n","import keys from './keys.js';\n\n// Convert an object into a list of `[key, value]` pairs.\n// The opposite of `_.object` with one argument.\nexport default function pairs(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var pairs = Array(length);\n  for (var i = 0; i < length; i++) {\n    pairs[i] = [_keys[i], obj[_keys[i]]];\n  }\n  return pairs;\n}\n","import baseCreate from './_baseCreate.js';\nimport extendOwn from './extendOwn.js';\n\n// Creates an object that inherits from the given prototype object.\n// If additional properties are provided then they will be added to the\n// created object.\nexport default function create(prototype, props) {\n  var result = baseCreate(prototype);\n  if (props) extendOwn(result, props);\n  return result;\n}\n","import isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport extend from './extend.js';\n\n// Create a (shallow-cloned) duplicate of an object.\nexport default function clone(obj) {\n  if (!isObject(obj)) return obj;\n  return isArray(obj) ? obj.slice() : extend({}, obj);\n}\n","// Invokes `interceptor` with the `obj` and then returns `obj`.\n// The primary purpose of this method is to \"tap into\" a method chain, in\n// order to perform operations on intermediate results within the chain.\nexport default function tap(obj, interceptor) {\n  interceptor(obj);\n  return obj;\n}\n","import _has from './_has.js';\nimport toPath from './_toPath.js';\n\n// Shortcut function for checking if an object has a given property directly on\n// itself (in other words, not on a prototype). Unlike the internal `has`\n// function, this public version can also traverse nested properties.\nexport default function has(obj, path) {\n  path = toPath(path);\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    var key = path[i];\n    if (!_has(obj, key)) return false;\n    obj = obj[key];\n  }\n  return !!length;\n}\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the results of applying the `iteratee` to each element of `obj`.\n// In contrast to `_.map` it returns an object.\nexport default function mapObject(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = keys(obj),\n      length = _keys.length,\n      results = {};\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys[index];\n    results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","import noop from './noop.js';\nimport get from './get.js';\n\n// Generates a function for a given object that returns a given property.\nexport default function propertyOf(obj) {\n  if (obj == null) return noop;\n  return function(path) {\n    return get(obj, path);\n  };\n}\n","import optimizeCb from './_optimizeCb.js';\n\n// Run a function **n** times.\nexport default function times(n, iteratee, context) {\n  var accum = Array(Math.max(0, n));\n  iteratee = optimizeCb(iteratee, context, 1);\n  for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n  return accum;\n}\n","import isFunction from './isFunction.js';\nimport toPath from './_toPath.js';\n\n// Traverses the children of `obj` along `path`. If a child is a function, it\n// is invoked with its parent as context. Returns the value of the final\n// child, or `fallback` if any child is undefined.\nexport default function result(obj, path, fallback) {\n  path = toPath(path);\n  var length = path.length;\n  if (!length) {\n    return isFunction(fallback) ? fallback.call(obj) : fallback;\n  }\n  for (var i = 0; i < length; i++) {\n    var prop = obj == null ? void 0 : obj[path[i]];\n    if (prop === void 0) {\n      prop = fallback;\n      i = length; // Ensure we don't continue iterating.\n    }\n    obj = isFunction(prop) ? prop.call(obj) : prop;\n  }\n  return obj;\n}\n","import _ from './underscore.js';\n\n// Start chaining a wrapped Underscore object.\nexport default function chain(obj) {\n  var instance = _(obj);\n  instance._chain = true;\n  return instance;\n}\n","import has from './_has.js';\n\n// Memoize an expensive function by storing its results.\nexport default function memoize(func, hasher) {\n  var memoize = function(key) {\n    var cache = memoize.cache;\n    var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n    if (!has(cache, address)) cache[address] = func.apply(this, arguments);\n    return cache[address];\n  };\n  memoize.cache = {};\n  return memoize;\n}\n","import now from './now.js';\n\n// Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\nexport default function throttle(func, wait, options) {\n  var timeout, context, args, result;\n  var previous = 0;\n  if (!options) options = {};\n\n  var later = function() {\n    previous = options.leading === false ? 0 : now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n\n  var throttled = function() {\n    var _now = now();\n    if (!previous && options.leading === false) previous = _now;\n    var remaining = wait - (_now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = _now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n\n  throttled.cancel = function() {\n    clearTimeout(timeout);\n    previous = 0;\n    timeout = context = args = null;\n  };\n\n  return throttled;\n}\n","import restArguments from './restArguments.js';\nimport now from './now.js';\n\n// When a sequence of calls of the returned function ends, the argument\n// function is triggered. The end of a sequence is defined by the `wait`\n// parameter. If `immediate` is passed, the argument function will be\n// triggered at the beginning of the sequence instead of at the end.\nexport default function debounce(func, wait, immediate) {\n  var timeout, previous, args, result, context;\n\n  var later = function() {\n    var passed = now() - previous;\n    if (wait > passed) {\n      timeout = setTimeout(later, wait - passed);\n    } else {\n      timeout = null;\n      if (!immediate) result = func.apply(context, args);\n      // This check is needed because `func` can recursively invoke `debounced`.\n      if (!timeout) args = context = null;\n    }\n  };\n\n  var debounced = restArguments(function(_args) {\n    context = this;\n    args = _args;\n    previous = now();\n    if (!timeout) {\n      timeout = setTimeout(later, wait);\n      if (immediate) result = func.apply(context, args);\n    }\n    return result;\n  });\n\n  debounced.cancel = function() {\n    clearTimeout(timeout);\n    timeout = args = context = null;\n  };\n\n  return debounced;\n}\n","import partial from './partial.js';\n\n// Returns the first function passed as an argument to the second,\n// allowing you to adjust arguments, run code before and after, and\n// conditionally execute the original function.\nexport default function wrap(func, wrapper) {\n  return partial(wrapper, func);\n}\n","// Returns a function that is the composition of a list of functions, each\n// consuming the return value of the function that follows.\nexport default function compose() {\n  var args = arguments;\n  var start = args.length - 1;\n  return function() {\n    var i = start;\n    var result = args[start].apply(this, arguments);\n    while (i--) result = args[i].call(this, result);\n    return result;\n  };\n}\n","// Returns a function that will only be executed on and after the Nth call.\nexport default function after(times, func) {\n  return function() {\n    if (--times < 1) {\n      return func.apply(this, arguments);\n    }\n  };\n}\n","import find from './find.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.find`: getting the first\n// object containing specific `key:value` pairs.\nexport default function findWhere(obj, attrs) {\n  return find(obj, matcher(attrs));\n}\n","import filter from './filter.js';\nimport negate from './negate.js';\nimport cb from './_cb.js';\n\n// Return all the elements for which a truth test fails.\nexport default function reject(obj, predicate, context) {\n  return filter(obj, negate(cb(predicate)), context);\n}\n","import filter from './filter.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.filter`: selecting only\n// objects containing specific `key:value` pairs.\nexport default function where(obj, attrs) {\n  return filter(obj, matcher(attrs));\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the minimum element (or element-based computation).\nexport default function min(obj, iteratee, context) {\n  var result = Infinity, lastComputed = Infinity,\n      value, computed;\n  if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value < result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed < lastComputed || (computed === Infinity && result === Infinity)) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import sample from './sample.js';\n\n// Shuffle a collection.\nexport default function shuffle(obj) {\n  return sample(obj, Infinity);\n}\n","import cb from './_cb.js';\nimport pluck from './pluck.js';\nimport map from './map.js';\n\n// Sort the object's values by a criterion produced by an iteratee.\nexport default function sortBy(obj, iteratee, context) {\n  var index = 0;\n  iteratee = cb(iteratee, context);\n  return pluck(map(obj, function(value, key, list) {\n    return {\n      value: value,\n      index: index++,\n      criteria: iteratee(value, key, list)\n    };\n  }).sort(function(left, right) {\n    var a = left.criteria;\n    var b = right.criteria;\n    if (a !== b) {\n      if (a > b || a === void 0) return 1;\n      if (a < b || b === void 0) return -1;\n    }\n    return left.index - right.index;\n  }), 'value');\n}\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the number of elements in a collection.\nexport default function size(obj) {\n  if (obj == null) return 0;\n  return isArrayLike(obj) ? obj.length : keys(obj).length;\n}\n","import rest from './rest.js';\n\n// Get the last element of an array. Passing **n** will return the last N\n// values in the array.\nexport default function last(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[array.length - 1];\n  return rest(array, Math.max(0, array.length - n));\n}\n","import filter from './filter.js';\n\n// Trim out all falsy values from an array.\nexport default function compact(array) {\n  return filter(array, Boolean);\n}\n","import _flatten from './_flatten.js';\n\n// Flatten out an array, either recursively (by default), or up to `depth`.\n// Passing `true` or `false` as `depth` means `1` or `Infinity`, respectively.\nexport default function flatten(array, depth) {\n  return _flatten(array, depth, false);\n}\n","import getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce an array that contains every item shared between all the\n// passed-in arrays.\nexport default function intersection(array) {\n  var result = [];\n  var argsLength = arguments.length;\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var item = array[i];\n    if (contains(result, item)) continue;\n    var j;\n    for (j = 1; j < argsLength; j++) {\n      if (!contains(arguments[j], item)) break;\n    }\n    if (j === argsLength) result.push(item);\n  }\n  return result;\n}\n","import getLength  from './_getLength.js';\n\n// Converts lists into objects. Pass either a single array of `[key, value]`\n// pairs, or two parallel arrays of the same length -- one of keys, and one of\n// the corresponding values. Passing by pairs is the reverse of `_.pairs`.\nexport default function object(list, values) {\n  var result = {};\n  for (var i = 0, length = getLength(list); i < length; i++) {\n    if (values) {\n      result[list[i]] = values[i];\n    } else {\n      result[list[i][0]] = list[i][1];\n    }\n  }\n  return result;\n}\n","// Generate an integer Array containing an arithmetic progression. A port of\n// the native Python `range()` function. See\n// [the Python documentation](https://docs.python.org/library/functions.html#range).\nexport default function range(start, stop, step) {\n  if (stop == null) {\n    stop = start || 0;\n    start = 0;\n  }\n  if (!step) {\n    step = stop < start ? -1 : 1;\n  }\n\n  var length = Math.max(Math.ceil((stop - start) / step), 0);\n  var range = Array(length);\n\n  for (var idx = 0; idx < length; idx++, start += step) {\n    range[idx] = start;\n  }\n\n  return range;\n}\n","import { slice } from './_setup.js';\n\n// Chunk a single array into multiple arrays, each containing `count` or fewer\n// items.\nexport default function chunk(array, count) {\n  if (count == null || count < 1) return [];\n  var result = [];\n  var i = 0, length = array.length;\n  while (i < length) {\n    result.push(slice.call(array, i, i += count));\n  }\n  return result;\n}\n","// https://github.com/ogt/valid-url\n\n'use strict';\n\n/**\n * URI spitter method - direct from RFC 3986\n * @param {string} link uri e.g. 'https://www.google.com'\n * @returns URI object with properties uri, scheme, authority, path, query, fragment.\n */\nexport const splitUri = function (link) {\n  const splitted = link.match(/(?:([^:\\/?#]+):)?(?:\\/\\/([^\\/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?/);\n  let uri = splitted[0];\n  let scheme = splitted[1];\n  let authority = splitted[2];\n  let path = splitted[3];\n  let query = splitted[4];\n  let fragment = splitted[5];\n  return {\n    uri,\n    scheme,\n    authority,\n    path,\n    query,\n    fragment,\n  };\n};\n\nfunction is_iri(value) {\n  if (!value) {\n    return;\n  }\n\n  // check for illegal characters\n  if (/[^a-z0-9\\:\\/\\?\\#\\[\\]\\@\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=\\.\\-\\_\\~\\%]/i.test(value)) return;\n\n  // check for hex escapes that aren't complete\n  if (/%[^0-9a-f]/i.test(value)) return;\n  if (/%[0-9a-f](:?[^0-9a-f]|$)/i.test(value)) return;\n\n  let splitted = [];\n  let scheme = '';\n  let authority = '';\n  let path = '';\n  let query = '';\n  let fragment = '';\n  let out = '';\n\n  // from RFC 3986\n  splitted = splitUri(value);\n  scheme = splitted.scheme;\n  authority = splitted.authority;\n  path = splitted.path;\n  query = splitted.query;\n  fragment = splitted.fragment;\n\n  // if authority is present, the path must be empty or begin with a /\n  if (authority && authority.length) {\n    if (!(path.length === 0 || /^\\//.test(path))) return;\n  } else {\n    // if authority is not present, the path must not start with //\n    if (/^\\/\\//.test(path)) return;\n  }\n\n  if (scheme && scheme.length) {\n    // scheme must begin with a letter, then consist of letters, digits, +, ., or -\n    if (!/^[a-z][a-z0-9\\+\\-\\.]*$/.test(scheme.toLowerCase())) return;\n  }\n\n  // re-assemble the URL per section 5.3 in RFC 3986\n  if (scheme && scheme.length) {\n    out += `${ scheme }:`;\n  }\n  if (authority && authority.length) {\n    out += `//${ authority }`;\n  }\n\n  out += path;\n\n  if (query && query.length) {\n    out += `?${ query }`;\n  }\n\n  if (fragment && fragment.length) {\n    out += `#${ fragment }`;\n  }\n\n  return out;\n}\n\nfunction is_http_iri(value, allowHttps) {\n  if (!is_iri(value)) {\n    return;\n  }\n\n  let splitted = [];\n  let scheme = '';\n  let authority = '';\n  let path = '';\n  let port = '';\n  let query = '';\n  let fragment = '';\n  let out = '';\n\n  // from RFC 3986\n  splitted = splitUri(value);\n  scheme = splitted.scheme;\n  authority = splitted.authority;\n  path = splitted.path;\n  query = splitted.query;\n  fragment = splitted.fragment;\n\n  if (!scheme) return;\n\n  if (allowHttps) {\n    if (scheme.toLowerCase() != 'https') return;\n  } else if (scheme.toLowerCase() != 'http') { return; }\n\n  // fully-qualified URIs must have an authority section that is\n  // a valid host\n  if (!authority) {\n    return;\n  }\n\n  // enable port component\n  if (/:(\\d+)$/.test(authority)) {\n    port = authority.match(/:(\\d+)$/)[0];\n    authority = authority.replace(/:\\d+$/, '');\n  }\n\n  out += `${ scheme }:`;\n  out += `//${ authority }`;\n\n  if (port) {\n    out += port;\n  }\n\n  out += path;\n\n  if (query && query.length) {\n    out += `?${ query }`;\n  }\n\n  if (fragment && fragment.length) {\n    out += `#${ fragment }`;\n  }\n\n  return out;\n}\n\nfunction is_https_iri(value) {\n  return is_http_iri(value, true);\n}\n\nfunction is_web_iri(value) {\n  return (is_http_iri(value) || is_https_iri(value));\n}\n\n\nexport const is_uri = is_iri\nexport const is_http_uri = is_http_iri\nexport const is_https_uri = is_https_iri\nexport const is_web_uri = is_web_iri\nexport const isUri = is_iri\nexport const isHttpUri = is_http_iri\nexport const isHttpsUri = is_https_iri\nexport const isWebUri = is_web_iri\n\n","'use strict';\nimport * as validUrl from \"./validUrl\"\nimport * as linkBoxes from \"./linkBoxes\"\nlet padOuter;\nconst getPadOuter = () => (padOuter = padOuter || $('iframe[name=\"ace_outer\"]').contents()); // finds the ace_outer iframe and assigns its contents to padOuter, then returns it\n\n/**\n * @returns wrapper for all the link modals on the page\n */\nconst getLinksContainer = () => getPadOuter().find('#linkBoxWrapper');\n\n/* ***** Public methods: ***** */\n\n/**\n * Displays the parent div of a specific link modal.\n * @param {string} linkId   ID of a specific link\n */\nconst showLink = (linkId) => getLinksContainer().find(`#${ linkId }`).show();\n\n/**\n * Hides the parent div of a specific link modal.\n * @param {string} linkId   ID of a specific link\n */\nconst hideLink = (linkId) => {\n  getLinksContainer().find(`#${ linkId }`).hide(); // hides the entire modal (highest in hierarchy)\n  padOuter.find(`#show-form-${ linkId }`).show(); // removes display:none from the link info viewer\n  padOuter.find(`#edit-form-${ linkId }`).hide(); // adds display:none to link editor (accessed throughh pen icon on show-form-linkId)\n};\n\n/**\n * Hides all link modals on the page.\n */\nconst hideAllLinks = () => getLinksContainer().find('.link-container').hide();\n\n\nconst getPosition = (e) => {\n  let posx = 0;\n  let posy = 0;\n\n  if (!e) e = window.event;\n\n  if (e.pageX || e.pageY) {\n    posx = e.pageX;\n    posy = e.pageY;\n  } else if (e.clientX || e.clientY) {\n    posx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\n    posy = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\n  }\n\n  return { x: posx, y: posy };\n};\n\n\nconst setPositionModal = (e, linkModal, padInner) => {\n  const clickCoords = getPosition(e);\n  const clickCoordsX = clickCoords.x;\n  const clickCoordsY = clickCoords.y;\n\n  const modalWith = linkModal.innerWidth();\n  const modalHeight = linkModal.outerHeight(true);\n\n  const windowWidth = padInner.innerWidth();\n  const windowHeight = padInner.outerHeight(true);\n\n  const windoPaddingTop = parseInt(padInner.css('padding-top'));\n  const linkElementTop = parseInt($(e.target).offset().top);\n  const linkElementHeight = parseInt($(e.target).outerHeight(true));\n\n  let newL = e.clientX + padInner.offset().left;\n  let newT = linkElementTop + linkElementHeight + (windoPaddingTop / 2);\n\n  if ((windowWidth - clickCoordsX) < modalWith) {\n    newL = windowWidth - modalWith - 16;\n  }\n\n  if ((windowHeight - clickCoordsY) < modalHeight) {\n    newT = windowHeight - modalHeight;\n  }\n\n  if (!$('body').hasClass('mobileView')) {\n    newT += 35;\n  }\n\n  if ($('body').hasClass('mobileView')) {\n    linkModal.css({\n      left: '50%',\n      top: `${ newT }px`,\n      transform: 'translateX(-50%)',\n      width: '96vw',\n    });\n    linkModal.find('a.ep_hyperlink_title').css({\n      'margin-left': '4px',\n    });\n    linkModal.find('.ep_hyperlink_docs_bubble_button_container').css({\n      'margin-left': 'auto',\n    });\n  } else {\n    linkModal.css({ left: `${ newL }px`, top: `${ newT }px` });\n  }\n};\n\n\nconst showLinkModal = (e, linkObj, socket) => {\n  const padOuter = $('iframe[name=\"ace_outer\"]').contents();\n  const padInner = getPadOuter().find('iframe[name=\"ace_inner\"]');\n  const linkId = linkObj.linkId;\n  const linkModalAppended =\n    getLinksContainer().find(`#${ linkId }`).length === 0 ? false : true;\n\n  hideAllLinks();\n\n  if (!linkObj.hyperlink) {\n    console.error('[hyperlink]: link does not exist', linkObj);\n    return false;\n  }\n\n  // find link modal, if does not exist create a link modal\n  let linkModal = getLinksContainer().find(`#${ linkId }`);\n  if (!linkModalAppended) linkModal = $('#linkBoxTemplate').tmpl({ ...linkObj });\n\n  const loaded = linkModal.attr('data-loaded');\n\n  // if the linkModal was not appended, create a modal and append it to #linkBoxWrapper\n  if (!linkModalAppended) {\n    padOuter.find('#linkBoxWrapper').append(linkModal);\n  } else {\n    // if the modal was exist update text and hypertext\n    linkModal.show();\n    // if the old hyperlink was not same as new hyperlink\n    if (linkObj.hyperlink !== linkModal.find('a.ep_hyperlink_title').attr('href')) {\n      linkModal.attr('data-loaded', 'false');\n    }\n\n    linkModal.attr('data-hyperlink', linkObj.hyperlink);\n    linkModal.find('input#hyperlink-url').val(linkObj.hyperlink);\n\n    linkModal.find('a.ep_hyperlink_title').attr({\n      title: linkObj.hyperlink,\n      href: linkObj.hyperlink,\n    });\n  }\n\n  // If the text we saved has changed and is different from the contents of the pad\n  const text = padInner.contents().find(`.${ linkId }`).text();\n  linkModal.find('input#hyperlink-text-hidden').val(text);\n  linkModal.find('input#hyperlink-text').val(text);\n\n  // TODO: 1/ hyperlink for social and\n  // TODO: 2/ inside link\n  if (loaded != 'true') {\n    let hyperlink = linkObj.hyperlink || linkModal.attr('data-hyperlink');\n    let dividedUrl;\n\n    try {\n      dividedUrl = new URL(hyperlink);\n    } catch (error) {\n      console.error(`[hyperlink]: ${ error }`);\n      linkBoxes.hideLink(linkId);\n      return;\n    }\n\n    const ep_hyperlink_img = linkModal.find('#ep_hyperlink_img');\n    const ep_hyperlink_title = linkModal.find('a.ep_hyperlink_title');\n    const card_loading_hyperlink = linkModal.find('#card_loading_hyperlink');\n    const ep_hyperlink_description = linkModal.find(\n      '#ep_hyperlink_description'\n    );\n\n    ep_hyperlink_description.text('');\n    ep_hyperlink_title.text(hyperlink);\n\n    ep_hyperlink_img.hide();\n    ep_hyperlink_title.show();\n    card_loading_hyperlink.show();\n\n    // raise for og:title resolving\n\n    if (!/^http:\\/\\//.test(hyperlink) && !/^https:\\/\\//.test(hyperlink)) {\n      hyperlink = `https://${ hyperlink }`;\n    }\n\n    const changeMetaView = function (hyperlink, title, image) {\n      ep_hyperlink_img.attr('src', image);\n      ep_hyperlink_img.on('load', () => {\n        card_loading_hyperlink.fadeOut(500, () => {\n          ep_hyperlink_img.fadeIn();\n          ep_hyperlink_title.text(\n            title.replace(/^(?:https?:\\/\\/)?(?:www\\.)?/i, '')\n          );\n          ep_hyperlink_description.text(\n            hyperlink.replace(/^(?:https?:\\/\\/)?(?:www\\.)?/i, '')\n          );\n          linkModal.attr({ 'data-loaded': true });\n        });\n      });\n    };\n\n    if (!validUrl.isUri(hyperlink)) {\n      const img =\n        '../static/plugins/ep_full_hyperlinks/static/dist/img/nometa.png';\n      changeMetaView(hyperlink, hyperlink, img);\n      return false;\n    }\n    // ........\n    const metaResolverCallBack = function (result) {\n      if (result.metadata.image && result.metadata.title) {\n        changeMetaView(\n          hyperlink,\n          result.metadata.title,\n          result.metadata.image\n        );\n      } else {\n        const editedHyperlink = `https://${ dividedUrl.hostname }`;\n        if (result.last !== true) {\n          socket.emit(\n            'metaResolver',\n            { padId: clientVars.padId, editedHyperlink, last: true },\n            metaResolverCallBack\n          );\n        } else {\n          changeMetaView(\n            hyperlink,\n            result.metadata.title || hyperlink,\n            '../static/plugins/ep_full_hyperlinks/static/dist/img/nometa.png'\n          );\n        }\n      }\n    };\n    // ........\n    if (dividedUrl.hostname.indexOf('twitter.com') >= 0) {\n      changeMetaView(\n        hyperlink,\n        'Twitter',\n        '../static/plugins/ep_full_hyperlinks/static/dist/img/twitter.png'\n      );\n    } else if (dividedUrl.protocol.indexOf('mailto') >= 0) {\n      changeMetaView(\n        hyperlink,\n        'Send email',\n        '../static/plugins/ep_full_hyperlinks/static/dist/img/envelope.svg'\n      );\n    } else if (dividedUrl.protocol.indexOf('skype') >= 0) {\n      changeMetaView(\n        hyperlink,\n        'Open Skype',\n        '../static/plugins/ep_full_hyperlinks/static/dist/img/skype.svg'\n      );\n    } else {\n      socket.emit(\n        'metaResolver',\n        { padId: clientVars.padId, hyperlink, last: false },\n        metaResolverCallBack\n      );\n    }\n  }\n\n  setPositionModal(e, linkModal, padInner);\n  linkModal.addClass('hyperlink-display');\n};\n\n// Indicates if event was on one of the elements that does not close link\nconst shouldNotCloseLink = function (e) {\n  // a link box\n  if (\n    $(e.target).closest('.link').length ||\n    $(e.target).closest('.link-modal').length ||\n    $(e.target).closest('.ep_hyperlink_docs_bubble_button_edit').length ||\n    $(e.target).closest('.ep_hyperlink_docs_bubble_button_delete').length ||\n    $(e.target).closest('.ep_hyperlink_docs_bubble_button_copy').length ||\n    $(e.target).closest('.full-display-link').length ||\n    $(e.target).closest('.link-title-wrapper').length ||\n    $(e.target).closest('.link-edit-form').length ||\n    $(e.target).closest('.link-text-text').length ||\n    $(e.target).closest('.link-text-hyperlink').length\n  ) {\n    // the link modal\n    return true;\n  }\n  return false;\n};\n\nconst isLinkInternal = (url) => {\n  const incomeURL = new URL(url);\n  let result = false;\n\n  // 1/ check the origin\n  if (incomeURL.origin !== location.origin) return false;\n\n\n  // 2/ origin the same but diff pad name\n  // check if the income url related to filter url\n  if (incomeURL.origin === location.origin) {\n    // does have p\n    const doesPInURL = location.pathname.split('/').indexOf('p') > 0;\n    const padName = clientVars.padId;\n    const padMainPathname = doesPInURL ? `/p/${ padName }` : `/${ padName }`;\n    // check if the income url pad name is the same current pad name\n    if (location.pathname.substring(0, padMainPathname.length) === padMainPathname) result = true;\n\n    // does single pad active\n    if (clientVars.ep_singlePad.active) result = true;\n  }\n\n  return result;\n};\n\nconst doesLinkHaveFilter = (url) => {\n  const result = [];\n  const padName = clientVars.padId;\n\n  const currentPathname = url.pathname.split('/');\n\n  let padNameIndex = currentPathname.indexOf(padName) + 1;\n\n  if (clientVars.ep_singlePad.active) padNameIndex = 0;\n\n  const filters = [...currentPathname].splice(padNameIndex, currentPathname.length - 1);\n\n  result.push(...filters);\n\n  return result;\n};\n\n// internal link\n// other plugin must listen for pushstate to get new data and excute they part.\nconst internalLinkClick = function (event) {\n  event.preventDefault();\n  event.stopPropagation();\n  const href = $(this).attr('href');\n\n  if (isLinkInternal(href)) {\n    const incomeURL = new URL(href);\n    let targetPath = `${ incomeURL.search }`;\n    const filters = doesLinkHaveFilter(incomeURL);\n\n    if (filters.length > 0) {\n      const doesPInURL = location.pathname.split('/').indexOf('p') > 0;\n      targetPath = doesPInURL ? '/p' : '';\n      if (!clientVars.ep_singlePad.active) targetPath += `/${ clientVars.padId }`;\n      targetPath += `/${ filters.join('/') }${ incomeURL.search }`;\n    }\n\n    if (incomeURL.search.length === 0) targetPath = href;\n\n    // The Target is which plugin should listen more for more functionality\n    // In this example, if we find a slug filter in your URL,\n    // the target should be the filter plugin\n    const tartge = filters.length > 0 ? 'filter' : 'other';\n\n    window.history.pushState({ type: 'hyperLink', href, target: tartge }, document.title, targetPath);\n    // close all link\n    hideAllLinks();\n  } else {\n    window.open(href, '_blank');\n  }\n  return false;\n};\n\n\n\nexport {\n  showLink,\n  hideLink,\n  hideAllLinks,\n  showLinkModal,\n  getLinksContainer,\n  shouldNotCloseLink,\n  internalLinkClick,\n}\n","'use strict';\nimport * as validUrl from \"./validUrl\"\n/**\n * Create a link object with data filled on the given form\n * @param {jQuery} form .link-edit-form\n * @returns link object (vars text, oldText, hyperlink)\n */\nconst buildLinkFrom = (form) => {\n  const text = form.find('#hyperlink-text').val();\n  const oldText = form.find('#hyperlink-text-hidden').val();\n  const hyperlink = form.find('#hyperlink-url').val();\n\n  return {\n    text,\n    oldText,\n    hyperlink,\n  };\n};\n\n// Callback for new link Cancel\nconst cancelNewLink = () => hideNewLinkPopup();\n\n// Callback for new link Submit\nconst submitNewLink = (callback) => {\n  const index = 0;\n  const form = $(document).find('#newLink');\n  const link = buildLinkFrom(form);\n\n  // if scheme not present, add \"https://\"\n  if (!validUrl.splitUri(link.hyperlink).scheme) {\n    link.hyperlink = `https://${ link.hyperlink }`;\n  }\n\n  if (link.text.length > 0 && validUrl.isUri(link.hyperlink)) {\n    form.find('#hyperlink-text, #hyperlink-url').removeClass('error');\n    hideNewLinkPopup();\n    callback(link, index);\n  } else {\n    if (link.text.length === 0) form.find('#hyperlink-text').addClass('error');\n    if (!validUrl.isUri(link.hyperlink)) form.find('#hyperlink-url').addClass('error');\n  }\n  return false;\n};\n\n/* ***** Public methods: ***** */\n\n// Insert new Link Form\nconst insertNewLinkPopupIfDontExist = (link, callback) => {\n  $('#newLink').remove();\n  link.linkId = '';\n  const newLinkPopup = $('#newLinkTemplate').tmpl(link);\n  newLinkPopup.appendTo($('#editorcontainerbox'));\n\n  // Cancel btn\n  $('#newLink #link-cancel-btn').on('click', (e) => cancelNewLink());\n\n  // Create btn // link-create-btn\n  $('#newLink #link-create-btn').on('click', (e) => submitNewLink(callback));\n\n  $(document).on('submit', 'form.link-edit-form', (e) => {\n    e.preventDefault();\n    submitNewLink(callback);\n  });\n\n  return newLinkPopup;\n};\n\nconst showNewLinkPopup = () => {\n  if (!$('body').hasClass('mobileView')) {\n    // position below link icon\n    $('#newLink').css('left', $('.toolbar .addLink').offset().left);\n  }\n\n\n  // Reset form to make sure it is all clear\n  $('#newLink').find('textarea').val('');\n  $('#newLink').find('.link-content, .to-value').removeClass('error');\n\n  // Show popup\n  $('#newLink').addClass('popup-show');\n\n  // mark selected text, so it is clear to user which text range the link is being applied to\n  pad.plugins.ep_full_hyperlinks.preLinkMarker.markSelectedText();\n\n  // focus on hyperlink input\n  setTimeout(() => $('#newLink #hyperlink-url').focus().select(), 500);\n};\n\nconst hideNewLinkPopup = () => {\n  $('#newLink').removeClass('popup-show');\n\n  // force focus to be lost, so virtual keyboard is hidden on mobile devices\n  $('#newLink').find(':focus').blur();\n\n  // unmark selected text, as now there is no text being linked\n  pad.plugins.ep_full_hyperlinks.preLinkMarker.unmarkSelectedText();\n};\n\nexport {\n  insertNewLinkPopupIfDontExist,\n  showNewLinkPopup,\n  hideNewLinkPopup,\n}\n","'use strict';\n\nconst MARK_CLASS = 'pre-selected-link';\n\nconst preLinkMarker = function (ace) {\n  this.ace = ace;\n  const self = this;\n\n  // do nothing if this feature is not enabled\n  if (!this.highlightSelectedText()) return;\n\n  // remove any existing marks, as there is no link being added on plugin initialization\n  // (we need the timeout to let the plugin be fully initialized before starting to remove\n  // marked texts)\n  setTimeout(() => {\n    self.unmarkSelectedText();\n  }, 0);\n};\n\n// Indicates if Etherpad is configured to highlight text\npreLinkMarker.prototype.highlightSelectedText = function () {\n  return clientVars.highlightSelectedText;\n};\n\npreLinkMarker.prototype.markSelectedText = function () {\n  // do nothing if this feature is not enabled\n  if (!this.highlightSelectedText()) return;\n\n  this.ace.callWithAce(doNothing, 'markPreSelectedTextToLink', true);\n};\n\npreLinkMarker.prototype.unmarkSelectedText = function () {\n  // do nothing if this feature is not enabled\n  if (!this.highlightSelectedText()) return;\n\n  this.ace.callWithAce(doNothing, 'unmarkPreSelectedTextToLink', true);\n};\n\npreLinkMarker.prototype.performNonUnduableEvent = function (eventType, callstack, action) {\n  callstack.startNewEvent('nonundoable');\n  action();\n  callstack.startNewEvent(eventType);\n};\n\npreLinkMarker.prototype.handleMarkText = function (context) {\n  const editorInfo = context.editorInfo;\n  const rep = context.rep;\n  const callstack = context.callstack;\n\n  // first we need to unmark any existing text, otherwise we'll have 2 text ranges marked\n  this.removeMarks(editorInfo, rep, callstack);\n\n  this.addMark(editorInfo, callstack);\n};\n\npreLinkMarker.prototype.handleUnmarkText = function (context) {\n  const editorInfo = context.editorInfo;\n  const rep = context.rep;\n  const callstack = context.callstack;\n\n  this.removeMarks(editorInfo, rep, callstack);\n};\n\npreLinkMarker.prototype.addMark = function (editorInfo, callstack) {\n  const eventType = callstack.editEvent.eventType;\n\n  // we don't want the text marking to be undoable\n  this.performNonUnduableEvent(eventType, callstack, () => {\n    editorInfo.ace_setAttributeOnSelection(MARK_CLASS, clientVars.userId);\n  });\n};\n\npreLinkMarker.prototype.removeMarks = function (editorInfo, rep, callstack) {\n  const eventType = callstack.editEvent.eventType;\n  const originalSelStart = rep.selStart;\n  const originalSelEnd = rep.selEnd;\n\n  // we don't want the text marking to be undoable\n  this.performNonUnduableEvent(eventType, callstack, () => {\n    // remove marked text\n    const padInner = $('iframe[name=\"ace_outer\"]').contents().find('iframe[name=\"ace_inner\"]');\n    const selector = `.${ MARK_CLASS }`;\n    const repArr = editorInfo.ace_getRepFromSelector(selector, padInner);\n    // repArr is an array of reps\n    $.each(repArr, (index, rep) => {\n      editorInfo.ace_performSelectionChange(rep[0], rep[1], true);\n      editorInfo.ace_setAttributeOnSelection(MARK_CLASS, false);\n    });\n\n    // make sure selected text is back to original value\n    editorInfo.ace_performSelectionChange(originalSelStart, originalSelEnd, true);\n  });\n};\n\n// we do nothing on callWithAce; actions will be handled on aceEditEvent\nconst doNothing = () => { };\n\nconst init = (ace) => new preLinkMarker(ace);\n\n\nexport {\n  MARK_CLASS,\n  init,\n}\n","'use strict';\n\nconst getSelectionFormated = (padInner, links) => {\n  const selection = padInner[0].contentWindow.getSelection().getRangeAt(0);\n  const selectedElements = document.createElement('div');\n\n  selectedElements.append(selection.cloneContents());\n\n  try {\n    selectedElements.querySelectorAll('.link').forEach((el) => {\n      const cls = el.getAttribute('class');\n      const classLinkId = /(?:^| )(lc-[A-Za-z0-9]*)/.exec(cls);\n      const lindId = classLinkId[1];\n\n      let newTag;\n\n      if (!links[lindId]) {\n        newTag = document.createElement('span');\n        newTag.innerHTML = el.innerHTML;\n      } else {\n        // create a tag\n        newTag = document.createElement('a');\n        newTag.innerHTML = el.innerHTML;\n        newTag.setAttribute('href', links[lindId].data.hyperlink);\n      }\n\n      // replace the current node with href node\n      const span = selectedElements.querySelector(`.${ lindId }`);\n      span.replaceWith(newTag);\n    });\n  } catch (error) {\n    console.error('[ep_full_hyperlinks]: copy data has an error', error);\n  }\n\n  return selectedElements;\n};\n\nconst addTextOnClipboard = (e, padInner, removeSelection, links) => {\n  e.preventDefault();\n  const getFormatedHrefElements = getSelectionFormated(padInner, links);\n\n  e.originalEvent.clipboardData.setData('text/html', getFormatedHrefElements.outerHTML);\n\n  // if it is a cut event we have to remove the selection\n  if (removeSelection) {\n    padInner.contents()[0].execCommand('delete');\n  }\n};\n\nconst makeClipboarRedyForSaveLinks = (e, padInner) => {\n  const clipboardData = e.originalEvent.clipboardData;\n  const pastedDataHtml = clipboardData.getData('text/html');\n  const range = padInner.contents()[0].getSelection().getRangeAt(0);\n\n  if (!range) return false;\n\n  e.preventDefault();\n  const pastedHtmlHolderElemenet = document.createElement('div');\n  pastedHtmlHolderElemenet.innerHTML = pastedDataHtml;\n  const allLinksElement = pastedHtmlHolderElemenet.getElementsByTagName('a');\n  const allLinksData = {};\n\n  for (const element of allLinksElement) {\n    const tempHyperLink = element.href;\n    const tempHyperLinkText = element.innerHTML;\n    const newLinkId = shared.generateLinkId();\n    element.className = newLinkId;\n    element.id = newLinkId;\n    allLinksData[newLinkId] = {\n      data: {\n        author: 'empty',\n        linkId: newLinkId,\n        timestamp: new Date().getTime(),\n        text: tempHyperLinkText,\n        originalLinkId: newLinkId,\n        hyperlink: tempHyperLink,\n        headerId: null,\n        date: new Date(),\n        formattedDate: new Date(),\n      },\n    };\n  }\n\n  pad.plugins.ep_full_hyperlinks.saveLinkWithoutSelection(\n    clientVars.padId,\n    allLinksData\n  );\n\n  padInner\n    .contents()[0]\n    .execCommand(\n      'insertHTML',\n      false,\n      $('<div>').append($(pastedHtmlHolderElemenet).clone()).html()\n    );\n};\n\nconst saveLinks = (e, padInner) => {\n  makeClipboarRedyForSaveLinks(e, padInner);\n};\n\nexport {\n  addTextOnClipboard,\n  saveLinks,\n}\n","'use strict';\n\nimport _, { map } from 'underscore';\n// TODO: replace with local storage\n// import {padcookie} from 'ep_etherpad-lite/static/js/pad_cookie'\n\nimport * as linkBoxes from \"./linkBoxes\"\nimport * as newLink from \"./newLink\"\nimport * as preLinkMark from \"./preLinkMark\"\nimport * as events from \"./copyPasteEvents\"\nimport * as shared from \"./shared\"\n\nconst browser = require('ep_etherpad-lite/static/js/browser');\nconst cssFiles = ['ep_full_hyperlinks/static/css/link.css'];\n\n/** **********************************************************************/\n/*                         epLinks Plugin                           */\n/** **********************************************************************/\n\n// Container\nfunction epLinks(context) {\n  this.container = null;\n  this.padOuter = null;\n  this.padInner = null;\n  this.ace = context.ace;\n\n  // Required for instances running on weird ports\n  // This probably needs some work for instances running on root or not on /p/\n  const loc = document.location;\n  const port = loc.port === '' ? (loc.protocol === 'https:' ? 443 : 80) : loc.port;\n  const url = `${loc.protocol}//${loc.hostname}:${port}/link`;\n\n  this.padId = clientVars.padId;\n  this.socket = io.connect(url, {\n    query: `padId=${this.padId}`,\n  });\n\n  this.padId = clientVars.padId;\n  this.links = [];\n  this.mapFakeLinks = [];\n  this.mapOriginalLinksId = [];\n  this.init();\n  this.preLinkMarker = preLinkMark.init(this.ace);\n}\n\n// Init Etherpad plugin link pads\nepLinks.prototype.init = async function () {\n  const self = this;\n  const ace = this.ace;\n\n  // Init prerequisite\n  this.findContainers();\n  this.insertContainers(); // Insert link containers in sidebar\n\n  const links = await this.getLinks();\n  if (!$.isEmptyObject(links)) {\n    this.setLinks(links);\n  }\n\n  this.linkListen();\n\n  // Init add push event\n  this.pushLink('add', (linkId, link) => {\n    this.setLink(linkId, link);\n  });\n\n\n  // On click link icon toolbar\n  $('.addLink').on('click touchstart', (e) => {\n    e.preventDefault(); // stops focus from being lost\n    this.displayNewLinkForm();\n  });\n\n  const submitEditeLink = async function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    const $linkBox = $(this).closest('.link-container');\n    const $linkForm = $(this).closest('.link-edit-form');\n    const linkId = $linkBox.data('linkid');\n    const linkText = $linkForm.find('#hyperlink-text').val();\n    let hyperlink = $linkForm.find('#hyperlink-url').val();\n    const oldLinkText = $linkForm.find('#hyperlink-text-hidden').val();\n    $linkForm.find('.link-text-text-old').val(linkText);\n    const padOuter = $('iframe[name=\"ace_outer\"]').contents();\n    const padInner = padOuter.find('iframe[name=\"ace_inner\"]');\n    const selector = `.${linkId}`;\n    const ace = self.ace;\n    ace.callWithAce((aceTop) => {\n      const repArr = aceTop.ace_getRepFromSelector(selector, padInner);\n      if (oldLinkText !== linkText) {\n        aceTop.ace_replaceRange(repArr[0][0], repArr[0][1], linkText);\n        if (oldLinkText.length > linkText.length) {\n          repArr[0][1][1] -= oldLinkText.length - linkText.length;\n        } else if (oldLinkText.length < linkText.length) {\n          repArr[0][1][1] += linkText.length - oldLinkText.length;\n        }\n      }\n      ace.callWithAce((ace) => {\n        ace.ace_performSelectionChange(repArr[0][0], repArr[0][1], true);\n        ace.ace_setAttributeOnSelection('link', linkId);\n\n        // Note that this is the correct way of doing it, instead of there being\n        // a linkId we now flag it as \"link-deleted\"\n      });\n    }, 'editLinkedSelection', true);\n\n\n    if (!(/^http:\\/\\//.test(hyperlink)) && !(/^https:\\/\\//.test(hyperlink))) {\n      hyperlink = `http://${hyperlink}`;\n    }\n    const data = {};\n    data.linkId = linkId;\n    data.padId = clientVars.padId;\n    data.linkText = linkText;\n    data.oldLinkText = oldLinkText;\n    data.hyperlink = hyperlink;\n\n    try {\n      await self._send('updateLinkText', data);\n    } catch (err) {\n      if (err.message !== 'unauth') throw err; // Let the uncaught error handler handle it.\n      // $.gritter.add({\n      //   title: 'Error',\n      //   text: 'You cannot edit other users links!',\n      //   class_name: 'error',\n      // });\n      return;\n    }\n\n    $linkBox.removeClass('editing');\n    self.updateLinkBoxText(linkId, linkText, hyperlink);\n    linkBoxes.hideLink(linkId);\n\n    // reverting modal to show because we change it to edit mode\n    self.padOuter.find(`#show-form-${linkId}`).show();\n    self.padOuter.find(`#edit-form-${linkId}`).hide();\n    $linkBox.attr({'data-loaded': false});\n    // although the link was saved on the data base successfully, it needs\n    // to update the link variable with the new text saved\n    self.setLinkNewText(linkId, linkText, hyperlink);\n  };\n\n  // submit the edition on the text and update the link text\n  this.container.parent().on('submit', 'form.link-edit-form', submitEditeLink);\n\n  this.container.on('click', '#link-cancel-btn', function () {\n    const linkId = $(this).closest('.link-container')[0].id;\n    self.padOuter.find(`#show-form-${linkId}`).show();\n    self.padOuter.find(`#edit-form-${linkId}`).hide();\n    linkBoxes.hideLink(linkId);\n  });\n\n  const scrollToFixEditFormInViewport = (linkId) => {\n    const $outerdoc = $('iframe[name=\"ace_outer\"]').contents().find('#outerdocbody');\n    const $outerdocHTML = $outerdoc.parent();\n    const mainHeder = $('#mainHeader').innerHeight();\n    const offsetTop = self.padOuter.find(`#edit-form-${linkId}`).closest('.link-container').offset().top - mainHeder - 25;\n    $outerdocHTML.animate({scrollTop: offsetTop});\n  };\n\n  this.container.parent().on('click', '.ep_hyperlink_docs_bubble_button_edit', function (e) {\n    const linkId = $(this).closest('.link-container')[0].id;\n    self.padOuter.find(`#show-form-${linkId}`).hide();\n    self.padOuter.find(`#edit-form-${linkId}`).show();\n    self.padOuter.find(`#edit-form-${linkId}`)\n        .find('#hyperlink-text')\n        .focus(function () {\n          this.setSelectionRange(this.value.length, this.value.length);\n        }).select();\n\n    if (clientVars.userAgent.isMobile) scrollToFixEditFormInViewport(linkId);\n  });\n\n  this.container.parent().on('click', '.ep_hyperlink_docs_bubble_button_copy', function (e) {\n    const dummy = document.createElement('input');\n    document.body.appendChild(dummy);\n    dummy.value = this.getAttribute('data-hyperlink');\n    dummy.select();\n    document.execCommand('copy');\n    document.body.removeChild(dummy);\n    $.gritter.add({\n      text: 'Link copied to clipboard',\n    });\n    const linkId = $(this).closest('.link-container')[0].id;\n    linkBoxes.hideLink(linkId);\n  });\n\n  this.container.parent().on('click', '.ep_hyperlink_docs_bubble_button_delete', async function () {\n    const linkId = $(this).closest('.link-container')[0].id;\n    self.deleteLink(linkId);\n    const padOuter = $('iframe[name=\"ace_outer\"]').contents();\n    const padInner = padOuter.find('iframe[name=\"ace_inner\"]');\n    const selector = `.${linkId}`;\n    const ace = self.ace;\n    ace.callWithAce((aceTop) => {\n      const repArr = aceTop.ace_getRepFromSelector(selector, padInner);\n      // rep is an array of reps..  I will need to iterate over each to do something meaningful..\n      $.each(repArr, (index, rep) => {\n        // I don't think we need this nested call\n        ace.callWithAce((ace) => {\n          ace.ace_performSelectionChange(rep[0], rep[1], true);\n          ace.ace_setAttributeOnSelection('link', 'link-deleted');\n          // Note that this is the correct way of doing it, instead of there being\n          // a linkId we now flag it as \"link-deleted\"\n        });\n      });\n    }, 'deleteLinkedSelection', true);\n    // dispatch event\n    try {\n      await self._send('deleteLink', {\n        padId: self.padId,\n        linkId,\n        authorId: clientVars.userId,\n      });\n    } catch (err) {\n      if (err.message !== 'unauth') throw err; // Let the uncaught error handler handle it.\n      // $.gritter.add({\n      //   title: 'Error',\n      //   text: 'You cannot delete other users links!',\n      //   class_name: 'error',\n      // });\n      return;\n    }\n  });\n\n  let hideLinkTimer;\n  this.container.on('mouseover', '.sidebar-link', (e) => {\n    // highlight link\n    clearTimeout(hideLinkTimer);\n  }).on('mouseout', '.sidebar-link', (e) => {\n    // do not hide directly the link, because sometime the mouse get out accidently\n    hideLinkTimer = setTimeout(() => {\n      const linkId = e.currentTarget.id;\n      linkBoxes.hideLink(linkId);\n    }, 3000);\n  });\n\n  this.padInner.contents().on('click', '.link', (event) => {\n    event.preventDefault();\n    clearTimeout(hideLinkTimer);\n    const linkId = self.linkIdOf(event);\n    fetch(`/pluginfw/hyperlink/${clientVars.padId}/links/${linkId}`)\n        .then((res) => res.json())\n        .then((res) => {\n          const linkObj = {...res.link, linkId};\n          linkBoxes.showLinkModal(event, linkObj, self.socket);\n        });\n  });\n\n  this.container.parent()\n      .on('click', 'a.ep_hyperlink_title', linkBoxes.internalLinkClick);\n\n\n  this.addListenersToCloseOpenedLink();\n\n  // Enable and handle cookies\n  // if (padcookie.getPref('links') === false) {\n  //   self.padOuter.find('#links').removeClass('active');\n  //   $('#options-links').attr('checked', 'unchecked');\n  //   $('#options-links').attr('checked', false);\n  // } else {\n  //   $('#options-links').attr('checked', 'checked');\n  // }\n\n  // $('#options-links').on('change', () => {\n  //   if ($('#options-links').is(':checked')) {\n  //     enableLinks();\n  //   } else {\n  //     disableLinks();\n  //   }\n  // });\n\n  // function enableLinks() {\n  //   padcookie.setPref('links', true);\n  //   self.padOuter.find('#links').addClass('active');\n  //   $('body').addClass('links-active');\n  //   $('iframe[name=\"ace_outer\"]').contents().find('body').addClass('links-active');\n  // }\n\n  // function disableLinks() {\n  //   padcookie.setPref('links', false);\n  //   self.padOuter.find('#links').removeClass('active');\n  //   $('body').removeClass('links-active');\n  //   $('iframe[name=\"ace_outer\"]').contents().find('body').removeClass('links-active');\n  // }\n\n  // Check to see if we should show already..\n  $('#options-links').trigger('change');\n\n\n  self.padInner.contents().on('copy', (e) => {\n    events.addTextOnClipboard(e, self.padInner, false, self.links);\n  });\n\n  self.padInner.contents().on('cut', (e) => {\n    events.addTextOnClipboard(e, self.padInner, true, self.links);\n  });\n\n  self.padInner.contents().on('paste', (e) => {\n    events.saveLinks(e, self.padInner);\n  });\n};\n\nepLinks.prototype.linkListen = function () {\n  const socket = this.socket;\n  socket.on('pushAddLinkInBulk', async () => {\n    const allLinks = await this.getLinks();\n    if (!$.isEmptyObject(allLinks)) {\n      // we get the Links in this format {c-123:{author:...}, c-124:{author:...}}\n      // but it's expected to be {c-123: {data: {author:...}}, c-124:{data:{author:...}}}\n      // in this.Links\n\n      const LinksProcessed = {};\n      _.map(allLinks, (link, linkId) => {\n        LinksProcessed[linkId] = {};\n        LinksProcessed[linkId].data = link;\n      });\n      this.Links = LinksProcessed;\n    }\n  });\n};\n\n// Insert links container on element use for linenumbers\nepLinks.prototype.findContainers = function () {\n  const padOuter = $('iframe[name=\"ace_outer\"]').contents();\n  this.padOuter = padOuter;\n  this.padInner = padOuter.find('iframe[name=\"ace_inner\"]');\n  this.outerBody = padOuter.find('#outerdocbody');\n};\n\n// set the text of the link\nepLinks.prototype.setLinkNewText = function (linkId, text, hyperlink) {\n  if (this.links[linkId]) {\n    this.links[linkId].data.text = text;\n    this.links[linkId].data.hyperlink = hyperlink;\n  } else if (this.linkReplies[linkId]) {\n    this.linkReplies[linkId].text = text;\n    this.linkReplies[linkId].hyperlink = hyperlink;\n  }\n};\n\nepLinks.prototype.addListenersToCloseOpenedLink = function () {\n  const self = this;\n\n  // we need to add listeners to the different iframes of the page\n  $(document).on('touchstart click', (e) => {\n    self.closeOpenedLinkIfNotOnSelectedElements(e);\n  });\n  this.padOuter.find('html').on('touchstart click', (e) => {\n    self.closeOpenedLinkIfNotOnSelectedElements(e);\n  });\n  this.padInner.contents().find('html').on('touchstart click', (e) => {\n    self.closeOpenedLinkIfNotOnSelectedElements(e);\n  });\n};\n\n// Close link that is opened\nepLinks.prototype.closeOpenedLink = function (e) {\n  // var linkId = this.linkIdOf(e);\n  // linkBoxes.hideLink(linkId);\n  // it was using like above but I decide check hideAllLink\n  linkBoxes.hideAllLinks();\n};\n\n// Close link if event target was outside of link or on a link icon\nepLinks.prototype.closeOpenedLinkIfNotOnSelectedElements = function (e) {\n  // Don't do anything if clicked on the allowed elements:\n  // any of the link icons\n  if (linkBoxes.shouldNotCloseLink(e)) { // a link box or the link modal\n    return;\n  }\n  // All clear, can close the link\n  this.closeOpenedLink(e);\n};\n\nepLinks.prototype.linkIdOf = function (e) {\n  const cls = e.currentTarget.classList;\n  const classLinkId = /(?:^| )(lc-[A-Za-z0-9]*)/.exec(cls);\n\n  return (classLinkId) ? classLinkId[1] : null;\n};\n\n// Insert link container in sidebar\nepLinks.prototype.insertContainers = function () {\n  const linkBoxWrapper = $('iframe[name=\"ace_outer\"]').contents()\n      .find('#outerdocbody')\n      .prepend('<div id=\"linkBoxWrapper\"></div>');\n\n  this.container = linkBoxWrapper;\n};\n\n// Set links content data\nepLinks.prototype.setLinks = function (links) {\n  for (const linkId in links) {\n    this.setLink(linkId, links[linkId]);\n  }\n};\n\n// Set link data\nepLinks.prototype.setLink = function (linkId, link) {\n  const links = this.links;\n  // link.date = timeFormat.prettyDate(link.timestamp);\n  link.formattedDate = new Date(link.timestamp).toISOString();\n\n  if (links[linkId] == null) links[linkId] = {};\n  links[linkId].data = link;\n};\n\n// set the text of the link\nepLinks.prototype.setLinkNewText = function (linkId, text, hyperlink) {\n  if (!this.links[linkId]) return;\n  this.links[linkId].data.text = text;\n  this.links[linkId].data.hyperlink = hyperlink;\n};\n\n// Get all links\nepLinks.prototype.getLinks = async function () {\n  return (await this._send('getLinks', {padId: this.padId})).links;\n};\n\nepLinks.prototype.getLinkData = function () {\n  const data = {};\n\n  // Insert link data\n  data.padId = this.padId;\n  data.link = {};\n  data.link.author = clientVars.userId;\n  data.link.name = pad.myUserInfo.name;\n  data.link.timestamp = new Date().getTime();\n\n  // If client is anonymous\n  if (data.link.name === undefined) {\n    data.link.name = clientVars.userAgent;\n  }\n\n  return data;\n};\n\n// Delete a pad link\nepLinks.prototype.deleteLink = function (linkId) {\n  $('iframe[name=\"ace_outer\"]').contents().find(`#${linkId}`).remove();\n};\n\n// start modal of new link\nepLinks.prototype.displayNewLinkForm = function () {\n  const self = this;\n  const rep = {};\n  const ace = this.ace;\n  ace.callWithAce((ace) => {\n    const saveRep = ace.ace_getRep();\n    rep.lines = saveRep.lines;\n    rep.selStart = saveRep.selStart;\n    rep.selEnd = saveRep.selEnd;\n  }, 'saveLinkedSelection', true);\n\n  const selectedText = self.getSelectedText(rep);\n\n  // we have nothing selected, do nothing\n  const noTextSelected = (selectedText.length === 0);\n  if (noTextSelected) {\n    $.gritter.add({text: 'Please first select the text to link'});\n    return;\n  }\n\n  self.createNewLinkFormIfDontExist(rep);\n\n  // Display form\n  newLink.showNewLinkPopup();\n\n  // Check if the first element selected is visible in the viewport\n  const $firstSelectedElement = self.getFirstElementSelected();\n  const firstSelectedElementInViewport = self.isElementInViewport($firstSelectedElement);\n\n  if (!firstSelectedElementInViewport) {\n    self.scrollViewportIfSelectedTextIsNotVisible($firstSelectedElement);\n  }\n\n  // add selected text to form\n  $('#newLink').find('#hyperlink-text').val(selectedText);\n  $('#newLink').find('#hyperlink-text-hidden').val(selectedText);\n};\n\nepLinks.prototype.scrollViewportIfSelectedTextIsNotVisible = function ($firstSelectedElement) {\n  // Set the top of the form to be the same Y as the target Rep\n  const y = $firstSelectedElement.offsetTop;\n  const padOuter = $('iframe[name=\"ace_outer\"]').contents();\n  padOuter.find('#outerdocbody').scrollTop(y); // Works in Chrome\n  padOuter.find('#outerdocbody').parent().scrollTop(y); // Works in Firefox\n};\n\nepLinks.prototype.isElementInViewport = function (element) {\n  const elementPosition = element.getBoundingClientRect();\n  const scrollTopFirefox = $('iframe[name=\"ace_outer\"]').contents().find('#outerdocbody').parent().scrollTop(); // works only on firefox\n  const scrolltop = $('iframe[name=\"ace_outer\"]').contents().find('#outerdocbody').scrollTop() || scrollTopFirefox;\n  // position relative to the current viewport\n  const elementPositionTopOnViewport = elementPosition.top - scrolltop;\n  const elementPositionBottomOnViewport = elementPosition.bottom - scrolltop;\n\n  const $ace_outer = $('iframe[name=\"ace_outer\"]');\n  const ace_outerHeight = $ace_outer.height();\n  const ace_outerPaddingTop = this.getIntValueOfCSSProperty($ace_outer, 'padding-top');\n\n  const clientHeight = ace_outerHeight - ace_outerPaddingTop;\n\n  const elementAboveViewportTop = elementPositionTopOnViewport < 0;\n  const elementBelowViewportBottom = elementPositionBottomOnViewport > clientHeight;\n\n  return !(elementAboveViewportTop || elementBelowViewportBottom);\n};\n\nepLinks.prototype.getIntValueOfCSSProperty = function ($element, property) {\n  const valueString = $element.css(property);\n  return parseInt(valueString) || 0;\n};\n\nepLinks.prototype.getFirstElementSelected = function () {\n  let element;\n\n  this.ace.callWithAce((ace) => {\n    const rep = ace.ace_getRep();\n    const line = rep.lines.atIndex(rep.selStart[0]);\n    const key = `#${line.key}`;\n    const padOuter = $('iframe[name=\"ace_outer\"]').contents();\n    const padInner = padOuter.find('iframe[name=\"ace_inner\"]').contents();\n    element = padInner.find(key);\n  }, 'getFirstElementSelected', true);\n\n  return element[0];\n};\n\n// Indicates if user selected some text on editor\nepLinks.prototype.checkNoTextSelected = function (rep) {\n  const noTextSelected = ((rep.selStart[0] == rep.selEnd[0]) && (rep.selStart[1] == rep.selEnd[1]));\n\n  return noTextSelected;\n};\n\n// Create form to add link\nepLinks.prototype.createNewLinkFormIfDontExist = function (rep) {\n  const data = this.getLinkData();\n  const self = this;\n\n  // If a new link box doesn't already exist, create one\n  newLink.insertNewLinkPopupIfDontExist(data, (link, index) => {\n    data.link.oldText = link.oldText;\n    data.link.text = link.text;\n    data.link.hyperlink = link.hyperlink;\n    self.saveLink(data, rep);\n  });\n};\n\n// Get a string representation of the text selected on the editor\nepLinks.prototype.getSelectedText = function (rep) {\n  const self = this;\n  const firstLine = rep.selStart[0];\n  const lastLine = self.getLastLine(firstLine, rep);\n  let selectedText = '';\n\n  _(_.range(firstLine, lastLine + 1)).each((lineNumber) => {\n    // rep looks like -- starts at line 2, character 1, ends at line 4 char 1\n    /*\n     {\n        rep.selStart[2,0],\n        rep.selEnd[4,2]\n     }\n     */\n    const line = rep.lines.atIndex(lineNumber);\n    // If we span over multiple lines\n    if (rep.selStart[0] === lineNumber) {\n      // Is this the first line?\n      if (rep.selStart[1] > 0) {\n        var posStart = rep.selStart[1];\n      } else {\n        var posStart = 0;\n      }\n    }\n    if (rep.selEnd[0] === lineNumber) {\n      if (rep.selEnd[1] <= line.text.length) {\n        var posEnd = rep.selEnd[1];\n      } else {\n        var posEnd = 0;\n      }\n    }\n    let lineText = line.text.substring(posStart, posEnd);\n    // When it has a selection with more than one line we select at least the beginning\n    // of the next line after the first line. As it is not possible to select the beginning\n    // of the first line, we skip it.\n    if (lineNumber > firstLine) {\n      // if the selection takes the very beginning of line, and the element has a lineMarker,\n      // it means we select the * as well, so we need to clean it from the text selected\n      lineText = self.cleanLine(line, lineText);\n      lineText = `\\n${lineText}`;\n    }\n    selectedText += lineText;\n  });\n  return selectedText;\n};\n\nepLinks.prototype.getLastLine = function (firstLine, rep) {\n  let lastLineSelected = rep.selEnd[0];\n\n  if (lastLineSelected > firstLine) {\n    // Ignore last line if the selected text of it it is empty\n    if (this.lastLineSelectedIsEmpty(rep, lastLineSelected)) {\n      lastLineSelected--;\n    }\n  }\n  return lastLineSelected;\n};\n\nepLinks.prototype.lastLineSelectedIsEmpty = function (rep, lastLineSelected) {\n  const line = rep.lines.atIndex(lastLineSelected);\n  // when we've a line with line attribute, the first char line position\n  // in a line is 1 because of the *, otherwise is 0\n  const firstCharLinePosition = this.lineHasMarker(line) ? 1 : 0;\n  const lastColumnSelected = rep.selEnd[1];\n\n  return lastColumnSelected === firstCharLinePosition;\n};\n\nepLinks.prototype.lineHasMarker = function (line) {\n  return line.lineMarker === 1;\n};\n\nepLinks.prototype.cleanLine = function (line, lineText) {\n  const hasALineMarker = this.lineHasMarker(line);\n  if (hasALineMarker) {\n    lineText = lineText.substring(1);\n  }\n  return lineText;\n};\n\n// Save link\nepLinks.prototype.saveLink = async function (data, rep) {\n  const res = await this._send('addLink', data);\n  if (res == null) return;\n  const [linkId, link] = res;\n  link.linkId = linkId;\n\n  this.ace.callWithAce((ace) => {\n    // we should get rep again because the document might have changed..\n    rep = ace.ace_getRep();\n    ace.ace_performSelectionChange(rep.selStart, rep.selEnd, true);\n    ace.ace_setAttributeOnSelection('link', linkId);\n  }, 'insertLink', true);\n\n  this.setLink(linkId, link);\n};\n\n\n// linkData = {c-newlinkId123: data:{author:..., date:..., ...},\n//                c-newlinkId124: data:{...}}\nepLinks.prototype.saveLinkWithoutSelection = async function (padId, linkData) {\n  const data = this.buildLinks(linkData);\n  const links = await this._send('bulkAddLink', padId, data);\n  this.setLinks(links);\n};\n\nepLinks.prototype.buildLinks = function (linksData) {\n  const links =\n    _.map(linksData, (linkData, linkId) => this.buildLink(linkId, linkData.data));\n  return links;\n};\n\n\n// linkData = {c-newLinkId123: data:{author:..., date:..., ...}, ...\nepLinks.prototype.buildLink = function (linkId, linkData) {\n  const data = {};\n  data.padId = this.padId;\n  data.linkId = linkId;\n  data.text = linkData.text;\n  data.hyperlink = linkData.hyperlink;\n  data.changeTo = linkData.changeTo;\n  data.changeFrom = linkData.changeFrom;\n  data.name = linkData.name;\n  data.timestamp = parseInt(linkData.timestamp);\n\n  return data;\n};\n\n\nepLinks.prototype._send = async function (type, ...args) {\n  return await new Promise((resolve, reject) => {\n    this.socket.emit(type, ...args, (errj, val) => {\n      if (errj != null) return reject(Object.assign(new Error(errj.message), {name: errj.name}));\n      resolve(val);\n    });\n  });\n};\n\nepLinks.prototype.getMapfakeLinks = function () {\n  return this.mapFakeLinks;\n};\n\nepLinks.prototype.findLinkText = function ($linkBox) {\n  return $linkBox.find('.compact-display-content .link-text-text, .full-display-link .link-title-wrapper .link-text-text');\n};\n\nepLinks.prototype.findHyperLinkText = function ($linkBox) {\n  return $linkBox.find('.compact-display-content .link-text-hyperlink, .full-display-link .link-title-wrapper .link-text-hyperlink');\n};\n\nepLinks.prototype.updateLinkBoxText = function (linkId, linkText, hyperlink) {\n  const $link = this.container.parent().find(`[data-linkid='${linkId}']`);\n  $link.attr('data-hyperlink', hyperlink);\n\n  const textBox = this.findLinkText($link);\n  // textBox.text(linkText)\n  textBox.val(linkText);\n\n  const linkBox = this.findHyperLinkText($link);\n  // linkBox.text(hyperlink)\n  linkBox.val(hyperlink);\n};\n\nepLinks.prototype.showChangeAsAccepted = function (linkId) {\n  const self = this;\n\n  // Get the link\n  const link = this.container.parent().find(`[data-linkid='${linkId}']`);\n  // Revert other link that have already been accepted\n  link.closest('.sidebar-link')\n      .find('.link-container.change-accepted').addBack('.change-accepted')\n      .each(function () {\n        $(this).removeClass('change-accepted');\n        const data = {linkId: $(this).attr('data-linkid'), padId: self.padId};\n        self._send('revertChange', data);\n      });\n\n  // this link get accepted\n  link.addClass('change-accepted');\n};\n\n\nepLinks.prototype.showChangeAsReverted = function (linkId) {\n  const self = this;\n  // Get the link\n  const link = self.container.parent().find(`[data-linkid='${linkId}']`);\n  link.removeClass('change-accepted');\n};\n\n// Push link from collaborators\nepLinks.prototype.pushLink = function (eventType, callback) {\n  const socket = this.socket;\n  const self = this;\n\n  socket.on('textLinkUpdated', (linkId, linkText, hyperlink) => {\n    self.updateLinkBoxText(linkId, linkText, hyperlink);\n  });\n\n  socket.on('linkDeleted', (linkId) => {\n    self.deleteLink(linkId);\n  });\n\n  socket.on('changeAccepted', (linkId) => {\n    self.showChangeAsAccepted(linkId);\n  });\n\n  socket.on('changeReverted', (linkId) => {\n    self.showChangeAsReverted(linkId);\n  });\n\n  // On collaborator add a link in the current pad\n  if (eventType === 'add') {\n    socket.on('pushAddLink', (linkId, link) => {\n      callback(linkId, link);\n    });\n  }\n};\n\n/** **********************************************************************/\n/*                           Etherpad Hooks                             */\n/** **********************************************************************/\n\nvar hooks = {\n\n  // Init pad links\n  postAceInit: (hook, context) => {\n    if (!pad.plugins) pad.plugins = {};\n    const Links = new epLinks(context);\n    pad.plugins.ep_full_hyperlinks = Links;\n\n    if (!$('#editorcontainerbox').hasClass('flex-layout')) {\n      $.gritter.add({\n        title: 'Error',\n        text: 'ep_full_hyperlinks: Please upgrade to etherpad 1.8.3 for this plugin to work correctly',\n        sticky: true,\n        class_name: 'error',\n      });\n    }\n    return [];\n  },\n\n  aceEditEvent: (hook, context) => {\n    if (!pad.plugins) pad.plugins = {};\n    // first check if some text is being marked/unmarked to add link to it\n    const eventType = context.callstack.editEvent.eventType;\n\n    if (eventType == 'setup' || eventType == 'setBaseText' || eventType == 'importText') return;\n\n    if (eventType === 'unmarkPreSelectedTextToLink') {\n      pad.plugins.ep_full_hyperlinks.preLinkMarker.handleUnmarkText(context);\n    } else if (eventType === 'markPreSelectedTextToLink') {\n      pad.plugins.ep_full_hyperlinks.preLinkMarker.handleMarkText(context);\n    }\n\n    return [];\n  },\n\n  // Insert links classes\n  aceAttribsToClasses: (hook, context, cb) => {\n    if (context.key === 'link' && context.value !== 'link-deleted') {\n      return ['link', context.value];\n    }\n    // only read marks made by current user\n    if (context.key === preLinkMark.MARK_CLASS && context.value === clientVars.userId) {\n      return [preLinkMark.MARK_CLASS, context.value];\n    }\n    return [];\n  },\n\n  aceEditorCSS: (hookName, context, cb) => cssFiles,\n};\n\n// Given a CSS selector and a target element (in this case pad inner)\n// return the rep as an array of array of tuples IE [[[0,1],[0,2]], [[1,3],[1,5]]]\n// We have to return an array of a array of tuples because there can be multiple reps\n// For a given selector\n// A more sane data structure might be an object such as..\n/*\n0:{\n  xStart: 0,\n  xEnd: 1,\n  yStart: 0,\n  yEnd: 1\n},\n1:...\n*/\n// Alas we follow the Etherpad convention of using tuples here.\nfunction getRepFromSelector(selector, container) {\n  const attributeManager = this.documentAttributeManager;\n\n  const repArr = [];\n\n  // first find the element\n  const elements = container.contents().find(selector);\n  // One might expect this to be a rep for the entire document\n  // However what we actually need to do is find each selection that includes\n  // this link and remove it.  This is because content can be pasted\n  // Mid link which would mean a remove selection could have unexpected consequences\n\n  $.each(elements, (index, span) => {\n    // create a rep array container we can push to..\n    const rep = [[], []];\n\n    // span not be the div so we have to go to parents until we find a div\n    const parentDiv = $(span).closest('div');\n    // line Number is obviously relative to entire document\n    // So find out how many elements before in this parent?\n    const lineNumber = $(parentDiv).prevAll('div').length;\n    // We can set beginning of rep Y (lineNumber)\n    rep[0][0] = lineNumber;\n\n    // We can also update the end rep Y\n    rep[1][0] = lineNumber;\n\n    // Given the link span, how many characters are before it?\n\n    // All we need to know is the number of characters before .foo\n    /*\n\n    <div id=\"boo\">\n      hello\n      <span class='nope'>\n        world\n      </span>\n      are you\n      <span class='foo'>\n        here?\n      </span>\n    </div>\n\n    */\n    // In the example before the correct number would be 21\n    // I guess we could do prevAll each length?\n    // If there are no spans before we get 0, simples!\n    // Note that this only works if spans are being used, which imho\n    // Is the correct container however if block elements are registered\n    // It's plausable that attributes are not maintained :(\n    let leftOffset = 0;\n\n    // If the line has a lineAttribute then leftOffset should be +1\n    // Get each line Attribute on this line..\n    let hasLineAttribute = false;\n    const attrArr = attributeManager.getAttributesOnLine(lineNumber);\n    $.each(attrArr, (attrK, value) => {\n      if (value[0] === 'lmkr') hasLineAttribute = true;\n    });\n    if (hasLineAttribute) leftOffset++;\n\n    $(span).prevAll('span').each(function () {\n      const spanOffset = $(this).text().length;\n      leftOffset += spanOffset;\n    });\n    rep[0][1] = leftOffset;\n\n    // All we need to know is span text length and it's left offset in chars\n    const spanLength = $(span).text().length;\n\n    rep[1][1] = rep[0][1] + $(span).text().length; // Easy!\n    repArr.push(rep);\n  });\n  return repArr;\n}\n// Once ace is initialized, we set ace_doInsertHeading and bind it to the context\nexport const aceInitialized = function (hook, context) {\n  const editorInfo = context.editorInfo;\n  editorInfo.ace_getRepFromSelector = _(getRepFromSelector).bind(context);\n};\n\nexport const acePostWriteDomLineHTML = function (name, context) {\n  const hasHyperlink = $(context.node).find('a');\n  if (hasHyperlink.length > 0) {\n    hasHyperlink.each(function () {\n      $(this).on('click', linkBoxes.internalLinkClick);\n    });\n  }\n};\n\nexport const aceEditorCSS = hooks.aceEditorCSS;\nexport const postAceInit = hooks.postAceInit;\nexport const aceAttribsToClasses = hooks.aceAttribsToClasses;\nexport const aceEditEvent = hooks.aceEditEvent;\nexport const collectContentPre = shared.collectContentPre;\n","'use strict';\n\n\nconst collectContentPre = (hook, context) => {\n  const link = /(?:^| )(lc-[A-Za-z0-9]*)/.exec(context.cls);\n  const fakeLink = /(?:^| )(fakelink-[A-Za-z0-9]*)/.exec(context.cls);\n\n  if (link && link[1]) {\n    context.cc.doAttrib(context.state, `link::${ link[1] }`);\n  }\n\n  // a fake link is a link copied from this or another pad. To avoid conflicts\n  // with existing links, a fake linkId is used, so then we generate a new one\n  // when the link is saved\n  if (fakeLink) {\n    const mapFakeLinks = pad.plugins.ep_full_hyperlinks.getMapfakeLinks();\n    const fakeLinkId = fakeLink[1];\n    const linkId = mapFakeLinks[fakeLinkId];\n    context.cc.doAttrib(context.state, `link::${ linkId }`);\n  }\n\n  return [];\n};\n\nconst generateLinkId = () => `lc-${ randomString(16) }`;\n\n\nexport {\n  collectContentPre,\n  generateLinkId,\n}\n"],"names":["root","self","_typeof","global","Function","ArrayProto","Array","prototype","ObjProto","Object","SymbolProto","Symbol","push","slice","toString","hasOwnProperty","supportsArrayBuffer","ArrayBuffer","supportsDataView","DataView","nativeIsArray","isArray","nativeKeys","keys","nativeCreate","create","nativeIsView","isView","_isNaN","isNaN","_isFinite","isFinite","hasEnumBug","propertyIsEnumerable","nonEnumerableProps","MAX_ARRAY_INDEX","Math","pow","restArguments","func","startIndex","length","max","arguments","rest","index","call","this","args","apply","isObject","obj","type","isUndefined","isBoolean","tagTester","name","tag","isString","isNumber","isArrayBuffer","isFunction","nodelist","document","childNodes","Int8Array","isFunction$1","hasObjectTag","hasStringTagBug","isIE11","Map","isDataView","isDataView$1","getInt8","buffer","has","key","isArguments","isArguments$1","constant","value","createSizePropertyCheck","getSizeProperty","collection","sizeProperty","shallowProperty","getByteLength","typedArrayPattern","isTypedArray$1","isBufferLike","test","collectNonEnumProps","hash","l","i","contains","emulatedSet","nonEnumIdx","constructor","proto","prop","isMatch","object","attrs","_keys","_","_wrapped","toBufferView","bufferSource","Uint8Array","byteOffset","VERSION","valueOf","toJSON","String","eq","a","b","aStack","bStack","deepEq","className","areArrays","isTypedArray","aCtor","bCtor","pop","allKeys","ie11fingerprint","methods","getLength","weakMapMethods","forEachName","commonInit","mapTail","mapMethods","concat","setMethods","isWeakMap","isSet","isWeakSet","values","invert","result","functions","names","sort","createAssigner","keysFunc","defaults","source","extendOwn","baseCreate","Ctor","toPath","path","deepGet","get","defaultValue","identity","matcher","property","optimizeCb","context","argCount","accumulator","baseIteratee","iteratee","Infinity","cb","noop","random","min","floor","now","Date","getTime","createEscaper","map","escaper","match","join","testRegexp","RegExp","replaceRegexp","string","replace","escapeMap","unescape","templateSettings","evaluate","interpolate","escape","noMatch","escapes","escapeRegExp","escapeChar","bareIdentifier","idCounter","executeBound","sourceFunc","boundFunc","callingContext","partial","boundArgs","placeholder","bound","position","TypeError","callArgs","isArrayLike","flatten","input","depth","strict","output","idx","j","len","bindAll","Error","bind","wait","setTimeout","delay","negate","predicate","before","times","memo","once","findKey","createPredicateIndexFinder","dir","array","sortedIndex","low","high","mid","createIndexFinder","predicateFind","item","findIndex","lastIndexOf","findLastIndex","find","each","results","currentKey","createReduce","reducer","initial","filter","list","every","some","fromIndex","guard","indexOf","invoke","contextPath","method","pluck","computed","lastComputed","v","reStrSymbol","toArray","sample","n","last","rand","temp","group","behavior","partition","pass","keyInObj","pick","first","difference","otherArrays","uniq","isSorted","seen","union","arrays","unzip","zip","chainResult","instance","_chain","chain","mixin","allExports","freeze","__proto__","isNull","isElement","nodeType","isDate","isRegExp","isError","isSymbol","parseFloat","isNaN$1","isEmpty","isEqual","isMap","pairs","extend","assign","props","clone","tap","interceptor","_has","mapObject","toPath$1","propertyOf","matches","accum","template","text","settings","oldSettings","offset","render","argument","variable","e","data","fallback","uniqueId","prefix","id","memoize","hasher","cache","address","defer","throttle","options","timeout","previous","later","leading","throttled","_now","remaining","clearTimeout","trailing","cancel","debounce","immediate","passed","debounced","_args","wrap","wrapper","compose","start","after","detect","findWhere","forEach","collect","reduce","foldl","inject","reduceRight","foldr","select","reject","all","any","includes","include","where","shuffle","sortBy","criteria","left","right","groupBy","indexBy","countBy","size","omit","head","take","tail","drop","compact","Boolean","_flatten","without","unique","intersection","argsLength","transpose","range","stop","step","ceil","chunk","count","default","_$1","splitUri","link","splitted","uri","scheme","authority","query","fragment","isUri","out","toLowerCase","padOuter","getPadOuter","$","contents","getLinksContainer","hideLink","linkId","hide","show","hideAllLinks","setPositionModal","linkModal","padInner","clickCoords","posx","posy","window","event","pageX","pageY","clientX","clientY","body","scrollLeft","documentElement","scrollTop","x","y","getPosition","clickCoordsX","clickCoordsY","modalWith","innerWidth","modalHeight","outerHeight","windowWidth","windowHeight","windoPaddingTop","parseInt","css","linkElementTop","target","top","linkElementHeight","newL","newT","hasClass","transform","width","internalLinkClick","preventDefault","stopPropagation","href","attr","url","incomeURL","URL","origin","location","doesPInURL","pathname","split","padName","clientVars","padId","padMainPathname","substring","ep_singlePad","active","isLinkInternal","targetPath","search","filters","currentPathname","padNameIndex","splice","doesLinkHaveFilter","tartge","history","pushState","title","open","submitNewLink","callback","form","val","oldText","hyperlink","buildLinkFrom","validUrl.splitUri","validUrl.isUri","removeClass","hideNewLinkPopup","addClass","insertNewLinkPopupIfDontExist","remove","newLinkPopup","tmpl","appendTo","on","blur","pad","plugins","ep_full_hyperlinks","preLinkMarker","unmarkSelectedText","MARK_CLASS","ace","highlightSelectedText","markSelectedText","callWithAce","doNothing","performNonUnduableEvent","eventType","callstack","action","startNewEvent","handleMarkText","editorInfo","rep","removeMarks","addMark","handleUnmarkText","editEvent","ace_setAttributeOnSelection","userId","originalSelStart","selStart","originalSelEnd","selEnd","selector","repArr","ace_getRepFromSelector","ace_performSelectionChange","addTextOnClipboard","removeSelection","links","getFormatedHrefElements","selection","contentWindow","getSelection","getRangeAt","selectedElements","createElement","append","cloneContents","querySelectorAll","el","cls","getAttribute","lindId","exec","newTag","innerHTML","setAttribute","querySelector","replaceWith","error","console","getSelectionFormated","originalEvent","clipboardData","setData","outerHTML","execCommand","saveLinks","pastedDataHtml","getData","pastedHtmlHolderElemenet","allLinksElement","getElementsByTagName","allLinksData","element","tempHyperLink","tempHyperLinkText","newLinkId","shared","generateLinkId","author","timestamp","originalLinkId","headerId","date","formattedDate","saveLinkWithoutSelection","html","makeClipboarRedyForSaveLinks","require","cssFiles","epLinks","container","loc","port","protocol","hostname","socket","io","connect","mapFakeLinks","mapOriginalLinksId","init","getRepFromSelector","attributeManager","documentAttributeManager","elements","span","parentDiv","closest","lineNumber","prevAll","leftOffset","hasLineAttribute","attrArr","getAttributesOnLine","attrK","spanOffset","async","findContainers","insertContainers","getLinks","isEmptyObject","setLinks","linkListen","pushLink","setLink","displayNewLinkForm","parent","$linkBox","$linkForm","linkText","oldLinkText","aceTop","ace_replaceRange","_send","err","message","updateLinkBoxText","linkBoxes.hideLink","setLinkNewText","hideLinkTimer","focus","setSelectionRange","userAgent","isMobile","$outerdocHTML","mainHeder","innerHeight","offsetTop","animate","scrollToFixEditFormInViewport","dummy","appendChild","removeChild","gritter","add","deleteLink","authorId","currentTarget","linkIdOf","fetch","then","res","json","linkObj","linkModalAppended","loaded","dividedUrl","ep_hyperlink_img","ep_hyperlink_title","card_loading_hyperlink","ep_hyperlink_description","changeMetaView","image","fadeOut","fadeIn","metaResolverCallBack","metadata","editedHyperlink","emit","linkBoxes.showLinkModal","linkBoxes.internalLinkClick","addListenersToCloseOpenedLink","trigger","events.addTextOnClipboard","events.saveLinks","allLinks","LinksProcessed","Links","outerBody","linkReplies","closeOpenedLinkIfNotOnSelectedElements","closeOpenedLink","linkBoxes.hideAllLinks","linkBoxes.shouldNotCloseLink","classList","classLinkId","linkBoxWrapper","prepend","toISOString","getLinkData","myUserInfo","undefined","saveRep","ace_getRep","lines","selectedText","getSelectedText","createNewLinkFormIfDontExist","$firstSelectedElement","getFirstElementSelected","isElementInViewport","scrollViewportIfSelectedTextIsNotVisible","elementPosition","getBoundingClientRect","scrollTopFirefox","scrolltop","elementPositionTopOnViewport","elementPositionBottomOnViewport","bottom","$ace_outer","ace_outerHeight","height","ace_outerPaddingTop","getIntValueOfCSSProperty","$element","valueString","atIndex","checkNoTextSelected","newLink.insertNewLinkPopupIfDontExist","saveLink","firstLine","lastLine","getLastLine","line","posStart","posEnd","lineText","cleanLine","lastLineSelected","lastLineSelectedIsEmpty","firstCharLinePosition","lineHasMarker","lineMarker","linkData","buildLinks","linksData","buildLink","changeTo","changeFrom","Promise","resolve","errj","getMapfakeLinks","findLinkText","findHyperLinkText","$link","showChangeAsAccepted","addBack","showChangeAsReverted","aceEditorCSS","hookName","postAceInit","hook","sticky","class_name","aceAttribsToClasses","preLinkMark.MARK_CLASS","aceEditEvent","collectContentPre","fakeLink","cc","doAttrib","state","shared.collectContentPre","hasHyperlink","node"],"mappings":"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"}