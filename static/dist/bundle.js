"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("js-cookie/dist/js.cookie"));const n=function(e){const t=e.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return{uri:t[0],scheme:t[1],authority:t[2],path:t[3],query:t[4],fragment:t[5]}};const r=function(e){if(!e)return;if(/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(e))return;if(/%[^0-9a-f]/i.test(e))return;if(/%[0-9a-f](:?[^0-9a-f]|$)/i.test(e))return;let t=[],r="",o="",i="",a="",s="",l="";if(t=n(e),r=t.scheme,o=t.authority,i=t.path,a=t.query,s=t.fragment,o&&o.length){if(0!==i.length&&!/^\//.test(i))return}else if(/^\/\//.test(i))return;return r&&r.length&&!/^[a-z][a-z0-9\+\-\.]*$/.test(r.toLowerCase())?void 0:(r&&r.length&&(l+=`${r}:`),o&&o.length&&(l+=`//${o}`),l+=i,a&&a.length&&(l+=`?${a}`),s&&s.length&&(l+=`#${s}`),l)};let o;const a=()=>o=o||$('iframe[name="ace_outer"]').contents(),s=()=>a().find("#linkBoxWrapper"),l=e=>{s().find(`#${e}`).hide(),o.find(`#show-form-${e}`).show(),o.find(`#edit-form-${e}`).hide()},c=()=>s().find(".link-container").hide(),u=(e,t,n)=>{const r=(e=>{let t=0,n=0;return e||(e=window.event),e.pageX||e.pageY?(t=e.pageX,n=e.pageY):(e.clientX||e.clientY)&&(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:t,y:n}})(e),o=r.x,i=r.y,a=t.innerWidth(),s=t.outerHeight(!0),l=n.innerWidth(),c=n.outerHeight(!0),u=parseInt(n.css("padding-top")),d=parseInt($(e.target).offset().top),p=parseInt($(e.target).outerHeight(!0));let f=e.clientX+n.offset().left,h=d+p+u/2;l-o<a&&(f=l-a-16),c-i<s&&(h=c-s),$("body").hasClass("mobileView")||(h+=35),$("body").hasClass("mobileView")?(t.css({left:"50%",top:`${h}px`,transform:"translateX(-50%)",width:"96vw"}),t.find("a.ep_hyperlink_title").css({"margin-left":"4px"}),t.find(".ep_hyperlink_docs_bubble_button_container").css({"margin-left":"auto"})):t.css({left:`${f}px`,top:`${h}px`})},d=function(e){e.preventDefault(),e.stopPropagation();const t=$(this).attr("href");if((e=>{const t=new URL(e);let n=!1;if(t.origin!==location.origin)return!1;if(t.origin===location.origin){const e=location.pathname.split("/").indexOf("p")>0,t=clientVars.padId,r=e?`/p/${t}`:`/${t}`;location.pathname.substring(0,r.length)===r&&(n=!0),clientVars.ep_singlePad.active&&(n=!0)}return n})(t)){const e=new URL(t);let n=`${e.search}`;const r=(e=>{const t=[],n=clientVars.padId,r=e.pathname.split("/");let o=r.indexOf(n)+1;clientVars.ep_singlePad.active&&(o=0);const i=[...r].splice(o,r.length-1);return t.push(...i),t})(e);if(r.length>0){n=location.pathname.split("/").indexOf("p")>0?"/p":"",clientVars.ep_singlePad.active||(n+=`/${clientVars.padId}`),n+=`/${r.join("/")}${e.search}`}0===e.search.length&&(n=t);const o=r.length>0?"filter":"other";window.history.pushState({type:"hyperLink",href:t,target:o},document.title,n),c()}else window.open(t,"_blank");return!1},p=e=>{const t=$(document).find("#newLink"),o=(e=>({text:e.find("#hyperlink-text").val(),oldText:e.find("#hyperlink-text-hidden").val(),hyperlink:e.find("#hyperlink-url").val()}))(t);return n(o.hyperlink).scheme||(o.hyperlink=`https://${o.hyperlink}`),o.text.length>0&&r(o.hyperlink)?(t.find("#hyperlink-text, #hyperlink-url").removeClass("error"),h(),e(o,0)):(0===o.text.length&&t.find("#hyperlink-text").addClass("error"),r(o.hyperlink)||t.find("#hyperlink-url").addClass("error")),!1},f=(e,t)=>{$("#newLink").remove(),e.linkId="";const n=$("#newLinkTemplate").tmpl(e);return n.appendTo($("#editorcontainerbox")),$("#newLink #link-cancel-btn").on("click",(e=>h())),$("#newLink #link-create-btn").on("click",(e=>p(t))),$(document).on("submit","form.link-edit-form",(e=>{e.preventDefault(),p(t)})),n},h=()=>{$("#newLink").removeClass("popup-show"),$("#newLink").find(":focus").blur(),pad.plugins.ep_full_hyperlinks.preLinkMarker.unmarkSelectedText()},m="pre-selected-link",g=function(e){this.ace=e;const t=this;this.highlightSelectedText()&&setTimeout((()=>{t.unmarkSelectedText()}),0)};g.prototype.highlightSelectedText=function(){return clientVars.highlightSelectedText},g.prototype.markSelectedText=function(){this.highlightSelectedText()&&this.ace.callWithAce(y,"markPreSelectedTextToLink",!0)},g.prototype.unmarkSelectedText=function(){this.highlightSelectedText()&&this.ace.callWithAce(y,"unmarkPreSelectedTextToLink",!0)},g.prototype.performNonUnduableEvent=function(e,t,n){t.startNewEvent("nonundoable"),n(),t.startNewEvent(e)},g.prototype.handleMarkText=function(e){const t=e.editorInfo,n=e.rep,r=e.callstack;this.removeMarks(t,n,r),this.addMark(t,r)},g.prototype.handleUnmarkText=function(e){const t=e.editorInfo,n=e.rep,r=e.callstack;this.removeMarks(t,n,r)},g.prototype.addMark=function(e,t){const n=t.editEvent.eventType;this.performNonUnduableEvent(n,t,(()=>{e.ace_setAttributeOnSelection(m,clientVars.userId)}))},g.prototype.removeMarks=function(e,t,n){const r=n.editEvent.eventType,o=t.selStart,i=t.selEnd;this.performNonUnduableEvent(r,n,(()=>{const t=$('iframe[name="ace_outer"]').contents().find('iframe[name="ace_inner"]'),n=`.${m}`,r=e.ace_getRepFromSelector(n,t);$.each(r,((t,n)=>{e.ace_performSelectionChange(n[0],n[1],!0),e.ace_setAttributeOnSelection(m,!1)})),e.ace_performSelectionChange(o,i,!0)}))};const y=()=>{};var v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},b={},x={exports:{}},k={},w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},C=/[&"'<>\/]/gm;var T=/[\x00-\x2F\x3A-\x40\x5B-\x60\x7B-\xFF]/gm;var S=/[\x00-\x2F\x3A-\x40\x5B-\x60\x7B-\xFF\u2028\u2029]/gm;function _(e){return e&&e.replace(S,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))}function I(e){return e&&'"'+_(e)+'"'}var E=/"(?:\\.|[^"])*"/gm;var A=/[\x00-\x2F\x3A-\x40\x5B-\x60\x7B-\xFF]/gm;function N(e){return e&&e.replace(A,(function(e){return"\\"+("000000"+e.charCodeAt(0).toString(16)).slice(-6)}))}k.escapeHTML=function(e){return e&&e.replace(C,(function(e){return w[e]||e}))},k.escapeHTMLAttribute=function(e){return e&&e.replace(T,(function(e){return w[e]||"&#x"+("00"+e.charCodeAt(0).toString(16)).slice(-2)+";"}))},k.encodeJavaScriptIdentifier=_,k.encodeJavaScriptString=I,k.encodeJavaScriptData=function(e){return JSON.stringify(e).replace(E,(function(e){return I(JSON.parse(e))}))},k.encodeCSSIdentifier=N,k.encodeCSSString=function(e){return e&&'"'+N(e)+'"'},x.exports=k;var O,L={},D={exports:{}};function M(){return O||(O=1,e=D,function(t,n){e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}}("undefined"!=typeof window?window:v,(function(e,t){var n=[],r=e.document,o=Object.getPrototypeOf,i=n.slice,a=n.concat,s=n.push,l=n.indexOf,c={},u=c.toString,d=c.hasOwnProperty,p=d.toString,f=p.call(Object),h={};function m(e,t){var n=(t=t||r).createElement("script");n.text=e,t.head.appendChild(n).parentNode.removeChild(n)}var g="3.0.0",y=function(e,t){return new y.fn.init(e,t)},v=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,b=/^-ms-/,x=/-([a-z])/g,k=function(e,t){return t.toUpperCase()};function w(e){var t=!!e&&"length"in e&&e.length,n=y.type(e);return"function"!==n&&!y.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}y.fn=y.prototype={jquery:g,constructor:y,length:0,toArray:function(){return i.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:i.call(this)},pushStack:function(e){var t=y.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return y.each(this,e)},map:function(e){return this.pushStack(y.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},y.extend=y.fn.extend=function(){var e,t,n,r,o,i,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||y.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(c&&r&&(y.isPlainObject(r)||(o=y.isArray(r)))?(o?(o=!1,i=n&&y.isArray(n)?n:[]):i=n&&y.isPlainObject(n)?n:{},a[t]=y.extend(c,i,r)):void 0!==r&&(a[t]=r));return a},y.extend({expando:"jQuery"+(g+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===y.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=y.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==u.call(e)||(t=o(e))&&("function"!=typeof(n=d.call(t,"constructor")&&t.constructor)||p.call(n)!==f))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[u.call(e)]||"object":typeof e},globalEval:function(e){m(e)},camelCase:function(e){return e.replace(b,"ms-").replace(x,k)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,r=0;if(w(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(v,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(w(Object(e))?y.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:l.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;r<n;r++)e[o++]=t[r];return e.length=o,e},grep:function(e,t,n){for(var r=[],o=0,i=e.length,a=!n;o<i;o++)!t(e[o],o)!==a&&r.push(e[o]);return r},map:function(e,t,n){var r,o,i=0,s=[];if(w(e))for(r=e.length;i<r;i++)null!=(o=t(e[i],i,n))&&s.push(o);else for(i in e)null!=(o=t(e[i],i,n))&&s.push(o);return a.apply([],s)},guid:1,proxy:function(e,t){var n,r,o;if("string"==typeof t&&(n=e[t],t=e,e=n),y.isFunction(e))return r=i.call(arguments,2),o=function(){return e.apply(t||this,r.concat(i.call(arguments)))},o.guid=e.guid=e.guid||y.guid++,o},now:Date.now,support:h}),"function"==typeof Symbol&&(y.fn[Symbol.iterator]=n[Symbol.iterator]),y.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){c["[object "+t+"]"]=t.toLowerCase()}));var C=
/*!
		 * Sizzle CSS Selector Engine v2.3.0
		 * https://sizzlejs.com/
		 *
		 * Copyright jQuery Foundation and other contributors
		 * Released under the MIT license
		 * http://jquery.org/license
		 *
		 * Date: 2016-01-04
		 */
function(e){var t,n,r,o,i,a,s,l,c,u,d,p,f,h,m,g,y,v,b,x="sizzle"+1*new Date,k=e.document,w=0,C=0,$=ae(),T=ae(),S=ae(),_=function(e,t){return e===t&&(d=!0),0},I={}.hasOwnProperty,E=[],A=E.pop,N=E.push,O=E.push,L=E.slice,D=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",P="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",R="\\[[\\x20\\t\\r\\n\\f]*("+P+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+P+"))|)"+j+"*\\]",F=":("+P+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|.*)\\)|)",U=new RegExp(j+"+","g"),H=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),q=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),V=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),B=new RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),W=new RegExp(F),z=new RegExp("^"+P+"$"),G={ID:new RegExp("^#("+P+")"),CLASS:new RegExp("^\\.("+P+")"),TAG:new RegExp("^("+P+"|[*])"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},J=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){p()},oe=ve((function(e){return!0===e.disabled}),{dir:"parentNode",next:"legend"});try{O.apply(E=L.call(k.childNodes),k.childNodes),E[k.childNodes.length].nodeType}catch(e){O={apply:E.length?function(e,t){N.apply(e,L.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function ie(e,t,r,o){var i,s,c,u,d,h,y,v=t&&t.ownerDocument,w=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==w&&9!==w&&11!==w)return r;if(!o&&((t?t.ownerDocument||t:k)!==f&&p(t),t=t||f,m)){if(11!==w&&(d=K.exec(e)))if(i=d[1]){if(9===w){if(!(c=t.getElementById(i)))return r;if(c.id===i)return r.push(c),r}else if(v&&(c=v.getElementById(i))&&b(t,c)&&c.id===i)return r.push(c),r}else{if(d[2])return O.apply(r,t.getElementsByTagName(e)),r;if((i=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return O.apply(r,t.getElementsByClassName(i)),r}if(n.qsa&&!S[e+" "]&&(!g||!g.test(e))){if(1!==w)v=t,y=e;else if("object"!==t.nodeName.toLowerCase()){for((u=t.getAttribute("id"))?u=u.replace(te,ne):t.setAttribute("id",u=x),s=(h=a(e)).length;s--;)h[s]="#"+u+" "+ye(h[s]);y=h.join(","),v=Q.test(e)&&me(t.parentNode)||t}if(y)try{return O.apply(r,v.querySelectorAll(y)),r}catch(e){}finally{u===x&&t.removeAttribute("id")}}}return l(e.replace(H,"$1"),t,r,o)}function ae(){var e=[];return function t(n,o){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=o}}function se(e){return e[x]=!0,e}function le(e){var t=f.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var n=e.split("|"),o=n.length;o--;)r.attrHandle[n[o]]=t}function ue(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function fe(e){return function(t){return"label"in t&&t.disabled===e||"form"in t&&t.disabled===e||"form"in t&&!1===t.disabled&&(t.isDisabled===e||t.isDisabled!==!e&&("label"in t||!oe(t))!==e)}}function he(e){return se((function(t){return t=+t,se((function(n,r){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))}))}))}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ie.support={},i=ie.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},p=ie.setDocument=function(e){var t,o,a=e?e.ownerDocument||e:k;return a!==f&&9===a.nodeType&&a.documentElement?(h=(f=a).documentElement,m=!i(f),k!==f&&(o=f.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",re,!1):o.attachEvent&&o.attachEvent("onunload",re)),n.attributes=le((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=le((function(e){return e.appendChild(f.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=Y.test(f.getElementsByClassName),n.getById=le((function(e){return h.appendChild(e).id=x,!f.getElementsByName||!f.getElementsByName(x).length})),n.getById?(r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}},r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[o++];)1===n.nodeType&&r.push(n);return r}return i},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},y=[],g=[],(n.qsa=Y.test(f.querySelectorAll))&&(le((function(e){h.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+M+")"),e.querySelectorAll("[id~="+x+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||g.push(".#.+[+~]")})),le((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=f.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")}))),(n.matchesSelector=Y.test(v=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&le((function(e){n.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),y.push("!=",F)})),g=g.length&&new RegExp(g.join("|")),y=y.length&&new RegExp(y.join("|")),t=Y.test(h.compareDocumentPosition),b=t||Y.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},_=t?function(e,t){if(e===t)return d=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===f||e.ownerDocument===k&&b(k,e)?-1:t===f||t.ownerDocument===k&&b(k,t)?1:u?D(u,e)-D(u,t):0:4&r?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,r=0,o=e.parentNode,i=t.parentNode,a=[e],s=[t];if(!o||!i)return e===f?-1:t===f?1:o?-1:i?1:u?D(u,e)-D(u,t):0;if(o===i)return ue(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?ue(a[r],s[r]):a[r]===k?-1:s[r]===k?1:0},f):f},ie.matches=function(e,t){return ie(e,null,null,t)},ie.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&p(e),t=t.replace(B,"='$1']"),n.matchesSelector&&m&&!S[t+" "]&&(!y||!y.test(t))&&(!g||!g.test(t)))try{var r=v.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return ie(t,f,null,[e]).length>0},ie.contains=function(e,t){return(e.ownerDocument||e)!==f&&p(e),b(e,t)},ie.attr=function(e,t){(e.ownerDocument||e)!==f&&p(e);var o=r.attrHandle[t.toLowerCase()],i=o&&I.call(r.attrHandle,t.toLowerCase())?o(e,t,!m):void 0;return void 0!==i?i:n.attributes||!m?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},ie.escape=function(e){return(e+"").replace(te,ne)},ie.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ie.uniqueSort=function(e){var t,r=[],o=0,i=0;if(d=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(_),d){for(;t=e[i++];)t===e[i]&&(o=r.push(i));for(;o--;)e.splice(r[o],1)}return u=null,e},o=ie.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=o(t);return n},r=ie.selectors={cacheLength:50,createPseudo:se,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ie.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ie.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&W.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=$[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+j+"|$)"))&&$(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var o=ie.attr(r,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(U," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,p,f,h,m=i!==a?"nextSibling":"previousSibling",g=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!l&&!s,b=!1;if(g){if(i){for(;m;){for(p=t;p=p[m];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&v){for(b=(f=(c=(u=(d=(p=g)[x]||(p[x]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]||[])[0]===w&&c[1])&&c[2],p=f&&g.childNodes[f];p=++f&&p&&p[m]||(b=f=0)||h.pop();)if(1===p.nodeType&&++b&&p===t){u[e]=[w,f,b];break}}else if(v&&(b=f=(c=(u=(d=(p=t)[x]||(p[x]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]||[])[0]===w&&c[1]),!1===b)for(;(p=++f&&p&&p[m]||(b=f=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++b||(v&&((u=(d=p[x]||(p[x]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]=[w,b]),p!==t)););return(b-=o)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,o=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ie.error("unsupported pseudo: "+e);return o[x]?o(t):o.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se((function(e,n){for(var r,i=o(e,t),a=i.length;a--;)e[r=D(e,i[a])]=!(n[r]=i[a])})):function(e){return o(e,0,n)}):o}},pseudos:{not:se((function(e){var t=[],n=[],r=s(e.replace(H,"$1"));return r[x]?se((function(e,t,n,o){for(var i,a=r(e,null,o,[]),s=e.length;s--;)(i=a[s])&&(e[s]=!(t[s]=i))})):function(e,o,i){return t[0]=e,r(t,null,i,n),t[0]=null,!n.pop()}})),has:se((function(e){return function(t){return ie(e,t).length>0}})),contains:se((function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}})),lang:se((function(e){return z.test(e||"")||ie.error("unsupported lang: "+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:fe(!1),disabled:fe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he((function(){return[0]})),last:he((function(e,t){return[t-1]})),eq:he((function(e,t,n){return[n<0?n+t:n]})),even:he((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:he((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:he((function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e})),gt:he((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}},r.pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pe(t);function ge(){}function ye(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ve(e,t,n){var r=t.dir,o=t.next,i=o||r,a=n&&"parentNode"===i,s=C++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,o)}:function(t,n,l){var c,u,d,p=[w,s];if(l){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(u=(d=t[x]||(t[x]={}))[t.uniqueID]||(d[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=u[i])&&c[0]===w&&c[1]===s)return p[2]=c[2];if(u[i]=p,p[2]=e(t,n,l))return!0}}}function be(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function xe(e,t,n,r,o){for(var i,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(i=e[s])&&(n&&!n(i,r,o)||(a.push(i),c&&t.push(s)));return a}function ke(e,t,n,r,o,i){return r&&!r[x]&&(r=ke(r)),o&&!o[x]&&(o=ke(o,i)),se((function(i,a,s,l){var c,u,d,p=[],f=[],h=a.length,m=i||function(e,t,n){for(var r=0,o=t.length;r<o;r++)ie(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),g=!e||!i&&t?m:xe(m,p,e,s,l),y=n?o||(i?e:h||r)?[]:a:g;if(n&&n(g,y,s,l),r)for(c=xe(y,f),r(c,[],s,l),u=c.length;u--;)(d=c[u])&&(y[f[u]]=!(g[f[u]]=d));if(i){if(o||e){if(o){for(c=[],u=y.length;u--;)(d=y[u])&&c.push(g[u]=d);o(null,y=[],c,l)}for(u=y.length;u--;)(d=y[u])&&(c=o?D(i,d):p[u])>-1&&(i[c]=!(a[c]=d))}}else y=xe(y===a?y.splice(h,y.length):y),o?o(null,a,y,l):O.apply(a,y)}))}function we(e){for(var t,n,o,i=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],l=a?1:0,u=ve((function(e){return e===t}),s,!0),d=ve((function(e){return D(t,e)>-1}),s,!0),p=[function(e,n,r){var o=!a&&(r||n!==c)||((t=n).nodeType?u(e,n,r):d(e,n,r));return t=null,o}];l<i;l++)if(n=r.relative[e[l].type])p=[ve(be(p),n)];else{if((n=r.filter[e[l].type].apply(null,e[l].matches))[x]){for(o=++l;o<i&&!r.relative[e[o].type];o++);return ke(l>1&&be(p),l>1&&ye(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(H,"$1"),n,l<o&&we(e.slice(l,o)),o<i&&we(e=e.slice(o)),o<i&&ye(e))}p.push(n)}return be(p)}return ge.prototype=r.filters=r.pseudos,r.setFilters=new ge,a=ie.tokenize=function(e,t){var n,o,i,a,s,l,c,u=T[e+" "];if(u)return t?0:u.slice(0);for(s=e,l=[],c=r.preFilter;s;){for(a in n&&!(o=q.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(i=[])),n=!1,(o=V.exec(s))&&(n=o.shift(),i.push({value:n,type:o[0].replace(H," ")}),s=s.slice(n.length)),r.filter)!(o=G[a].exec(s))||c[a]&&!(o=c[a](o))||(n=o.shift(),i.push({value:n,type:a,matches:o}),s=s.slice(n.length));if(!n)break}return t?s.length:s?ie.error(e):T(e,l).slice(0)},s=ie.compile=function(e,t){var n,o=[],i=[],s=S[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=we(t[n]))[x]?o.push(s):i.push(s);s=S(e,function(e,t){var n=t.length>0,o=e.length>0,i=function(i,a,s,l,u){var d,h,g,y=0,v="0",b=i&&[],x=[],k=c,C=i||o&&r.find.TAG("*",u),$=w+=null==k?1:Math.random()||.1,T=C.length;for(u&&(c=a===f||a||u);v!==T&&null!=(d=C[v]);v++){if(o&&d){for(h=0,a||d.ownerDocument===f||(p(d),s=!m);g=e[h++];)if(g(d,a||f,s)){l.push(d);break}u&&(w=$)}n&&((d=!g&&d)&&y--,i&&b.push(d))}if(y+=v,n&&v!==y){for(h=0;g=t[h++];)g(b,x,a,s);if(i){if(y>0)for(;v--;)b[v]||x[v]||(x[v]=A.call(l));x=xe(x)}O.apply(l,x),u&&!i&&x.length>0&&y+t.length>1&&ie.uniqueSort(l)}return u&&(w=$,c=k),b};return n?se(i):i}(i,o)),s.selector=e}return s},l=ie.select=function(e,t,o,i){var l,c,u,d,p,f="function"==typeof e&&e,h=!i&&a(e=f.selector||e);if(o=o||[],1===h.length){if((c=h[0]=h[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&n.getById&&9===t.nodeType&&m&&r.relative[c[1].type]){if(!(t=(r.find.ID(u.matches[0].replace(Z,ee),t)||[])[0]))return o;f&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(l=G.needsContext.test(e)?0:c.length;l--&&(u=c[l],!r.relative[d=u.type]);)if((p=r.find[d])&&(i=p(u.matches[0].replace(Z,ee),Q.test(c[0].type)&&me(t.parentNode)||t))){if(c.splice(l,1),!(e=i.length&&ye(c)))return O.apply(o,i),o;break}}return(f||s(e,h))(i,t,!m,o,!t||Q.test(e)&&me(t.parentNode)||t),o},n.sortStable=x.split("").sort(_).join("")===x,n.detectDuplicates=!!d,p(),n.sortDetached=le((function(e){return 1&e.compareDocumentPosition(f.createElement("fieldset"))})),le((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||ce("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&le((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||ce("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),le((function(e){return null==e.getAttribute("disabled")}))||ce(M,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),ie}(e);y.find=C,y.expr=C.selectors,y.expr[":"]=y.expr.pseudos,y.uniqueSort=y.unique=C.uniqueSort,y.text=C.getText,y.isXMLDoc=C.isXML,y.contains=C.contains,y.escapeSelector=C.escape;var $=function(e,t,n){for(var r=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&y(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},S=y.expr.match.needsContext,_=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,I=/^.[^:#\[\.,]*$/;function E(e,t,n){if(y.isFunction(t))return y.grep(e,(function(e,r){return!!t.call(e,r,e)!==n}));if(t.nodeType)return y.grep(e,(function(e){return e===t!==n}));if("string"==typeof t){if(I.test(t))return y.filter(t,e,n);t=y.filter(t,e)}return y.grep(e,(function(e){return l.call(t,e)>-1!==n&&1===e.nodeType}))}y.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?y.find.matchesSelector(r,e)?[r]:[]:y.find.matches(e,y.grep(t,(function(e){return 1===e.nodeType})))},y.fn.extend({find:function(e){var t,n,r=this.length,o=this;if("string"!=typeof e)return this.pushStack(y(e).filter((function(){for(t=0;t<r;t++)if(y.contains(o[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)y.find(e,o[t],n);return r>1?y.uniqueSort(n):n},filter:function(e){return this.pushStack(E(this,e||[],!1))},not:function(e){return this.pushStack(E(this,e||[],!0))},is:function(e){return!!E(this,"string"==typeof e&&S.test(e)?y(e):e||[],!1).length}});var A,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(y.fn.init=function(e,t,n){var o,i;if(!e)return this;if(n=n||A,"string"==typeof e){if(!(o="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:N.exec(e))||!o[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(o[1]){if(t=t instanceof y?t[0]:t,y.merge(this,y.parseHTML(o[1],t&&t.nodeType?t.ownerDocument||t:r,!0)),_.test(o[1])&&y.isPlainObject(t))for(o in t)y.isFunction(this[o])?this[o](t[o]):this.attr(o,t[o]);return this}return(i=r.getElementById(o[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y.isFunction(e)?void 0!==n.ready?n.ready(e):e(y):y.makeArray(e,this)}).prototype=y.fn,A=y(r);var O=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function D(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}y.fn.extend({has:function(e){var t=y(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(y.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,o=this.length,i=[],a="string"!=typeof e&&y(e);if(!S.test(e))for(;r<o;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&y.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?y.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?l.call(y(e),this[0]):l.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(y.uniqueSort(y.merge(this.get(),y(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),y.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return $(e,"parentNode")},parentsUntil:function(e,t,n){return $(e,"parentNode",n)},next:function(e){return D(e,"nextSibling")},prev:function(e){return D(e,"previousSibling")},nextAll:function(e){return $(e,"nextSibling")},prevAll:function(e){return $(e,"previousSibling")},nextUntil:function(e,t,n){return $(e,"nextSibling",n)},prevUntil:function(e,t,n){return $(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return e.contentDocument||y.merge([],e.childNodes)}},(function(e,t){y.fn[e]=function(n,r){var o=y.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=y.filter(r,o)),this.length>1&&(L[e]||y.uniqueSort(o),O.test(e)&&o.reverse()),this.pushStack(o)}}));var M=/\S+/g;function j(e){return e}function P(e){throw e}function R(e,t,n){var r;try{e&&y.isFunction(r=e.promise)?r.call(e).done(t).fail(n):e&&y.isFunction(r=e.then)?r.call(e,t,n):t.call(void 0,e)}catch(e){n.call(void 0,e)}}y.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return y.each(e.match(M)||[],(function(e,n){t[n]=!0})),t}(e):y.extend({},e);var t,n,r,o,i=[],a=[],s=-1,l=function(){for(o=e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<i.length;)!1===i[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=i.length,n=!1);e.memory||(n=!1),t=!1,o&&(i=n?[]:"")},c={add:function(){return i&&(n&&!t&&(s=i.length-1,a.push(n)),function t(n){y.each(n,(function(n,r){y.isFunction(r)?e.unique&&c.has(r)||i.push(r):r&&r.length&&"string"!==y.type(r)&&t(r)}))}(arguments),n&&!t&&l()),this},remove:function(){return y.each(arguments,(function(e,t){for(var n;(n=y.inArray(t,i,n))>-1;)i.splice(n,1),n<=s&&s--})),this},has:function(e){return e?y.inArray(e,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return o=a=[],i=n="",this},disabled:function(){return!i},lock:function(){return o=a=[],n||t||(i=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},y.extend({Deferred:function(t){var n=[["notify","progress",y.Callbacks("memory"),y.Callbacks("memory"),2],["resolve","done",y.Callbacks("once memory"),y.Callbacks("once memory"),0,"resolved"],["reject","fail",y.Callbacks("once memory"),y.Callbacks("once memory"),1,"rejected"]],r="pending",o={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return y.Deferred((function(t){y.each(n,(function(n,r){var o=y.isFunction(e[r[4]])&&e[r[4]];i[r[1]]((function(){var e=o&&o.apply(this,arguments);e&&y.isFunction(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,o?[e]:arguments)}))})),e=null})).promise()},then:function(t,r,o){var i=0;function a(t,n,r,o){return function(){var s=this,l=arguments,c=function(){var e,c;if(!(t<i)){if((e=r.apply(s,l))===n.promise())throw new TypeError("Thenable self-resolution");c=e&&("object"==typeof e||"function"==typeof e)&&e.then,y.isFunction(c)?o?c.call(e,a(i,n,j,o),a(i,n,P,o)):(i++,c.call(e,a(i,n,j,o),a(i,n,P,o),a(i,n,j,n.notifyWith))):(r!==j&&(s=void 0,l=[e]),(o||n.resolveWith)(s,l))}},u=o?c:function(){try{c()}catch(e){y.Deferred.exceptionHook&&y.Deferred.exceptionHook(e,u.stackTrace),t+1>=i&&(r!==P&&(s=void 0,l=[e]),n.rejectWith(s,l))}};t?u():(y.Deferred.getStackHook&&(u.stackTrace=y.Deferred.getStackHook()),e.setTimeout(u))}}return y.Deferred((function(e){n[0][3].add(a(0,e,y.isFunction(o)?o:j,e.notifyWith)),n[1][3].add(a(0,e,y.isFunction(t)?t:j)),n[2][3].add(a(0,e,y.isFunction(r)?r:P))})).promise()},promise:function(e){return null!=e?y.extend(e,o):o}},i={};return y.each(n,(function(e,t){var a=t[2],s=t[5];o[t[1]]=a.add,s&&a.add((function(){r=s}),n[3-e][2].disable,n[0][2].lock),a.add(t[3].fire),i[t[0]]=function(){return i[t[0]+"With"](this===i?void 0:this,arguments),this},i[t[0]+"With"]=a.fireWith})),o.promise(i),t&&t.call(i,i),i},when:function(e){var t=arguments.length,n=t,r=Array(n),o=i.call(arguments),a=y.Deferred(),s=function(e){return function(n){r[e]=this,o[e]=arguments.length>1?i.call(arguments):n,--t||a.resolveWith(r,o)}};if(t<=1&&(R(e,a.done(s(n)).resolve,a.reject),"pending"===a.state()||y.isFunction(o[n]&&o[n].then)))return a.then();for(;n--;)R(o[n],s(n),a.reject);return a.promise()}});var F=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;y.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&F.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)};var U=y.Deferred();function H(){r.removeEventListener("DOMContentLoaded",H),e.removeEventListener("load",H),y.ready()}y.fn.ready=function(e){return U.then(e),this},y.extend({isReady:!1,readyWait:1,holdReady:function(e){e?y.readyWait++:y.ready(!0)},ready:function(e){(!0===e?--y.readyWait:y.isReady)||(y.isReady=!0,!0!==e&&--y.readyWait>0||U.resolveWith(r,[y]))}}),y.ready.then=U.then,"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?e.setTimeout(y.ready):(r.addEventListener("DOMContentLoaded",H),e.addEventListener("load",H));var q=function(e,t,n,r,o,i,a){var s=0,l=e.length,c=null==n;if("object"===y.type(n))for(s in o=!0,n)q(e,t,s,n[s],!0,i,a);else if(void 0!==r&&(o=!0,y.isFunction(r)||(a=!0),c&&(a?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(y(e),n)})),t))for(;s<l;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return o?e:c?t.call(e):l?t(e[0],n):i},V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function B(){this.expando=y.expando+B.uid++}B.uid=1,B.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,o=this.cache(e);if("string"==typeof t)o[y.camelCase(t)]=n;else for(r in t)o[y.camelCase(r)]=t[r];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][y.camelCase(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=y.isArray(t)?t.map(y.camelCase):(t=y.camelCase(t))in r?[t]:t.match(M)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||y.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!y.isEmptyObject(t)}};var W=new B,z=new B,G=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function X(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(J,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:G.test(n)?JSON.parse(n):n)}catch(e){}z.set(e,t,n)}else n=void 0;return n}y.extend({hasData:function(e){return z.hasData(e)||W.hasData(e)},data:function(e,t,n){return z.access(e,t,n)},removeData:function(e,t){z.remove(e,t)},_data:function(e,t,n){return W.access(e,t,n)},_removeData:function(e,t){W.remove(e,t)}}),y.fn.extend({data:function(e,t){var n,r,o,i=this[0],a=i&&i.attributes;if(void 0===e){if(this.length&&(o=z.get(i),1===i.nodeType&&!W.get(i,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=y.camelCase(r.slice(5)),X(i,r,o[r]));W.set(i,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each((function(){z.set(this,e)})):q(this,(function(t){var n;if(i&&void 0===t)return void 0!==(n=z.get(i,e))||void 0!==(n=X(i,e))?n:void 0;this.each((function(){z.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){z.remove(this,e)}))}}),y.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=W.get(e,t),n&&(!r||y.isArray(n)?r=W.access(e,t,y.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=y.queue(e,t),r=n.length,o=n.shift(),i=y._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete i.stop,o.call(e,(function(){y.dequeue(e,t)}),i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return W.get(e,n)||W.access(e,n,{empty:y.Callbacks("once memory").add((function(){W.remove(e,[t+"queue",n])}))})}}),y.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?y.queue(this[0],e):void 0===t?this:this.each((function(){var n=y.queue(this,e,t);y._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&y.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){y.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=y.Deferred(),i=this,a=this.length,s=function(){--r||o.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=W.get(i[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),o.promise(t)}});var Y=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,K=new RegExp("^(?:([+-])=|)("+Y+")([a-z%]*)$","i"),Q=["Top","Right","Bottom","Left"],Z=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&y.contains(e.ownerDocument,e)&&"none"===y.css(e,"display")},ee=function(e,t,n,r){var o,i,a={};for(i in t)a[i]=e.style[i],e.style[i]=t[i];for(i in o=n.apply(e,r||[]),t)e.style[i]=a[i];return o};function te(e,t,n,r){var o,i=1,a=20,s=r?function(){return r.cur()}:function(){return y.css(e,t,"")},l=s(),c=n&&n[3]||(y.cssNumber[t]?"":"px"),u=(y.cssNumber[t]||"px"!==c&&+l)&&K.exec(y.css(e,t));if(u&&u[3]!==c){c=c||u[3],n=n||[],u=+l||1;do{u/=i=i||".5",y.style(e,t,u+c)}while(i!==(i=s()/l)&&1!==i&&--a)}return n&&(u=+u||+l||0,o=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=u,r.end=o)),o}var ne={};function re(e){var t,n=e.ownerDocument,r=e.nodeName,o=ne[r];return o||(t=n.body.appendChild(n.createElement(r)),o=y.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),ne[r]=o,o)}function oe(e,t){for(var n,r,o=[],i=0,a=e.length;i<a;i++)(r=e[i]).style&&(n=r.style.display,t?("none"===n&&(o[i]=W.get(r,"display")||null,o[i]||(r.style.display="")),""===r.style.display&&Z(r)&&(o[i]=re(r))):"none"!==n&&(o[i]="none",W.set(r,"display",n)));for(i=0;i<a;i++)null!=o[i]&&(e[i].style.display=o[i]);return e}y.fn.extend({show:function(){return oe(this,!0)},hide:function(){return oe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){Z(this)?y(this).show():y(this).hide()}))}});var ie=/^(?:checkbox|radio)$/i,ae=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,se=/^$|\/(?:java|ecma)script/i,le={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ce(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&y.nodeName(e,t)?y.merge([e],n):n}function ue(e,t){for(var n=0,r=e.length;n<r;n++)W.set(e[n],"globalEval",!t||W.get(t[n],"globalEval"))}le.optgroup=le.option,le.tbody=le.tfoot=le.colgroup=le.caption=le.thead,le.th=le.td;var de,pe,fe=/<|&#?\w+;/;function he(e,t,n,r,o){for(var i,a,s,l,c,u,d=t.createDocumentFragment(),p=[],f=0,h=e.length;f<h;f++)if((i=e[f])||0===i)if("object"===y.type(i))y.merge(p,i.nodeType?[i]:i);else if(fe.test(i)){for(a=a||d.appendChild(t.createElement("div")),s=(ae.exec(i)||["",""])[1].toLowerCase(),l=le[s]||le._default,a.innerHTML=l[1]+y.htmlPrefilter(i)+l[2],u=l[0];u--;)a=a.lastChild;y.merge(p,a.childNodes),(a=d.firstChild).textContent=""}else p.push(t.createTextNode(i));for(d.textContent="",f=0;i=p[f++];)if(r&&y.inArray(i,r)>-1)o&&o.push(i);else if(c=y.contains(i.ownerDocument,i),a=ce(d.appendChild(i),"script"),c&&ue(a),n)for(u=0;i=a[u++];)se.test(i.type||"")&&n.push(i);return d}de=r.createDocumentFragment().appendChild(r.createElement("div")),(pe=r.createElement("input")).setAttribute("type","radio"),pe.setAttribute("checked","checked"),pe.setAttribute("name","t"),de.appendChild(pe),h.checkClone=de.cloneNode(!0).cloneNode(!0).lastChild.checked,de.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!de.cloneNode(!0).lastChild.defaultValue;var me=r.documentElement,ge=/^key/,ye=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ve=/^([^.]*)(?:\.(.+)|)/;function be(){return!0}function xe(){return!1}function ke(){try{return r.activeElement}catch(e){}}function we(e,t,n,r,o,i){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)we(e,s,n,r,t[s],i);return e}if(null==r&&null==o?(o=n,r=n=void 0):null==o&&("string"==typeof n?(o=r,r=void 0):(o=r,r=n,n=void 0)),!1===o)o=xe;else if(!o)return e;return 1===i&&(a=o,o=function(e){return y().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=y.guid++)),e.each((function(){y.event.add(this,t,o,r,n)}))}y.event={global:{},add:function(e,t,n,r,o){var i,a,s,l,c,u,d,p,f,h,m,g=W.get(e);if(g)for(n.handler&&(n=(i=n).handler,o=i.selector),o&&y.find.matchesSelector(me,o),n.guid||(n.guid=y.guid++),(l=g.events)||(l=g.events={}),(a=g.handle)||(a=g.handle=function(t){return void 0!==y&&y.event.triggered!==t.type?y.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(M)||[""]).length;c--;)f=m=(s=ve.exec(t[c])||[])[1],h=(s[2]||"").split(".").sort(),f&&(d=y.event.special[f]||{},f=(o?d.delegateType:d.bindType)||f,d=y.event.special[f]||{},u=y.extend({type:f,origType:m,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&y.expr.match.needsContext.test(o),namespace:h.join(".")},i),(p=l[f])||((p=l[f]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(f,a)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,u):p.push(u),y.event.global[f]=!0)},remove:function(e,t,n,r,o){var i,a,s,l,c,u,d,p,f,h,m,g=W.hasData(e)&&W.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(M)||[""]).length;c--;)if(f=m=(s=ve.exec(t[c])||[])[1],h=(s[2]||"").split(".").sort(),f){for(d=y.event.special[f]||{},p=l[f=(r?d.delegateType:d.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=i=p.length;i--;)u=p[i],!o&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(p.splice(i,1),u.selector&&p.delegateCount--,d.remove&&d.remove.call(e,u));a&&!p.length&&(d.teardown&&!1!==d.teardown.call(e,h,g.handle)||y.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)y.event.remove(e,f+t[c],n,r,!0);y.isEmptyObject(l)&&W.remove(e,"handle events")}},dispatch:function(e){var t,n,r,o,i,a,s=y.event.fix(e),l=new Array(arguments.length),c=(W.get(this,"events")||{})[s.type]||[],u=y.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,s)){for(a=y.event.handlers.call(this,s,c),t=0;(o=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=o.elem,n=0;(i=o.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(i.namespace)||(s.handleObj=i,s.data=i.data,void 0!==(r=((y.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,l))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,o,i,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(r=[],n=0;n<s;n++)void 0===r[o=(i=t[n]).selector+" "]&&(r[o]=i.needsContext?y(o,this).index(l)>-1:y.find(o,this,null,[l]).length),r[o]&&r.push(i);r.length&&a.push({elem:l,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},addProp:function(e,t){Object.defineProperty(y.Event.prototype,e,{enumerable:!0,configurable:!0,get:y.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[y.expando]?e:new y.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ke()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===ke()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&y.nodeName(this,"input"))return this.click(),!1},_default:function(e){return y.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},y.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},y.Event=function(e,t){if(!(this instanceof y.Event))return new y.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?be:xe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&y.extend(this,t),this.timeStamp=e&&e.timeStamp||y.now(),this[y.expando]=!0},y.Event.prototype={constructor:y.Event,isDefaultPrevented:xe,isPropagationStopped:xe,isImmediatePropagationStopped:xe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=be,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=be,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=be,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},y.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ge.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&ye.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},y.event.addProp),y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){y.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,o=e.relatedTarget,i=e.handleObj;return o&&(o===r||y.contains(r,o))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}})),y.fn.extend({on:function(e,t,n,r){return we(this,e,t,n,r)},one:function(e,t,n,r){return we(this,e,t,n,r,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,y(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=xe),this.each((function(){y.event.remove(this,e,n,t)}))}});var Ce=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,$e=/<script|<style|<link/i,Te=/checked\s*(?:[^=]|=\s*.checked.)/i,Se=/^true\/(.*)/,_e=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ie(e,t){return y.nodeName(e,"table")&&y.nodeName(11!==t.nodeType?t:t.firstChild,"tr")&&e.getElementsByTagName("tbody")[0]||e}function Ee(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ae(e){var t=Se.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Ne(e,t){var n,r,o,i,a,s,l,c;if(1===t.nodeType){if(W.hasData(e)&&(i=W.access(e),a=W.set(t,i),c=i.events))for(o in delete a.handle,a.events={},c)for(n=0,r=c[o].length;n<r;n++)y.event.add(t,o,c[o][n]);z.hasData(e)&&(s=z.access(e),l=y.extend({},s),z.set(t,l))}}function Oe(e,t,n,r){t=a.apply([],t);var o,i,s,l,c,u,d=0,p=e.length,f=p-1,g=t[0],v=y.isFunction(g);if(v||p>1&&"string"==typeof g&&!h.checkClone&&Te.test(g))return e.each((function(o){var i=e.eq(o);v&&(t[0]=g.call(this,o,i.html())),Oe(i,t,n,r)}));if(p&&(i=(o=he(t,e[0].ownerDocument,!1,e,r)).firstChild,1===o.childNodes.length&&(o=i),i||r)){for(l=(s=y.map(ce(o,"script"),Ee)).length;d<p;d++)c=o,d!==f&&(c=y.clone(c,!0,!0),l&&y.merge(s,ce(c,"script"))),n.call(e[d],c,d);if(l)for(u=s[s.length-1].ownerDocument,y.map(s,Ae),d=0;d<l;d++)c=s[d],se.test(c.type||"")&&!W.access(c,"globalEval")&&y.contains(u,c)&&(c.src?y._evalUrl&&y._evalUrl(c.src):m(c.textContent.replace(_e,""),u))}return e}function Le(e,t,n){for(var r,o=t?y.filter(t,e):e,i=0;null!=(r=o[i]);i++)n||1!==r.nodeType||y.cleanData(ce(r)),r.parentNode&&(n&&y.contains(r.ownerDocument,r)&&ue(ce(r,"script")),r.parentNode.removeChild(r));return e}y.extend({htmlPrefilter:function(e){return e.replace(Ce,"<$1></$2>")},clone:function(e,t,n){var r,o,i,a,s,l,c,u=e.cloneNode(!0),d=y.contains(e.ownerDocument,e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||y.isXMLDoc(e)))for(a=ce(u),r=0,o=(i=ce(e)).length;r<o;r++)s=i[r],l=a[r],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&ie.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(t)if(n)for(i=i||ce(e),a=a||ce(u),r=0,o=i.length;r<o;r++)Ne(i[r],a[r]);else Ne(e,u);return(a=ce(u,"script")).length>0&&ue(a,!d&&ce(e,"script")),u},cleanData:function(e){for(var t,n,r,o=y.event.special,i=0;void 0!==(n=e[i]);i++)if(V(n)){if(t=n[W.expando]){if(t.events)for(r in t.events)o[r]?y.event.remove(n,r):y.removeEvent(n,r,t.handle);n[W.expando]=void 0}n[z.expando]&&(n[z.expando]=void 0)}}}),y.fn.extend({detach:function(e){return Le(this,e,!0)},remove:function(e){return Le(this,e)},text:function(e){return q(this,(function(e){return void 0===e?y.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Oe(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ie(this,e).appendChild(e)}))},prepend:function(){return Oe(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ie(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Oe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Oe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(y.cleanData(ce(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return y.clone(this,e,t)}))},html:function(e){return q(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!$e.test(e)&&!le[(ae.exec(e)||["",""])[1].toLowerCase()]){e=y.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(y.cleanData(ce(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Oe(this,arguments,(function(t){var n=this.parentNode;y.inArray(this,e)<0&&(y.cleanData(ce(this)),n&&n.replaceChild(t,this))}),e)}}),y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){y.fn[e]=function(e){for(var n,r=[],o=y(e),i=o.length-1,a=0;a<=i;a++)n=a===i?this:this.clone(!0),y(o[a])[t](n),s.apply(r,n.get());return this.pushStack(r)}}));var De=/^margin/,Me=new RegExp("^("+Y+")(?!px)[a-z%]+$","i"),je=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)};function Pe(e,t,n){var r,o,i,a,s=e.style;return(n=n||je(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||y.contains(e.ownerDocument,e)||(a=y.style(e,t)),!h.pixelMarginRight()&&Me.test(a)&&De.test(t)&&(r=s.width,o=s.minWidth,i=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=o,s.maxWidth=i)),void 0!==a?a+"":a}function Re(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){l.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",l.innerHTML="",me.appendChild(s);var t=e.getComputedStyle(l);n="1%"!==t.top,a="2px"===t.marginLeft,o="4px"===t.width,l.style.marginRight="50%",i="4px"===t.marginRight,me.removeChild(s),l=null}}var n,o,i,a,s=r.createElement("div"),l=r.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===l.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(l),y.extend(h,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return t(),o},pixelMarginRight:function(){return t(),i},reliableMarginLeft:function(){return t(),a}}))}();var Fe=/^(none|table(?!-c[ea]).+)/,Ue={position:"absolute",visibility:"hidden",display:"block"},He={letterSpacing:"0",fontWeight:"400"},qe=["Webkit","Moz","ms"],Ve=r.createElement("div").style;function Be(e){if(e in Ve)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=qe.length;n--;)if((e=qe[n]+t)in Ve)return e}function We(e,t,n){var r=K.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function ze(e,t,n,r,o){for(var i=n===(r?"border":"content")?4:"width"===t?1:0,a=0;i<4;i+=2)"margin"===n&&(a+=y.css(e,n+Q[i],!0,o)),r?("content"===n&&(a-=y.css(e,"padding"+Q[i],!0,o)),"margin"!==n&&(a-=y.css(e,"border"+Q[i]+"Width",!0,o))):(a+=y.css(e,"padding"+Q[i],!0,o),"padding"!==n&&(a+=y.css(e,"border"+Q[i]+"Width",!0,o)));return a}function Ge(e,t,n){var r,o=!0,i=je(e),a="border-box"===y.css(e,"boxSizing",!1,i);if(e.getClientRects().length&&(r=e.getBoundingClientRect()[t]),r<=0||null==r){if(((r=Pe(e,t,i))<0||null==r)&&(r=e.style[t]),Me.test(r))return r;o=a&&(h.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+ze(e,t,n||(a?"border":"content"),o,i)+"px"}function Je(e,t,n,r,o){return new Je.prototype.init(e,t,n,r,o)}y.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Pe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,i,a,s=y.camelCase(t),l=e.style;if(t=y.cssProps[s]||(y.cssProps[s]=Be(s)||s),a=y.cssHooks[t]||y.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(o=a.get(e,!1,r))?o:l[t];"string"==(i=typeof n)&&(o=K.exec(n))&&o[1]&&(n=te(e,t,o),i="number"),null!=n&&n==n&&("number"===i&&(n+=o&&o[3]||(y.cssNumber[s]?"":"px")),h.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(l[t]=n))}},css:function(e,t,n,r){var o,i,a,s=y.camelCase(t);return t=y.cssProps[s]||(y.cssProps[s]=Be(s)||s),(a=y.cssHooks[t]||y.cssHooks[s])&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=Pe(e,t,r)),"normal"===o&&t in He&&(o=He[t]),""===n||n?(i=parseFloat(o),!0===n||isFinite(i)?i||0:o):o}}),y.each(["height","width"],(function(e,t){y.cssHooks[t]={get:function(e,n,r){if(n)return!Fe.test(y.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ge(e,t,r):ee(e,Ue,(function(){return Ge(e,t,r)}))},set:function(e,n,r){var o,i=r&&je(e),a=r&&ze(e,t,r,"border-box"===y.css(e,"boxSizing",!1,i),i);return a&&(o=K.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=y.css(e,t)),We(0,n,a)}}})),y.cssHooks.marginLeft=Re(h.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Pe(e,"marginLeft"))||e.getBoundingClientRect().left-ee(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),y.each({margin:"",padding:"",border:"Width"},(function(e,t){y.cssHooks[e+t]={expand:function(n){for(var r=0,o={},i="string"==typeof n?n.split(" "):[n];r<4;r++)o[e+Q[r]+t]=i[r]||i[r-2]||i[0];return o}},De.test(e)||(y.cssHooks[e+t].set=We)})),y.fn.extend({css:function(e,t){return q(this,(function(e,t,n){var r,o,i={},a=0;if(y.isArray(t)){for(r=je(e),o=t.length;a<o;a++)i[t[a]]=y.css(e,t[a],!1,r);return i}return void 0!==n?y.style(e,t,n):y.css(e,t)}),e,t,arguments.length>1)}}),y.Tween=Je,Je.prototype={constructor:Je,init:function(e,t,n,r,o,i){this.elem=e,this.prop=n,this.easing=o||y.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(y.cssNumber[n]?"":"px")},cur:function(){var e=Je.propHooks[this.prop];return e&&e.get?e.get(this):Je.propHooks._default.get(this)},run:function(e){var t,n=Je.propHooks[this.prop];return this.options.duration?this.pos=t=y.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Je.propHooks._default.set(this),this}},Je.prototype.init.prototype=Je.prototype,Je.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=y.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){y.fx.step[e.prop]?y.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[y.cssProps[e.prop]]&&!y.cssHooks[e.prop]?e.elem[e.prop]=e.now:y.style(e.elem,e.prop,e.now+e.unit)}}},Je.propHooks.scrollTop=Je.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},y.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},y.fx=Je.prototype.init,y.fx.step={};var Xe,Ye,Ke=/^(?:toggle|show|hide)$/,Qe=/queueHooks$/;function Ze(){Ye&&(e.requestAnimationFrame(Ze),y.fx.tick())}function et(){return e.setTimeout((function(){Xe=void 0})),Xe=y.now()}function tt(e,t){var n,r=0,o={height:e};for(t=t?1:0;r<4;r+=2-t)o["margin"+(n=Q[r])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function nt(e,t,n){for(var r,o=(rt.tweeners[t]||[]).concat(rt.tweeners["*"]),i=0,a=o.length;i<a;i++)if(r=o[i].call(n,t,e))return r}function rt(e,t,n){var r,o,i=0,a=rt.prefilters.length,s=y.Deferred().always((function(){delete l.elem})),l=function(){if(o)return!1;for(var t=Xe||et(),n=Math.max(0,c.startTime+c.duration-t),r=1-(n/c.duration||0),i=0,a=c.tweens.length;i<a;i++)c.tweens[i].run(r);return s.notifyWith(e,[c,r,n]),r<1&&a?n:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:y.extend({},t),opts:y.extend(!0,{specialEasing:{},easing:y.easing._default},n),originalProperties:t,originalOptions:n,startTime:Xe||et(),duration:n.duration,tweens:[],createTween:function(t,n){var r=y.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(o)return this;for(o=!0;n<r;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(function(e,t){var n,r,o,i,a;for(n in e)if(o=t[r=y.camelCase(n)],i=e[n],y.isArray(i)&&(o=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),(a=y.cssHooks[r])&&"expand"in a)for(n in i=a.expand(i),delete e[r],i)n in e||(e[n]=i[n],t[n]=o);else t[r]=o}(u,c.opts.specialEasing);i<a;i++)if(r=rt.prefilters[i].call(c,e,u,c.opts))return y.isFunction(r.stop)&&(y._queueHooks(c.elem,c.opts.queue).stop=y.proxy(r.stop,r)),r;return y.map(u,nt,c),y.isFunction(c.opts.start)&&c.opts.start.call(e,c),y.fx.timer(y.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}y.Animation=y.extend(rt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return te(n.elem,e,K.exec(t),n),n}]},tweener:function(e,t){y.isFunction(e)?(t=e,e=["*"]):e=e.match(M);for(var n,r=0,o=e.length;r<o;r++)n=e[r],rt.tweeners[n]=rt.tweeners[n]||[],rt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,o,i,a,s,l,c,u,d="width"in t||"height"in t,p=this,f={},h=e.style,m=e.nodeType&&Z(e),g=W.get(e,"fxshow");for(r in n.queue||(null==(a=y._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always((function(){p.always((function(){a.unqueued--,y.queue(e,"fx").length||a.empty.fire()}))}))),t)if(o=t[r],Ke.test(o)){if(delete t[r],i=i||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!g||void 0===g[r])continue;m=!0}f[r]=g&&g[r]||y.style(e,r)}if((l=!y.isEmptyObject(t))||!y.isEmptyObject(f))for(r in d&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(c=g&&g.display)&&(c=W.get(e,"display")),"none"===(u=y.css(e,"display"))&&(c?u=c:(oe([e],!0),c=e.style.display||c,u=y.css(e,"display"),oe([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===y.css(e,"float")&&(l||(p.done((function(){h.display=c})),null==c&&(u=h.display,c="none"===u?"":u)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always((function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}))),l=!1,f)l||(g?"hidden"in g&&(m=g.hidden):g=W.access(e,"fxshow",{display:c}),i&&(g.hidden=!m),m&&oe([e],!0),p.done((function(){for(r in m||oe([e]),W.remove(e,"fxshow"),f)y.style(e,r,f[r])}))),l=nt(m?g[r]:0,r,p),r in g||(g[r]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?rt.prefilters.unshift(e):rt.prefilters.push(e)}}),y.speed=function(e,t,n){var o=e&&"object"==typeof e?y.extend({},e):{complete:n||!n&&t||y.isFunction(e)&&e,duration:e,easing:n&&t||t&&!y.isFunction(t)&&t};return y.fx.off||r.hidden?o.duration=0:o.duration="number"==typeof o.duration?o.duration:o.duration in y.fx.speeds?y.fx.speeds[o.duration]:y.fx.speeds._default,null!=o.queue&&!0!==o.queue||(o.queue="fx"),o.old=o.complete,o.complete=function(){y.isFunction(o.old)&&o.old.call(this),o.queue&&y.dequeue(this,o.queue)},o},y.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Z).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=y.isEmptyObject(e),i=y.speed(t,n,r),a=function(){var t=rt(this,y.extend({},e),i);(o||W.get(this,"finish"))&&t.stop(!0)};return a.finish=a,o||!1===i.queue?this.each(a):this.queue(i.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,o=null!=e&&e+"queueHooks",i=y.timers,a=W.get(this);if(o)a[o]&&a[o].stop&&r(a[o]);else for(o in a)a[o]&&a[o].stop&&Qe.test(o)&&r(a[o]);for(o=i.length;o--;)i[o].elem!==this||null!=e&&i[o].queue!==e||(i[o].anim.stop(n),t=!1,i.splice(o,1));!t&&n||y.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=W.get(this),r=n[e+"queue"],o=n[e+"queueHooks"],i=y.timers,a=r?r.length:0;for(n.finish=!0,y.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),y.each(["toggle","show","hide"],(function(e,t){var n=y.fn[t];y.fn[t]=function(e,r,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(tt(t,!0),e,r,o)}})),y.each({slideDown:tt("show"),slideUp:tt("hide"),slideToggle:tt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){y.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),y.timers=[],y.fx.tick=function(){var e,t=0,n=y.timers;for(Xe=y.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||y.fx.stop(),Xe=void 0},y.fx.timer=function(e){y.timers.push(e),e()?y.fx.start():y.timers.pop()},y.fx.interval=13,y.fx.start=function(){Ye||(Ye=e.requestAnimationFrame?e.requestAnimationFrame(Ze):e.setInterval(y.fx.tick,y.fx.interval))},y.fx.stop=function(){e.cancelAnimationFrame?e.cancelAnimationFrame(Ye):e.clearInterval(Ye),Ye=null},y.fx.speeds={slow:600,fast:200,_default:400},y.fn.delay=function(t,n){return t=y.fx&&y.fx.speeds[t]||t,n=n||"fx",this.queue(n,(function(n,r){var o=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(o)}}))},function(){var e=r.createElement("input"),t=r.createElement("select").appendChild(r.createElement("option"));e.type="checkbox",h.checkOn=""!==e.value,h.optSelected=t.selected,(e=r.createElement("input")).value="t",e.type="radio",h.radioValue="t"===e.value}();var ot,it=y.expr.attrHandle;y.fn.extend({attr:function(e,t){return q(this,y.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){y.removeAttr(this,e)}))}}),y.extend({attr:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?y.prop(e,t,n):(1===i&&y.isXMLDoc(e)||(o=y.attrHooks[t.toLowerCase()]||(y.expr.match.bool.test(t)?ot:void 0)),void 0!==n?null===n?void y.removeAttr(e,t):o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(r=o.get(e,t))?r:null==(r=y.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&"radio"===t&&y.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,o=t&&t.match(M);if(o&&1===e.nodeType)for(;n=o[r++];)e.removeAttribute(n)}}),ot={set:function(e,t,n){return!1===t?y.removeAttr(e,n):e.setAttribute(n,n),n}},y.each(y.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=it[t]||y.find.attr;it[t]=function(e,t,r){var o,i,a=t.toLowerCase();return r||(i=it[a],it[a]=o,o=null!=n(e,t,r)?a:null,it[a]=i),o}}));var at=/^(?:input|select|textarea|button)$/i,st=/^(?:a|area)$/i;y.fn.extend({prop:function(e,t){return q(this,y.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[y.propFix[e]||e]}))}}),y.extend({prop:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&y.isXMLDoc(e)||(t=y.propFix[t]||t,o=y.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:e[t]=n:o&&"get"in o&&null!==(r=o.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=y.find.attr(e,"tabindex");return t?parseInt(t,10):at.test(e.nodeName)||st.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),h.optSelected||(y.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){y.propFix[this.toLowerCase()]=this}));var lt=/[\t\r\n\f]/g;function ct(e){return e.getAttribute&&e.getAttribute("class")||""}y.fn.extend({addClass:function(e){var t,n,r,o,i,a,s,l=0;if(y.isFunction(e))return this.each((function(t){y(this).addClass(e.call(this,t,ct(this)))}));if("string"==typeof e&&e)for(t=e.match(M)||[];n=this[l++];)if(o=ct(n),r=1===n.nodeType&&(" "+o+" ").replace(lt," ")){for(a=0;i=t[a++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");o!==(s=y.trim(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,o,i,a,s,l=0;if(y.isFunction(e))return this.each((function(t){y(this).removeClass(e.call(this,t,ct(this)))}));if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(M)||[];n=this[l++];)if(o=ct(n),r=1===n.nodeType&&(" "+o+" ").replace(lt," ")){for(a=0;i=t[a++];)for(;r.indexOf(" "+i+" ")>-1;)r=r.replace(" "+i+" "," ");o!==(s=y.trim(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):y.isFunction(e)?this.each((function(n){y(this).toggleClass(e.call(this,n,ct(this),t),t)})):this.each((function(){var t,r,o,i;if("string"===n)for(r=0,o=y(this),i=e.match(M)||[];t=i[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=ct(this))&&W.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":W.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+ct(n)+" ").replace(lt," ").indexOf(t)>-1)return!0;return!1}});var ut=/\r/g,dt=/[\x20\t\r\n\f]+/g;y.fn.extend({val:function(e){var t,n,r,o=this[0];return arguments.length?(r=y.isFunction(e),this.each((function(n){var o;1===this.nodeType&&(null==(o=r?e.call(this,n,y(this).val()):e)?o="":"number"==typeof o?o+="":y.isArray(o)&&(o=y.map(o,(function(e){return null==e?"":e+""}))),(t=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))}))):o?(t=y.valHooks[o.type]||y.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(ut,""):null==n?"":n:void 0}}),y.extend({valHooks:{option:{get:function(e){var t=y.find.attr(e,"value");return null!=t?t:y.trim(y.text(e)).replace(dt," ")}},select:{get:function(e){for(var t,n,r=e.options,o=e.selectedIndex,i="select-one"===e.type,a=i?null:[],s=i?o+1:r.length,l=o<0?s:i?o:0;l<s;l++)if(((n=r[l]).selected||l===o)&&!n.disabled&&(!n.parentNode.disabled||!y.nodeName(n.parentNode,"optgroup"))){if(t=y(n).val(),i)return t;a.push(t)}return a},set:function(e,t){for(var n,r,o=e.options,i=y.makeArray(t),a=o.length;a--;)((r=o[a]).selected=y.inArray(y.valHooks.option.get(r),i)>-1)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),y.each(["radio","checkbox"],(function(){y.valHooks[this]={set:function(e,t){if(y.isArray(t))return e.checked=y.inArray(y(e).val(),t)>-1}},h.checkOn||(y.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var pt=/^(?:focusinfocus|focusoutblur)$/;y.extend(y.event,{trigger:function(t,n,o,i){var a,s,l,c,u,p,f,h=[o||r],m=d.call(t,"type")?t.type:t,g=d.call(t,"namespace")?t.namespace.split("."):[];if(s=l=o=o||r,3!==o.nodeType&&8!==o.nodeType&&!pt.test(m+y.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),u=m.indexOf(":")<0&&"on"+m,(t=t[y.expando]?t:new y.Event(m,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=o),n=null==n?[t]:y.makeArray(n,[t]),f=y.event.special[m]||{},i||!f.trigger||!1!==f.trigger.apply(o,n))){if(!i&&!f.noBubble&&!y.isWindow(o)){for(c=f.delegateType||m,pt.test(c+m)||(s=s.parentNode);s;s=s.parentNode)h.push(s),l=s;l===(o.ownerDocument||r)&&h.push(l.defaultView||l.parentWindow||e)}for(a=0;(s=h[a++])&&!t.isPropagationStopped();)t.type=a>1?c:f.bindType||m,(p=(W.get(s,"events")||{})[t.type]&&W.get(s,"handle"))&&p.apply(s,n),(p=u&&s[u])&&p.apply&&V(s)&&(t.result=p.apply(s,n),!1===t.result&&t.preventDefault());return t.type=m,i||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(h.pop(),n)||!V(o)||u&&y.isFunction(o[m])&&!y.isWindow(o)&&((l=o[u])&&(o[u]=null),y.event.triggered=m,o[m](),y.event.triggered=void 0,l&&(o[u]=l)),t.result}},simulate:function(e,t,n){var r=y.extend(new y.Event,n,{type:e,isSimulated:!0});y.event.trigger(r,null,t)}}),y.fn.extend({trigger:function(e,t){return this.each((function(){y.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return y.event.trigger(e,t,n,!0)}}),y.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){y.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}})),y.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),h.focusin="onfocusin"in e,h.focusin||y.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){y.event.simulate(t,e.target,y.event.fix(e))};y.event.special[t]={setup:function(){var r=this.ownerDocument||this,o=W.access(r,t);o||r.addEventListener(e,n,!0),W.access(r,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this,o=W.access(r,t)-1;o?W.access(r,t,o):(r.removeEventListener(e,n,!0),W.remove(r,t))}}}));var ft=e.location,ht=y.now(),mt=/\?/;y.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||y.error("Invalid XML: "+t),n};var gt=/\[\]$/,yt=/\r?\n/g,vt=/^(?:submit|button|image|reset|file)$/i,bt=/^(?:input|select|textarea|keygen)/i;function xt(e,t,n,r){var o;if(y.isArray(t))y.each(t,(function(t,o){n||gt.test(e)?r(e,o):xt(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,r)}));else if(n||"object"!==y.type(t))r(e,t);else for(o in t)xt(e+"["+o+"]",t[o],n,r)}y.param=function(e,t){var n,r=[],o=function(e,t){var n=y.isFunction(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(y.isArray(e)||e.jquery&&!y.isPlainObject(e))y.each(e,(function(){o(this.name,this.value)}));else for(n in e)xt(n,e[n],t,o);return r.join("&")},y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=y.prop(this,"elements");return e?y.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!y(this).is(":disabled")&&bt.test(this.nodeName)&&!vt.test(e)&&(this.checked||!ie.test(e))})).map((function(e,t){var n=y(this).val();return null==n?null:y.isArray(n)?y.map(n,(function(e){return{name:t.name,value:e.replace(yt,"\r\n")}})):{name:t.name,value:n.replace(yt,"\r\n")}})).get()}});var kt=/%20/g,wt=/#.*$/,Ct=/([?&])_=[^&]*/,$t=/^(.*?):[ \t]*([^\r\n]*)$/gm,Tt=/^(?:GET|HEAD)$/,St=/^\/\//,_t={},It={},Et="*/".concat("*"),At=r.createElement("a");function Nt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,o=0,i=t.toLowerCase().match(M)||[];if(y.isFunction(n))for(;r=i[o++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Ot(e,t,n,r){var o={},i=e===It;function a(s){var l;return o[s]=!0,y.each(e[s]||[],(function(e,s){var c=s(t,n,r);return"string"!=typeof c||i||o[c]?i?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)})),l}return a(t.dataTypes[0])||!o["*"]&&a("*")}function Lt(e,t){var n,r,o=y.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:r||(r={}))[n]=t[n]);return r&&y.extend(!0,e,r),e}At.href=ft.href,y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ft.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ft.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Et,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":y.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Lt(Lt(e,y.ajaxSettings),t):Lt(y.ajaxSettings,e)},ajaxPrefilter:Nt(_t),ajaxTransport:Nt(It),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var o,i,a,s,l,c,u,d,p,f,h=y.ajaxSetup({},n),m=h.context||h,g=h.context&&(m.nodeType||m.jquery)?y(m):y.event,v=y.Deferred(),b=y.Callbacks("once memory"),x=h.statusCode||{},k={},w={},C="canceled",$={readyState:0,getResponseHeader:function(e){var t;if(u){if(!s)for(s={};t=$t.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return u?a:null},setRequestHeader:function(e,t){return null==u&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,k[e]=t),this},overrideMimeType:function(e){return null==u&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)$.always(e[$.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||C;return o&&o.abort(t),T(0,t),this}};if(v.promise($),h.url=((t||h.url||ft.href)+"").replace(St,ft.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(M)||[""],null==h.crossDomain){c=r.createElement("a");try{c.href=h.url,c.href=c.href,h.crossDomain=At.protocol+"//"+At.host!=c.protocol+"//"+c.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=y.param(h.data,h.traditional)),Ot(_t,h,n,$),u)return $;for(p in(d=y.event&&h.global)&&0==y.active++&&y.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Tt.test(h.type),i=h.url.replace(wt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(kt,"+")):(f=h.url.slice(i.length),h.data&&(i+=(mt.test(i)?"&":"?")+h.data,delete h.data),!1===h.cache&&(i=i.replace(Ct,""),f=(mt.test(i)?"&":"?")+"_="+ht+++f),h.url=i+f),h.ifModified&&(y.lastModified[i]&&$.setRequestHeader("If-Modified-Since",y.lastModified[i]),y.etag[i]&&$.setRequestHeader("If-None-Match",y.etag[i])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&$.setRequestHeader("Content-Type",h.contentType),$.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Et+"; q=0.01":""):h.accepts["*"]),h.headers)$.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(!1===h.beforeSend.call(m,$,h)||u))return $.abort();if(C="abort",b.add(h.complete),$.done(h.success),$.fail(h.error),o=Ot(It,h,n,$)){if($.readyState=1,d&&g.trigger("ajaxSend",[$,h]),u)return $;h.async&&h.timeout>0&&(l=e.setTimeout((function(){$.abort("timeout")}),h.timeout));try{u=!1,o.send(k,T)}catch(e){if(u)throw e;T(-1,e)}}else T(-1,"No Transport");function T(t,n,r,s){var c,p,f,k,w,C=n;u||(u=!0,l&&e.clearTimeout(l),o=void 0,a=s||"",$.readyState=t>0?4:0,c=t>=200&&t<300||304===t,r&&(k=function(e,t,n){for(var r,o,i,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(o in s)if(s[o]&&s[o].test(r)){l.unshift(o);break}if(l[0]in n)i=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){i=o;break}a||(a=o)}i=i||a}if(i)return i!==l[0]&&l.unshift(i),n[i]}(h,$,r)),k=function(e,t,n,r){var o,i,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(i=u.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=i,i=u.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(!(a=c[l+" "+i]||c["* "+i]))for(o in c)if((s=o.split(" "))[1]===i&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[o]:!0!==c[o]&&(i=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+i}}}return{state:"success",data:t}}(h,k,$,c),c?(h.ifModified&&((w=$.getResponseHeader("Last-Modified"))&&(y.lastModified[i]=w),(w=$.getResponseHeader("etag"))&&(y.etag[i]=w)),204===t||"HEAD"===h.type?C="nocontent":304===t?C="notmodified":(C=k.state,p=k.data,c=!(f=k.error))):(f=C,!t&&C||(C="error",t<0&&(t=0))),$.status=t,$.statusText=(n||C)+"",c?v.resolveWith(m,[p,C,$]):v.rejectWith(m,[$,C,f]),$.statusCode(x),x=void 0,d&&g.trigger(c?"ajaxSuccess":"ajaxError",[$,h,c?p:f]),b.fireWith(m,[$,C]),d&&(g.trigger("ajaxComplete",[$,h]),--y.active||y.event.trigger("ajaxStop")))}return $},getJSON:function(e,t,n){return y.get(e,t,n,"json")},getScript:function(e,t){return y.get(e,void 0,t,"script")}}),y.each(["get","post"],(function(e,t){y[t]=function(e,n,r,o){return y.isFunction(n)&&(o=o||r,r=n,n=void 0),y.ajax(y.extend({url:e,type:t,dataType:o,data:n,success:r},y.isPlainObject(e)&&e))}})),y._evalUrl=function(e){return y.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},y.fn.extend({wrapAll:function(e){var t;return this[0]&&(y.isFunction(e)&&(e=e.call(this[0])),t=y(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return y.isFunction(e)?this.each((function(t){y(this).wrapInner(e.call(this,t))})):this.each((function(){var t=y(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=y.isFunction(e);return this.each((function(n){y(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){y(this).replaceWith(this.childNodes)})),this}}),y.expr.pseudos.hidden=function(e){return!y.expr.pseudos.visible(e)},y.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},y.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Dt={0:200,1223:204},Mt=y.ajaxSettings.xhr();h.cors=!!Mt&&"withCredentials"in Mt,h.ajax=Mt=!!Mt,y.ajaxTransport((function(t){var n,r;if(h.cors||Mt&&!t.crossDomain)return{send:function(o,i){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)s.setRequestHeader(a,o[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?i(0,"error"):i(s.status,s.statusText):i(Dt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout((function(){n&&r()}))},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}})),y.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return y.globalEval(e),e}}}),y.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),y.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain)return{send:function(o,i){t=y("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),r.head.appendChild(t[0])},abort:function(){n&&n()}}}));var jt,Pt=[],Rt=/(=)\?(?=&|$)|\?\?/;function Ft(e){return y.isWindow(e)?e:9===e.nodeType&&e.defaultView}y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Pt.pop()||y.expando+"_"+ht++;return this[e]=!0,e}}),y.ajaxPrefilter("json jsonp",(function(t,n,r){var o,i,a,s=!1!==t.jsonp&&(Rt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=y.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Rt,"$1"+o):!1!==t.jsonp&&(t.url+=(mt.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return a||y.error(o+" was not called"),a[0]},t.dataTypes[0]="json",i=e[o],e[o]=function(){a=arguments},r.always((function(){void 0===i?y(e).removeProp(o):e[o]=i,t[o]&&(t.jsonpCallback=n.jsonpCallback,Pt.push(o)),a&&y.isFunction(i)&&i(a[0]),a=i=void 0})),"script"})),h.createHTMLDocument=((jt=r.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===jt.childNodes.length),y.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(h.createHTMLDocument?((o=(t=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,t.head.appendChild(o)):t=r),a=!n&&[],(i=_.exec(e))?[t.createElement(i[1])]:(i=he([e],t,a),a&&a.length&&y(a).remove(),y.merge([],i.childNodes)));var o,i,a},y.fn.load=function(e,t,n){var r,o,i,a=this,s=e.indexOf(" ");return s>-1&&(r=y.trim(e.slice(s)),e=e.slice(0,s)),y.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&y.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done((function(e){i=arguments,a.html(r?y("<div>").append(y.parseHTML(e)).find(r):e)})).always(n&&function(e,t){a.each((function(){n.apply(this,i||[e.responseText,t,e])}))}),this},y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){y.fn[t]=function(e){return this.on(t,e)}})),y.expr.pseudos.animated=function(e){return y.grep(y.timers,(function(t){return e===t.elem})).length},y.offset={setOffset:function(e,t,n){var r,o,i,a,s,l,c=y.css(e,"position"),u=y(e),d={};"static"===c&&(e.style.position="relative"),s=u.offset(),i=y.css(e,"top"),l=y.css(e,"left"),("absolute"===c||"fixed"===c)&&(i+l).indexOf("auto")>-1?(a=(r=u.position()).top,o=r.left):(a=parseFloat(i)||0,o=parseFloat(l)||0),y.isFunction(t)&&(t=t.call(e,n,y.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+o),"using"in t?t.using.call(e,d):u.css(d)}},y.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){y.offset.setOffset(this,e,t)}));var t,n,r,o,i=this[0];return i?i.getClientRects().length?(r=i.getBoundingClientRect()).width||r.height?(n=Ft(o=i.ownerDocument),t=o.documentElement,{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===y.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),y.nodeName(e[0],"html")||(r=e.offset()),r={top:r.top+y.css(e[0],"borderTopWidth",!0),left:r.left+y.css(e[0],"borderLeftWidth",!0)}),{top:t.top-r.top-y.css(n,"marginTop",!0),left:t.left-r.left-y.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===y.css(e,"position");)e=e.offsetParent;return e||me}))}}),y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;y.fn[e]=function(r){return q(this,(function(e,r,o){var i=Ft(e);if(void 0===o)return i?i[t]:e[r];i?i.scrollTo(n?i.pageXOffset:o,n?o:i.pageYOffset):e[r]=o}),e,r,arguments.length)}})),y.each(["top","left"],(function(e,t){y.cssHooks[t]=Re(h.pixelPosition,(function(e,n){if(n)return n=Pe(e,t),Me.test(n)?y(e).position()[t]+"px":n}))})),y.each({Height:"height",Width:"width"},(function(e,t){y.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){y.fn[r]=function(o,i){var a=arguments.length&&(n||"boolean"!=typeof o),s=n||(!0===o||!0===i?"margin":"border");return q(this,(function(t,n,o){var i;return y.isWindow(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===o?y.css(t,n,s):y.style(t,n,o,s)}),t,a?o:void 0,a)}}))})),y.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),y.parseJSON=JSON.parse;var Ut=e.jQuery,Ht=e.$;return y.noConflict=function(t){return e.$===y&&(e.$=Ht),t&&e.jQuery===y&&(e.jQuery=Ut),y},t||(e.jQuery=e.$=y),y}))),D.exports;var e}var j;var P,R={};function F(){return P||(P=1,function(e){e.gritter={},e.gritter.options={position:"",class_name:"",time:3e3},e.gritter.add=function(e){try{return t.add(e||{})}catch(t){var n="Gritter Error: "+t;"undefined"!=typeof console&&console.error?console.error(n,e):alert(n)}},e.gritter.remove=function(e,n){t.removeSpecific(e.split("gritter-item-")[1],n||{})},e.gritter.removeAll=function(e){t.stop(e||{})};var t={time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_wrap_top:'<div id="gritter-container" class="top"></div>',_tpl_wrap_bottom:'<div id="gritter-container" class="bottom"></div>',_tpl_close:"",_tpl_title:e("<h3>").addClass("gritter-title"),_tpl_item:e("<div>").addClass("popup gritter-item").append(e("<div>").addClass("popup-content").append(e("<div>").addClass("gritter-content")).append(e("<div>").addClass("gritter-close").append(e("<i>").addClass("buttonicon buttonicon-times")))),add:function(n){if("string"==typeof n&&(n={text:n}),!n.text)throw'You must supply "text" parameter.';this._is_setup||this._runSetup();var r=n.title,o=n.text;n.image;var i=n.position||"top",a=n.sticky||!1,s=n.class_name||e.gritter.options.class_name,l=n.time||"";this._verifyWrapper(),a&&(s+=" sticky"),this._item_count++;var c=this._item_count;e(["before_open","after_open","before_close","after_close"]).each((function(r,o){t["_"+o+"_"+c]=e.isFunction(n[o])?n[o]:function(){}})),this._custom_timer=0,l&&(this._custom_timer=l),r=r?this._tpl_title.clone().append("string"==typeof r?document.createTextNode(r):r):"";const u=this._tpl_item.clone();if(u.attr("id",`gritter-item-${c}`),u.addClass(s),u.find(".gritter-content").append(r).append("string"==typeof o?e("<p>").text(o):o),!1===this["_before_open_"+c]())return!1;-1==["top","bottom"].indexOf(i)&&(i="top"),e("#gritter-container."+i).append(u);var d=e("#gritter-item-"+this._item_count);return setTimeout((function(){d.addClass("popup-show")}),0),t["_after_open_"+c](d),a||(this._setFadeTimer(d,c),e(d).on("mouseenter",(function(n){t._restoreItemIfFading(e(this),c)})),e(d).on("mouseleave",(function(n){t._setFadeTimer(e(this),c)}))),e(d).find(".gritter-close").click((function(){t.removeSpecific(c,{},null,!0)})),c},_countRemoveWrapper:function(t,n,r){n.remove(),this["_after_close_"+t](n,r),e("#gritter-container").each((function(){0==e(this).find(".gritter-item").length&&e(this).remove()}))},_fade:function(e,n,r,o){var i=void 0===(r=r||{}).fade||r.fade,a=o;this["_before_close_"+n](e,a),o&&e.unbind("mouseenter mouseleave"),i?(e.removeClass("popup-show"),setTimeout((function(){t._countRemoveWrapper(n,e,a)}),300)):this._countRemoveWrapper(n,e)},removeSpecific:function(t,n,r,o){if(!r)r=e("#gritter-item-"+t);this._fade(r,t,n||{},o)},_restoreItemIfFading:function(e,t){clearTimeout(this["_int_id_"+t]),e.stop().css({opacity:"",height:""})},_runSetup:function(){for(opt in e.gritter.options)this[opt]=e.gritter.options[opt];this._is_setup=1},_setFadeTimer:function(e,n){var r=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+n]=setTimeout((function(){t._fade(e,n)}),r)},stop:function(t){var n=e.isFunction(t.before_close)?t.before_close:function(){},r=e.isFunction(t.after_close)?t.after_close:function(){},o=e("#gritter-container");n(o),o.fadeOut((function(){e(this).remove(),r()}))},_verifyWrapper:function(){0===e("#gritter-container.top").length&&e("#editorcontainerbox").append(this._tpl_wrap_top),0===e("#gritter-container.bottom").length&&e("#editorcontainerbox").append(this._tpl_wrap_bottom)}}}(jQuery)),R}var U,H,q={};var V,B={};function W(){if(V)return B;V=1;const e=Ze().Cookies;return B.padcookie=new class{constructor(){this.cookieName_="https:"===window.location.protocol?"prefs":"prefsHttp"}init(){const e=this.readPrefs_()||{};delete e.userId,delete e.name,delete e.colorId,this.writePrefs_(e),null==this.readPrefs_()&&$.gritter.add({title:"Error",text:html10n.get("pad.noCookie"),sticky:!0,class_name:"error"})}readPrefs_(){try{const t=e.get(this.cookieName_);return null==t?null:JSON.parse(t)}catch(e){return null}}writePrefs_(t){e.set(this.cookieName_,JSON.stringify(t),{expires:36500})}getPref(e){return this.readPrefs_()[e]}setPref(e,t){const n=this.readPrefs_();n[e]=t,this.writePrefs_(n)}clear(){this.writePrefs_({})}},B}var z,G={exports:{}};
/*!
 * Tinycon - A small library for manipulating the Favicon
 * Tom Moor, http://tommoor.com
 * Copyright (c) 2015 Tom Moor
 * @license MIT Licensed
 */function J(){return z||(z=1,e=G,n={},r=null,o=null,i=null,a=null,s={},l=Math.ceil(window.devicePixelRatio)||1,c=16*l,u={width:7,height:9,font:10*l+"px arial",color:"#ffffff",background:"#F03D25",fallback:!0,crossOrigin:!0,abbreviate:!0},t=navigator.userAgent.toLowerCase(),d=function(e){return-1!==t.indexOf(e)},p=d("trident"),d("chrome"),f=d("chrome")||d("safari"),h=d("safari")&&!d("chrome"),m=d("mozilla")&&!d("chrome")&&!d("safari"),g=function(){if(!o||!r){var e=function(){for(var e=document.getElementsByTagName("link"),t=0,n=e.length;t<n;t++)if((e[t].getAttribute("rel")||"").match(/\bicon\b/i))return e[t];return!1}();r=e?e.getAttribute("href"):"/favicon.ico",o||(o=r)}return r},y=function(){return a||((a=document.createElement("canvas")).width=c,a.height=c),a},v=function(e){if(e){!function(){for(var e=document.getElementsByTagName("link"),t=0,n=e.length;t<n;t++)void 0!==e[t]&&(e[t].getAttribute("rel")||"").match(/\bicon\b/i)&&e[t].parentNode.removeChild(e[t])}();var t=document.createElement("link");t.type="image/x-icon",t.rel="icon",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}},b=function(e){if(s.fallback){var t=document.title;"("===t[0]&&(t=t.slice(t.indexOf(" "))),document.title=(e+"").length>0?"("+e+") "+t:t}},x=function(e,t,n){"number"==typeof t&&t>99&&s.abbreviate&&(t=w(t));var r=(t+"").length-1,o=s.width*l+6*l*r,i=s.height*l,a=c-i,u=c-o-l,d=16*l,p=16*l,h=2*l;e.font=(f?"bold ":"")+s.font,e.fillStyle=s.background,e.strokeStyle=s.background,e.lineWidth=l,e.beginPath(),e.moveTo(u+h,a),e.quadraticCurveTo(u,a,u,a+h),e.lineTo(u,d-h),e.quadraticCurveTo(u,d,u+h,d),e.lineTo(p-h,d),e.quadraticCurveTo(p,d,p,d-h),e.lineTo(p,a+h),e.quadraticCurveTo(p,a,p-h,a),e.closePath(),e.fill(),e.beginPath(),e.strokeStyle="rgba(0,0,0,0.3)",e.moveTo(u+h/2,d),e.lineTo(p-h/2,d),e.stroke(),e.fillStyle=s.color,e.textAlign="right",e.textBaseline="top",e.fillText(t,2===l?29:15,m?7*l:6*l)},k=function(){y().getContext&&v(y().toDataURL())},w=function(e){for(var t=[["G",1e9],["M",1e6],["k",1e3]],n=0;n<t.length;++n)if(e>=t[n][1]){e=C(e/t[n][1])+t[n][0];break}return e},C=function(e,t){return new Number(e).toFixed(t)},n.setOptions=function(e){for(var t in s={},e.colour&&(e.color=e.colour),u)s[t]=e.hasOwnProperty(t)?e[t]:u[t];return this},n.setImage=function(e){return r=e,k(),this},n.setBubble=function(e,t){return function(e,t){if(!y().getContext||p||h||"force"===s.fallback)return b(e);var n=y().getContext("2d"),r=g();(i=document.createElement("img")).onload=function(){n.clearRect(0,0,c,c),n.drawImage(i,0,0,i.width,i.height,0,0,c,c),(e+"").length>0&&x(n,e),k()},!r.match(/^data/)&&s.crossOrigin&&(i.crossOrigin="anonymous"),i.src=r}(e=e||""),this},n.reset=function(){r=o,v(o)},n.setOptions(u),e.exports=n),G.exports;var e,t,n,r,o,i,a,s,l,c,u,d,p,f,h,m,g,y,v,b,x,k,w,C}var X,Y,K={},Q={};function Z(){return X||(X=1,Q.hooks={},Q.loaded=!1,Q.parts=[],Q.plugins={}),Q}function ee(){return Y||(Y=1,function(e){const t=Z();e.deprecationNotices={};const n={},r=t=>{const r=e.deprecationNotices[t.hook_name];null!=r&&(n[t.hook_fn_name]||(console.warn(`${t.hook_name} hook used by the ${t.part.plugin} plugin (${t.hook_fn_name}) is deprecated: ${r}`),n[t.hook_fn_name]=!0))},o=(e,t)=>e.then((e=>t(null,e)),(e=>t(e||new Error(e)))),i=e=>void 0===e?[]:Array.isArray(e)?e:[e],a=e=>e.reduce(((e,t)=>e.concat(t)),[]),s=(e,t)=>{let n,o;r(e);const i=(t,r,i)=>{o=null;const a=null==t?"resolved":"rejected";if(null==n)n={state:a,err:t,val:r,how:i},r&&"function"==typeof r.then&&console.error(`PROHIBITED PROMISE BUG IN HOOK FUNCTION (plugin: ${e.part.plugin}, function name: ${e.hook_fn_name}, hook: ${e.hook_name}): The hook function provided a "thenable" (e.g., a Promise) which is prohibited because the hook expects to get the value synchronously.`);else{const s=null==t?"resolve":"reject",l=`DOUBLE SETTLE BUG IN HOOK FUNCTION (plugin: ${e.part.plugin}, function name: ${e.hook_fn_name}, hook: ${e.hook_name}): Attempt to ${s} via ${i} but it already ${n.state} via ${n.how}. Ignoring this attempt to ${s}.`;if(console.error(l),a!==n.state||(null==t?r!==n.val:t!==n.err))throw o=new Error(l),o}},a=e=>{i(null,e,"callback")};let s;try{s=e.hook_fn(e.hook_name,t,a)}catch(e){if(e===o)throw e;try{i(e,null,"thrown exception")}catch(o){Promise.resolve().then((()=>{throw o}))}throw e}if(void 0===s){if(null!=n)return n.val;e.hook_fn.length>=3&&console.error(`UNSETTLED FUNCTION BUG IN HOOK FUNCTION (plugin: ${e.part.plugin}, function name: ${e.hook_fn_name}, hook: ${e.hook_name}): The hook function neither called the callback nor returned a non-undefined value. This is prohibited because it will result in freezes when a future version of Etherpad updates the hook to support asynchronous behavior.`)}return i(null,s,"returned value"),n.val};e.callAll=(e,n)=>{null==n&&(n={});const r=t.hooks[e]||[];return a(r.map((e=>i(s(e,n)))))};const l=async(e,t)=>(r(e),await new Promise(((n,r)=>{let o;const i=(t,i,a)=>{const s=null==t?"resolved":"rejected";if(null==o)o={state:s,err:t,val:i,how:a},null==t?n(i):r(t);else{const n=null==t?"resolve":"reject",r=`DOUBLE SETTLE BUG IN HOOK FUNCTION (plugin: ${e.part.plugin}, function name: ${e.hook_fn_name}, hook: ${e.hook_name}): Attempt to ${n} via ${a} but it already ${o.state} via ${o.how}. Ignoring this attempt to ${n}.`;if(console.error(r),s!==o.state||(null==t?i!==o.val:t!==o.err))throw new Error(r)}},a=e=>{Promise.resolve(e).then((e=>i(null,e,"callback")),(e=>i(e,null,"rejected Promise passed to callback")))};let s;try{s=e.hook_fn(e.hook_name,t,a)}catch(e){try{i(e,null,"thrown exception")}catch(e){Promise.resolve().then((()=>{throw e}))}throw e}void 0===s&&e.hook_fn.length>=3||Promise.resolve(s).then((e=>i(null,e,"returned value")),(e=>i(e,null,"Promise rejection")))})));e.aCallAll=async(n,r,s=null)=>{if(null!=s)return await o(e.aCallAll(n,r),s);null==r&&(r={});const c=t.hooks[n]||[],u=await Promise.all(c.map((async e=>i(await l(e,r)))));return a(u)},e.callAllSerial=async(e,n)=>{null==n&&(n={});const r=t.hooks[e]||[],o=[];for(const e of r)o.push(i(await l(e,n)));return a(o)},e.callFirst=(e,n)=>{null==n&&(n={});const r=e=>e.length,o=t.hooks[e]||[];for(const e of o){const t=i(s(e,n));if(r(t))return t}return[]},e.aCallFirst=async(n,r,a=null,s=null)=>{if(null!=a)return await o(e.aCallFirst(n,r,null,s),a);null==r&&(r={}),null==s&&(s=e=>e.length);const c=t.hooks[n]||[];for(const e of c){const t=i(await l(e,r));if(s(t))return t}return[]},e.exportedForTestingOnly={callHookFnAsync:l,callHookFnSync:s,deprecationWarned:n}}(K)),K}var te,ne={},re={exports:{}},oe={};function ie(){return te||(te=1,oe.makeCSSManager=e=>{const t=()=>e.cssRules||e.rules,n=[],r=e=>{for(let t=0;t<n.length;t++)if(n[t]===e)return t;return-1};return{selectorStyle:o=>{let i=r(o);return i<0&&(((t,n)=>{e.insertRule?e.insertRule(`${n} {}`,t):e.addRule(n,null,t)})(0,o),n.splice(0,0,o),i=0),t().item(i).style},removeSelectorStyle:t=>{const o=r(t);o>=0&&((t=>{e.deleteRule?e.deleteRule(t):e.removeRule(t)})(o),n.splice(o,1))},info:()=>`${n.length}:${t().length}`}}),oe}var ae,se,le,ce,ue={};function de(){if(ae)return ue;ae=1;const e=Z(),t={hooks:{indexCustomInlineScripts:"The hook makes it impossible to use a Content Security Policy that prohibits inline code. Permitting inline code makes XSS vulnerabilities more likely"}},n=(e,t)=>{let n;const r=e.split(":");1===r[0].length?(3===r.length&&(n=r.pop()),e=r.join(":")):(e=r[0],n=r[1]);let o=function(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}(e);n=n||t;for(const e of n.split("."))o=o[e];return o};return ue.extractHooks=(e,r,o)=>{const i={};for(const a of e)for(const[e,s]of Object.entries(a[r]||{})){const l=o?o(a,s,e):s,c=(t[r]||{})[e];if(c)return console.error(`Hook ${r}/${e} is disabled. Reason: ${c}`),console.error(`The hook function ${l} from plugin ${a.plugin} will never be called, which may cause the plugin to fail`),void console.error(`Please update the ${a.plugin} plugin to not use the ${e} hook`);let u;try{if(u=n(l,e),!u)throw new Error("Not a function")}catch(t){console.error(`Failed to load hook function "${l}" for plugin "${a.plugin}" part "${a.name}" hook set "${r}" hook "${e}": ${t.stack||t}`)}u&&(null==i[e]&&(i[e]=[]),i[e].push({hook_name:e,hook_fn:u,hook_fn_name:l,part:a}))}return i},ue.clientPluginNames=()=>{const t=e.parts.filter((e=>Object.prototype.hasOwnProperty.call(e,"client_hooks"))).map((e=>`plugin-${e.plugin}`));return[...new Set(t)]},ue}function pe(){return se||(se=1,function(e,t){const n=ee(),r=ie().makeCSSManager,o=de(),i=e=>{const t=clientVars.staticRootAddress;return new URL(t+e,window.location.href).href},a=async(e,t,n=[],r=(()=>!0))=>{"function"==typeof n&&(r=n,n=[]),await new Promise(((o,i)=>{let a;const s=()=>{r()&&(a(),o())},l=()=>{const e=new Error(`Ace2Editor.init() error event while waiting for ${t} event`);a(),i(e)};a=()=>{a=()=>{},e.removeEventListener(t,s),e.removeEventListener("error",l)},n.push(a),e.addEventListener(t,s),e.addEventListener("error",l)}))},s=async e=>{const t=()=>e.contentDocument,n=[];try{await Promise.race([a(e,"load",n),a(e.contentWindow,"load",n),a(t(),"load",n),a(t(),"DOMContentLoaded",n),a(t(),"readystatechange",n,(()=>"complete"===t.readyState))])}finally{for(const e of n)e()}};t.Ace2Editor=function(){let e={editor:this},t=!1,l=[];const c=e=>function(...n){const r=()=>e.apply(this,n);if(t)return r();l.push(r)},u=["importText","importAText","focus","setEditable","setOnKeyPress","setOnKeyDown","setNotifyDirty","setProperty","setBaseText","setBaseAttributedText","applyChangesToBase","applyPreparedChangesetToBase","setUserChangeNotificationCallback","setAuthorInfo","callWithAce","execCommand","replaceRange"];for(const t of u)this[t]=c((function(...n){e[`ace_${t}`].apply(this,n)}));this.exportText=()=>t?e.ace_exportText():"(awaiting init)\n",this.getInInternationalComposition=()=>t?e.ace_getInInternationalComposition():null,this.prepareUserChangeset=()=>t?e.ace_prepareUserChangeset():null;const d=(e,t)=>{for(const n of t){const t=e.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=i(encodeURI(n)),e.head.appendChild(t)}};this.destroy=c((()=>{e.ace_dispose(),e.frame.parentNode.removeChild(e.frame),e=null})),this.init=async function(c,u){this.importText(u);const p=[`../static/css/iframe_editor.css?v=${clientVars.randomVersionString}`,`../static/css/pad.css?v=${clientVars.randomVersionString}`,...n.callAll("aceEditorCSS").map((e=>/\/\//.test(e)?e:`../static/plugins/${e}`)),`../static/skins/${clientVars.skinName}/pad.css?v=${clientVars.randomVersionString}`],f=clientVars.skinVariants.split(" ").filter((e=>""!==e)),h=document.createElement("iframe");h.name="ace_outer",h.frameBorder=0,h.title="Ether",h.srcdoc="<!DOCTYPE html>",e.frame=h,document.getElementById(c).appendChild(h);const m=h.contentWindow;await s(h);const g=m.document;g.documentElement.classList.add("outer-editor","outerdoc",...f),d(g,p);const y=g.createElement("style");y.type="text/css",y.title="dynamicsyntax",g.head.appendChild(y),g.body.id="outerdocbody",g.body.classList.add("outerdocbody",...o.clientPluginNames());const v=g.createElement("div");v.id="sidediv",v.classList.add("sidediv"),g.body.appendChild(v);const b=g.createElement("div");b.id="sidedivinner",b.classList.add("sidedivinner"),v.appendChild(b);const x=g.createElement("div");x.id="linemetricsdiv",x.appendChild(g.createTextNode("x")),g.body.appendChild(x);const k=g.createElement("iframe");k.name="ace_inner",k.title="pad",k.scrolling="no",k.frameBorder=0,k.allowTransparency=!0,k.srcdoc="<!DOCTYPE html>",g.body.insertBefore(k,g.body.firstChild);const w=k.contentWindow;await s(k);const C=w.document;C.documentElement.classList.add("inner-editor",...f),d(C,p);const $=C.createElement("script");$.type="text/javascript",$.src=i(`../static/js/require-kernel.js?v=${clientVars.randomVersionString}`),C.head.appendChild($);for(const e of["ace2_inner","ace2_common"]){const t=C.createElement("script");t.type="text/javascript",t.src=i(`../javascripts/lib/ep_etherpad-lite/static/js/${e}.js?callback=require.define&v=${clientVars.randomVersionString}`),C.head.appendChild(t)}const T=C.createElement("style");T.type="text/css",T.title="dynamicsyntax",C.head.appendChild(T);const S=[];n.callAll("aceInitInnerdocbodyHead",{iframeHTML:S}),C.head.appendChild(C.createRange().createContextualFragment(S.join("\n"))),C.body.id="innerdocbody",C.body.classList.add("innerdocbody"),C.body.setAttribute("spellcheck","false"),C.body.appendChild(C.createTextNode(" ")),await a($,"load");const _=w.require;_.setRootURI(i("../javascripts/src")),_.setLibraryURI(i("../javascripts/lib")),_.setGlobalKeyPath("require"),w.Ace2Inner=_("ep_etherpad-lite/static/js/ace2_inner"),w.plugins=_("ep_etherpad-lite/static/js/pluginfw/client_plugins"),w.plugins.adoptPluginsFromAncestorsOf(w),w.$=w.jQuery=_("ep_etherpad-lite/static/js/rjquery").jQuery,await new Promise(((e,t)=>w.plugins.ensure((n=>null!=n?t(n):e())))),await w.Ace2Inner.init(e,{inner:r(T.sheet),outer:r(y.sheet),parent:r(document.querySelector('style[title="dynamicsyntax"]').sheet)}),t=!0,(()=>{for(const e of l)e();l=[]})()}}}(0,re.exports)),re.exports}function fe(){return le||(le=1,function(e){const t=Ze().Cookies,n=W().padcookie,r=Ze().padutils,o=(()=>{let o,i,a;const s={ace:null,viewZoom:100,init:async(t,n)=>{o=pe().Ace2Editor,i=n,a=i.settings,s.ace=new o,await s.ace.init("editorcontainer",""),$("#editorloadingbox").hide();$('iframe[name="ace_outer"]').contents().find("#outerdocbody").find("#sidedivinner").on("click","div",(function(){const e=$(this).index()+1;window.location.hash=`L${e}`})),e.focusOnLine(s.ace),s.ace.setProperty("wraps",!0),s.initViewOptions(),s.setViewOptions(t),$("#viewbarcontents").show()},initViewOptions:()=>{r.bindCheckboxChange($("#options-linenoscheck"),(()=>{i.changeViewOption("showLineNumbers",r.getCheckbox($("#options-linenoscheck")))})),r.bindCheckboxChange($("#options-colorscheck"),(()=>{n.setPref("showAuthorshipColors",r.getCheckbox("#options-colorscheck")),i.changeViewOption("showAuthorColors",r.getCheckbox("#options-colorscheck"))})),r.bindCheckboxChange($("#options-rtlcheck"),(()=>{i.changeViewOption("rtlIsTrue",r.getCheckbox($("#options-rtlcheck")))})),html10n.bind("localized",(()=>{i.changeViewOption("rtlIsTrue","rtl"===html10n.getDirection()),r.setCheckbox($("#options-rtlcheck"),"rtl"===html10n.getDirection())})),$("#viewfontmenu").change((()=>{i.changeViewOption("padFontFamily",$("#viewfontmenu").val())})),html10n.bind("localized",(()=>{$("#languagemenu").val(html10n.getLanguage()),$("input[data-l10n-id]").each(((e,t)=>{(t=$(t)).hasClass("editempty")&&t.val(html10n.get(t.attr("data-l10n-id")))}))})),$("#languagemenu").val(html10n.getLanguage()),$("#languagemenu").change((()=>{t.set("language",$("#languagemenu").val()),window.html10n.localize([$("#languagemenu").val(),"en"]),$("select").niceSelect&&$("select").niceSelect("update")}))},setViewOptions:e=>{const t=(t,n)=>{const r=String(e[t]);return"true"===r||"false"!==r&&n};let n;n=t("rtlIsTrue","rtl"===html10n.getDirection()),s.ace.setProperty("rtlIsTrue",n),r.setCheckbox($("#options-rtlcheck"),n),n=t("showLineNumbers",!0),s.ace.setProperty("showslinenumbers",n),r.setCheckbox($("#options-linenoscheck"),n),n=t("showAuthorColors",!0),s.ace.setProperty("showsauthorcolors",n),$("#chattext").toggleClass("authorColors",n),$('iframe[name="ace_outer"]').contents().find("#sidedivinner").toggleClass("authorColors",n),r.setCheckbox($("#options-colorscheck"),n),!1!==a.noColors&&s.ace.setProperty("showsauthorcolors",!a.noColors),s.ace.setProperty("textface",e.padFontFamily||"")},dispose:()=>{s.ace&&(s.ace.destroy(),s.ace=null)},enable:()=>{s.ace&&s.ace.setEditable(!0)},disable:()=>{s.ace&&s.ace.setEditable(!1)},restoreRevisionText:e=>{i.addHistoricalAuthors(e.historicalAuthorData),s.ace.importAText(e.atext,e.apool,!0)}};return s})();e.padeditor=o,e.focusOnLine=e=>{const t=window.location.hash.substr(1);if(t&&"L"===t[0]){const n=$('iframe[name="ace_outer"]').contents().find("#outerdocbody"),r=parseInt(t.substr(1));if(r){const t=$('iframe[name="ace_outer"]').contents().find("iframe").contents().find("#innerdocbody"),o=t.find(`div:nth-child(${r})`);if(0!==o.length){let r=o.offset().top;r+=parseInt(n.css("padding-top").replace("px",""));$("body").hasClass("mobile-layout")||(r+=parseInt(t.css("padding-top").replace("px","")));const i=$('iframe[name="ace_outer"]').contents().find("#outerdocbody").parent();n.css({top:`${r}px`}),i.animate({scrollTop:r});const a=o[0];e.callWithAce((e=>{const t={startPoint:{index:0,focusAtStart:!0,maxIndex:1,node:a},endPoint:{index:0,focusAtStart:!0,maxIndex:1,node:a}};e.ace_setSelection(t)}))}}}}}(ne)),ne}function he(){if(ce)return q;ce=1;const e=function(){if(H)return U;H=1;class e{static fromObject(t){return Object.assign(new e,t)}constructor(e=null,t=null,n=null){this.text=e,this.authorId=t,this.time=n,this.displayName=null}get userId(){return this.authorId}set userId(e){this.authorId=e}get userName(){return this.displayName}set userName(e){this.displayName=e}toJSON(){return{...this,authorId:void 0,displayName:void 0,userId:this.authorId,userName:this.displayName}}}return U=e}(),t=Ze().padutils,n=W().padcookie,r=J(),o=ee(),i=fe().padeditor,a=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase();return q.chat=(()=>{let s=!1,l=!1,c=0;return{show(){$("#chaticon").removeClass("visible"),$("#chatbox").addClass("visible"),this.scrollDown(!0),c=0,r.setBubble(0),$(".chat-gritter-msg").each((function(){$.gritter.remove(this.id)}))},focus:()=>{setTimeout((()=>{$("#chatinput").focus()}),100)},stickToScreen(e){pad.settings.hideChat||(this.show(),s=!s||e,$("#chatbox").hide(),setTimeout((()=>{$("#chatbox, .sticky-container").toggleClass("stickyChat",s),$("#chatbox").css("display","flex")}),0),n.setPref("chatAlwaysVisible",s),$("#options-stickychat").prop("checked",s))},chatAndUsers(e){$("#options-chatandusers").is(":checked")||!l||e?(this.stickToScreen(!0),$("#options-stickychat").prop("checked",!0),$("#options-chatandusers").prop("checked",!0),$("#options-stickychat").prop("disabled","disabled"),l=!0):($("#options-stickychat").prop("disabled",!1),l=!1),n.setPref("chatAndUsers",l),$("#users, .sticky-container").toggleClass("chatAndUsers popup-show stickyUsers",l),$("#chatbox").toggleClass("chatAndUsersChat",l)},hide(){$("#options-stickychat").prop("checked")?(this.stickToScreen(),$("#options-stickychat").prop("checked",!1)):($("#chatcounter").text("0"),$("#chaticon").addClass("visible"),$("#chatbox").removeClass("visible"))},scrollDown(e){$("#chatbox").hasClass("visible")&&(e||!this.lastMessage||!this.lastMessage.position()||this.lastMessage.position().top<$("#chattext").outerHeight()+20)&&($("#chattext").animate({scrollTop:$("#chattext")[0].scrollHeight},{duration:400,queue:!1}),this.lastMessage=$("#chattext > p").eq(-1))},async send(){const t=$("#chatinput").val();if(0===t.replace(/\s+/,"").length)return;const n=new e(t);await o.aCallAll("chatSendMessage",Object.freeze({message:n})),this._pad.collabClient.sendMessage({type:"CHAT_MESSAGE",message:n}),$("#chatinput").val("")},async addMessage(n,i,s){(n=e.fromObject(n)).time+=this._pad.clientTimeOffset,n.authorId||(n.authorId="unknown",console.warn('The "authorId" field of a chat message coming from the server was not present. Replacing with "unknown". This may be a bug or a database corruption.'));const l={authorName:null!=n.displayName?n.displayName:html10n.get("pad.userlist.unnamed"),author:n.authorId,text:t.escapeHtmlWithClickableLinks(n.text,"_blank"),message:n,rendered:null,sticky:!1,timestamp:n.time,timeStr:(()=>{let e=`${new Date(n.time).getMinutes()}`,t=`${new Date(n.time).getHours()}`;return 1===e.length&&(e=`0${e}`),1===t.length&&(t=`0${t}`),`${t}:${e}`})(),duration:4e3},u=$("#chatinput").is(":focus"),d=$("#chatbox").hasClass("visible");!(n.authorId!==window.clientVars.userId&&l.authorName!==html10n.get("pad.userlist.unnamed")&&a(l.text).includes(a(l.authorName)))||u||s||d||(c++,r.setBubble(c),l.sticky=!0),await o.aCallAll("chatNewMessage",l);const p=`author-${l.author.replace(/[^a-y0-9]/g,(e=>"."===e?"-":`z${e.charCodeAt(0)}z`))}`;const f=null!=l.rendered?$(l.rendered):$("<p>").attr("data-authorId",l.author).addClass(p).append($("<b>").text(`${l.authorName}:`)).append($("<span>").addClass("time").addClass(p).html(l.timeStr)).append(" ").append($("<div>").html(l.text).contents());if(s?f.insertAfter("#chatloadmessagesbutton"):$("#chattext").append(f),f.each(((e,t)=>html10n.translateElement(html10n.translations,t))),i&&!s){let e=Number($("#chatcounter").text());if(e++,$("#chatcounter").text(e),!d&&l.duration>0){const e=$("<p>").append($("<span>").addClass("author-name").text(l.authorName)).append($("<div>").html(l.text).contents());e.each(((e,t)=>html10n.translateElement(html10n.translations,t))),$.gritter.add({text:e,sticky:l.sticky,time:l.duration,position:"bottom",class_name:"chat-gritter-msg"})}}s||this.scrollDown()},init(e){this._pad=e,$("#chatinput").on("keydown",(e=>{if(!0===e.altKey&&67===e.which||27===e.which)return $(":focus").blur(),i.ace.focus(),e.preventDefault(),!1})),$("#chatinput").click((()=>{c=0,r.setBubble(0)}));const t=this;$("body:not(#chatinput)").on("keypress",(function(e){e.altKey&&67===e.which&&($(this).blur(),t.show(),$("#chatinput").focus(),e.preventDefault())})),$("#chatinput").keypress((e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),this.send())})),$("#chatcounter").text(0),$("#chatloadmessagesbutton").click((()=>{const t=Math.max(this.historyPointer-20,0),n=this.historyPointer;t!==n&&($("#chatloadmessagesbutton").css("display","none"),$("#chatloadmessagesball").css("display","block"),e.collabClient.sendMessage({type:"GET_CHAT_MESSAGES",start:t,end:n}),this.historyPointer=t)}))}}})(),q}var me,ge,ye={},ve={exports:{}};function be(){return me||(me=1,e=ve,function(t,n){e.exports?e.exports=n():this.bowser=n()}(0,(function(){var e=!0;function t(t){function n(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}var r,o,i,a=n(/(ipod|iphone|ipad)/i).toLowerCase(),s=!/like android/i.test(t)&&/android/i.test(t),l=/CrOS/.test(t),c=/silk/i.test(t),u=/sailfish/i.test(t),d=/tizen/i.test(t),p=/(web|hpw)os/i.test(t),f=/windows phone/i.test(t),h=!f&&/windows/i.test(t),m=!a&&!c&&/macintosh/i.test(t),g=!s&&!u&&!d&&!p&&/linux/i.test(t),y=n(/edge\/(\d+(\.\d+)?)/i),v=n(/version\/(\d+(\.\d+)?)/i),b=/tablet/i.test(t),x=!b&&/[^-]mobi/i.test(t);/opera|opr/i.test(t)?r={name:"Opera",opera:e,version:v||n(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(t)?r={name:"Yandex Browser",yandexbrowser:e,version:v||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:f?(r={name:"Windows Phone",windowsphone:e},y?(r.msedge=e,r.version=y):(r.msie=e,r.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?r={name:"Internet Explorer",msie:e,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:l?r={name:"Chrome",chromeos:e,chromeBook:e,chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(t)?r={name:"Microsoft Edge",msedge:e,version:y}:/chrome|crios|crmo/i.test(t)?r={name:"Chrome",chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:a?(r={name:"iphone"==a?"iPhone":"ipad"==a?"iPad":"iPod"},v&&(r.version=v)):u?r={name:"Sailfish",sailfish:e,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?r={name:"SeaMonkey",seamonkey:e,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(t)?(r={name:"Firefox",firefox:e,version:n(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(r.firefoxos=e)):c?r={name:"Amazon Silk",silk:e,version:n(/silk\/(\d+(\.\d+)?)/i)}:s?r={name:"Android",version:v}:/phantom/i.test(t)?r={name:"PhantomJS",phantom:e,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?r={name:"BlackBerry",blackberry:e,version:v||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:p?(r={name:"WebOS",webos:e,version:v||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(r.touchpad=e)):r=/bada/i.test(t)?{name:"Bada",bada:e,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:d?{name:"Tizen",tizen:e,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||v}:/safari/i.test(t)?{name:"Safari",safari:e,version:v}:{name:n(/^(.*)\/(.*) /),version:(o=/^(.*)\/(.*) /,i=t.match(o),i&&i.length>1&&i[2]||"")},!r.msedge&&/(apple)?webkit/i.test(t)?(r.name=r.name||"Webkit",r.webkit=e,!r.version&&v&&(r.version=v)):!r.opera&&/gecko\//i.test(t)&&(r.name=r.name||"Gecko",r.gecko=e,r.version=r.version||n(/gecko\/(\d+(\.\d+)?)/i)),r.msedge||!s&&!r.silk?a?(r[a]=e,r.ios=e):h?r.windows=e:m?r.mac=e:g&&(r.linux=e):r.android=e;var k="";r.windowsphone?k=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):a?k=(k=n(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):s?k=n(/android[ \/-](\d+(\.\d+)*)/i):r.webos?k=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?k=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?k=n(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(k=n(/tizen[\/\s](\d+(\.\d+)*)/i)),k&&(r.osversion=k);var w=k.split(".")[0];return b||"ipad"==a||s&&(3==w||4==w&&!x)||r.silk?r.tablet=e:(x||"iphone"==a||"ipod"==a||s||r.blackberry||r.webos||r.bada)&&(r.mobile=e),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.chrome&&r.version>=20||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1?r.a=e:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6?r.c=e:r.x=e,r}var n=t("undefined"!=typeof navigator?navigator.userAgent:"");return n.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if("string"==typeof r&&r in n)return!0}return!1},n._detect=t,n}))),ve.exports;var e}var xe,ke={},we={},Ce={},$e={};function Te(){if(xe)return $e;let e;return xe=1,$e.saveNow=()=>{e.collabClient.sendMessage({type:"SAVE_REVISION"}),$.gritter.add({title:html10n.get("pad.savedrevs.marked"),text:html10n.get("pad.savedrevs.timeslider")||"You can view saved revisions in the timeslider",sticky:!1,time:3e3,class_name:"saved-revision"})},$e.init=t=>{e=t},$e}var Se,_e={exports:{}};function Ie(){return Se?_e.exports:(Se=1,_e.exports=function(){var e="1.13.1",t="object"==typeof self&&self.self===self&&self||"object"==typeof v&&v.global===v&&v||Function("return this")()||{},n=Array.prototype,r=Object.prototype,o="undefined"!=typeof Symbol?Symbol.prototype:null,i=n.push,a=n.slice,s=r.toString,l=r.hasOwnProperty,c="undefined"!=typeof ArrayBuffer,u="undefined"!=typeof DataView,d=Array.isArray,p=Object.keys,f=Object.create,h=c&&ArrayBuffer.isView,m=isNaN,g=isFinite,y=!{toString:null}.propertyIsEnumerable("toString"),b=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],x=Math.pow(2,53)-1;function k(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),o=0;o<n;o++)r[o]=arguments[o+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var i=Array(t+1);for(o=0;o<t;o++)i[o]=arguments[o];return i[t]=r,e.apply(this,i)}}function w(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function C(e){return null===e}function $(e){return void 0===e}function T(e){return!0===e||!1===e||"[object Boolean]"===s.call(e)}function S(e){return!(!e||1!==e.nodeType)}function _(e){var t="[object "+e+"]";return function(e){return s.call(e)===t}}var I=_("String"),E=_("Number"),A=_("Date"),N=_("RegExp"),O=_("Error"),L=_("Symbol"),D=_("ArrayBuffer"),M=_("Function"),j=t.document&&t.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof j&&(M=function(e){return"function"==typeof e||!1});var P=M,R=_("Object"),F=u&&R(new DataView(new ArrayBuffer(8))),U="undefined"!=typeof Map&&R(new Map),H=_("DataView");function q(e){return null!=e&&P(e.getInt8)&&D(e.buffer)}var V=F?q:H,B=d||_("Array");function W(e,t){return null!=e&&l.call(e,t)}var z=_("Arguments");!function(){z(arguments)||(z=function(e){return W(e,"callee")})}();var G=z;function J(e){return!L(e)&&g(e)&&!isNaN(parseFloat(e))}function X(e){return E(e)&&m(e)}function Y(e){return function(){return e}}function K(e){return function(t){var n=e(t);return"number"==typeof n&&n>=0&&n<=x}}function Q(e){return function(t){return null==t?void 0:t[e]}}var Z=Q("byteLength"),ee=K(Z),te=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function ne(e){return h?h(e)&&!V(e):ee(e)&&te.test(s.call(e))}var re=c?ne:Y(!1),oe=Q("length");function ie(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return{contains:function(e){return t[e]},push:function(n){return t[n]=!0,e.push(n)}}}function ae(e,t){t=ie(t);var n=b.length,o=e.constructor,i=P(o)&&o.prototype||r,a="constructor";for(W(e,a)&&!t.contains(a)&&t.push(a);n--;)(a=b[n])in e&&e[a]!==i[a]&&!t.contains(a)&&t.push(a)}function se(e){if(!w(e))return[];if(p)return p(e);var t=[];for(var n in e)W(e,n)&&t.push(n);return y&&ae(e,t),t}function le(e){if(null==e)return!0;var t=oe(e);return"number"==typeof t&&(B(e)||I(e)||G(e))?0===t:0===oe(se(e))}function ce(e,t){var n=se(t),r=n.length;if(null==e)return!r;for(var o=Object(e),i=0;i<r;i++){var a=n[i];if(t[a]!==o[a]||!(a in o))return!1}return!0}function ue(e){return e instanceof ue?e:this instanceof ue?void(this._wrapped=e):new ue(e)}function de(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,Z(e))}ue.VERSION=e,ue.prototype.value=function(){return this._wrapped},ue.prototype.valueOf=ue.prototype.toJSON=ue.prototype.value,ue.prototype.toString=function(){return String(this._wrapped)};var pe="[object DataView]";function fe(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;return("function"===o||"object"===o||"object"==typeof t)&&he(e,t,n,r)}function he(e,t,n,r){e instanceof ue&&(e=e._wrapped),t instanceof ue&&(t=t._wrapped);var i=s.call(e);if(i!==s.call(t))return!1;if(F&&"[object Object]"==i&&V(e)){if(!V(t))return!1;i=pe}switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return o.valueOf.call(e)===o.valueOf.call(t);case"[object ArrayBuffer]":case pe:return he(de(e),de(t),n,r)}var a="[object Array]"===i;if(!a&&re(e)){if(Z(e)!==Z(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;a=!0}if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var l=e.constructor,c=t.constructor;if(l!==c&&!(P(l)&&l instanceof l&&P(c)&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}r=r||[];for(var u=(n=n||[]).length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),a){if((u=e.length)!==t.length)return!1;for(;u--;)if(!fe(e[u],t[u],n,r))return!1}else{var d,p=se(e);if(u=p.length,se(t).length!==u)return!1;for(;u--;)if(!W(t,d=p[u])||!fe(e[d],t[d],n,r))return!1}return n.pop(),r.pop(),!0}function me(e,t){return fe(e,t)}function ge(e){if(!w(e))return[];var t=[];for(var n in e)t.push(n);return y&&ae(e,t),t}function ye(e){var t=oe(e);return function(n){if(null==n)return!1;var r=ge(n);if(oe(r))return!1;for(var o=0;o<t;o++)if(!P(n[e[o]]))return!1;return e!==Ce||!P(n[ve])}}var ve="forEach",be="has",xe=["clear","delete"],ke=["get",be,"set"],we=xe.concat(ve,ke),Ce=xe.concat(ke),$e=["add"].concat(xe,ve,be),Te=U?ye(we):_("Map"),Se=U?ye(Ce):_("WeakMap"),_e=U?ye($e):_("Set"),Ie=_("WeakSet");function Ee(e){for(var t=se(e),n=t.length,r=Array(n),o=0;o<n;o++)r[o]=e[t[o]];return r}function Ae(e){for(var t=se(e),n=t.length,r=Array(n),o=0;o<n;o++)r[o]=[t[o],e[t[o]]];return r}function Ne(e){for(var t={},n=se(e),r=0,o=n.length;r<o;r++)t[e[n[r]]]=n[r];return t}function Oe(e){var t=[];for(var n in e)P(e[n])&&t.push(n);return t.sort()}function Le(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var o=1;o<r;o++)for(var i=arguments[o],a=e(i),s=a.length,l=0;l<s;l++){var c=a[l];t&&void 0!==n[c]||(n[c]=i[c])}return n}}var De=Le(ge),Me=Le(se),je=Le(ge,!0);function Pe(){return function(){}}function Re(e){if(!w(e))return{};if(f)return f(e);var t=Pe();t.prototype=e;var n=new t;return t.prototype=null,n}function Fe(e,t){var n=Re(e);return t&&Me(n,t),n}function Ue(e){return w(e)?B(e)?e.slice():De({},e):e}function He(e,t){return t(e),e}function qe(e){return B(e)?e:[e]}function Ve(e){return ue.toPath(e)}function Be(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0}function We(e,t,n){var r=Be(e,Ve(t));return $(r)?n:r}function ze(e,t){for(var n=(t=Ve(t)).length,r=0;r<n;r++){var o=t[r];if(!W(e,o))return!1;e=e[o]}return!!n}function Ge(e){return e}function Je(e){return e=Me({},e),function(t){return ce(t,e)}}function Xe(e){return e=Ve(e),function(t){return Be(t,e)}}function Ye(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)}}return function(){return e.apply(t,arguments)}}function Ke(e,t,n){return null==e?Ge:P(e)?Ye(e,t,n):w(e)&&!B(e)?Je(e):Xe(e)}function Qe(e,t){return Ke(e,t,1/0)}function Ze(e,t,n){return ue.iteratee!==Qe?ue.iteratee(e,t):Ke(e,t,n)}function et(e,t,n){t=Ze(t,n);for(var r=se(e),o=r.length,i={},a=0;a<o;a++){var s=r[a];i[s]=t(e[s],s,e)}return i}function tt(){}function nt(e){return null==e?tt:function(t){return We(e,t)}}function rt(e,t,n){var r=Array(Math.max(0,e));t=Ye(t,n,1);for(var o=0;o<e;o++)r[o]=t(o);return r}function ot(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}ue.toPath=qe,ue.iteratee=Qe;var it=Date.now||function(){return(new Date).getTime()};function at(e){var t=function(t){return e[t]},n="(?:"+se(e).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(o,t):e}}var st={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},lt=at(st),ct=at(Ne(st)),ut=ue.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},dt=/(.)^/,pt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ft=/\\|'|\r|\n|\u2028|\u2029/g;function ht(e){return"\\"+pt[e]}var mt=/^\s*(\w|\$)+\s*$/;function gt(e,t,n){!t&&n&&(t=n),t=je({},t,ue.templateSettings);var r=RegExp([(t.escape||dt).source,(t.interpolate||dt).source,(t.evaluate||dt).source].join("|")+"|$","g"),o=0,i="__p+='";e.replace(r,(function(t,n,r,a,s){return i+=e.slice(o,s).replace(ft,ht),o=s+t.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?i+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(i+="';\n"+a+"\n__p+='"),t})),i+="';\n";var a,s=t.variable;if(s){if(!mt.test(s))throw new Error("variable is not a bare identifier: "+s)}else i="with(obj||{}){\n"+i+"}\n",s="obj";i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{a=new Function(s,"_",i)}catch(e){throw e.source=i,e}var l=function(e){return a.call(this,e,ue)};return l.source="function("+s+"){\n"+i+"}",l}function yt(e,t,n){var r=(t=Ve(t)).length;if(!r)return P(n)?n.call(e):n;for(var o=0;o<r;o++){var i=null==e?void 0:e[t[o]];void 0===i&&(i=n,o=r),e=P(i)?i.call(e):i}return e}var vt=0;function bt(e){var t=++vt+"";return e?e+t:t}function xt(e){var t=ue(e);return t._chain=!0,t}function kt(e,t,n,r,o){if(!(r instanceof t))return e.apply(n,o);var i=Re(e.prototype),a=e.apply(i,o);return w(a)?a:i}var wt=k((function(e,t){var n=wt.placeholder,r=function(){for(var o=0,i=t.length,a=Array(i),s=0;s<i;s++)a[s]=t[s]===n?arguments[o++]:t[s];for(;o<arguments.length;)a.push(arguments[o++]);return kt(e,r,this,this,a)};return r}));wt.placeholder=ue;var Ct=k((function(e,t,n){if(!P(e))throw new TypeError("Bind must be called on a function");var r=k((function(o){return kt(e,r,t,this,n.concat(o))}));return r})),$t=K(oe);function Tt(e,t,n,r){if(r=r||[],t||0===t){if(t<=0)return r.concat(e)}else t=1/0;for(var o=r.length,i=0,a=oe(e);i<a;i++){var s=e[i];if($t(s)&&(B(s)||G(s)))if(t>1)Tt(s,t-1,n,r),o=r.length;else for(var l=0,c=s.length;l<c;)r[o++]=s[l++];else n||(r[o++]=s)}return r}var St=k((function(e,t){var n=(t=Tt(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=Ct(e[r],e)}return e}));function _t(e,t){var n=function(r){var o=n.cache,i=""+(t?t.apply(this,arguments):r);return W(o,i)||(o[i]=e.apply(this,arguments)),o[i]};return n.cache={},n}var It=k((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),Et=wt(It,ue,1);function At(e,t,n){var r,o,i,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:it(),r=null,a=e.apply(o,i),r||(o=i=null)},c=function(){var c=it();s||!1!==n.leading||(s=c);var u=t-(c-s);return o=this,i=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),s=c,a=e.apply(o,i),r||(o=i=null)):r||!1===n.trailing||(r=setTimeout(l,u)),a};return c.cancel=function(){clearTimeout(r),s=0,r=o=i=null},c}function Nt(e,t,n){var r,o,i,a,s,l=function(){var c=it()-o;t>c?r=setTimeout(l,t-c):(r=null,n||(a=e.apply(s,i)),r||(i=s=null))},c=k((function(c){return s=this,i=c,o=it(),r||(r=setTimeout(l,t),n&&(a=e.apply(s,i))),a}));return c.cancel=function(){clearTimeout(r),r=i=s=null},c}function Ot(e,t){return wt(t,e)}function Lt(e){return function(){return!e.apply(this,arguments)}}function Dt(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}function Mt(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function jt(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}var Pt=wt(jt,2);function Rt(e,t,n){t=Ze(t,n);for(var r,o=se(e),i=0,a=o.length;i<a;i++)if(t(e[r=o[i]],r,e))return r}function Ft(e){return function(t,n,r){n=Ze(n,r);for(var o=oe(t),i=e>0?0:o-1;i>=0&&i<o;i+=e)if(n(t[i],i,t))return i;return-1}}var Ut=Ft(1),Ht=Ft(-1);function qt(e,t,n,r){for(var o=(n=Ze(n,r,1))(t),i=0,a=oe(e);i<a;){var s=Math.floor((i+a)/2);n(e[s])<o?i=s+1:a=s}return i}function Vt(e,t,n){return function(r,o,i){var s=0,l=oe(r);if("number"==typeof i)e>0?s=i>=0?i:Math.max(i+l,s):l=i>=0?Math.min(i+1,l):i+l+1;else if(n&&i&&l)return r[i=n(r,o)]===o?i:-1;if(o!=o)return(i=t(a.call(r,s,l),X))>=0?i+s:-1;for(i=e>0?s:l-1;i>=0&&i<l;i+=e)if(r[i]===o)return i;return-1}}var Bt=Vt(1,Ut,qt),Wt=Vt(-1,Ht);function zt(e,t,n){var r=($t(e)?Ut:Rt)(e,t,n);if(void 0!==r&&-1!==r)return e[r]}function Gt(e,t){return zt(e,Je(t))}function Jt(e,t,n){var r,o;if(t=Ye(t,n),$t(e))for(r=0,o=e.length;r<o;r++)t(e[r],r,e);else{var i=se(e);for(r=0,o=i.length;r<o;r++)t(e[i[r]],i[r],e)}return e}function Xt(e,t,n){t=Ze(t,n);for(var r=!$t(e)&&se(e),o=(r||e).length,i=Array(o),a=0;a<o;a++){var s=r?r[a]:a;i[a]=t(e[s],s,e)}return i}function Yt(e){var t=function(t,n,r,o){var i=!$t(t)&&se(t),a=(i||t).length,s=e>0?0:a-1;for(o||(r=t[i?i[s]:s],s+=e);s>=0&&s<a;s+=e){var l=i?i[s]:s;r=n(r,t[l],l,t)}return r};return function(e,n,r,o){var i=arguments.length>=3;return t(e,Ye(n,o,4),r,i)}}var Kt=Yt(1),Qt=Yt(-1);function Zt(e,t,n){var r=[];return t=Ze(t,n),Jt(e,(function(e,n,o){t(e,n,o)&&r.push(e)})),r}function en(e,t,n){return Zt(e,Lt(Ze(t)),n)}function tn(e,t,n){t=Ze(t,n);for(var r=!$t(e)&&se(e),o=(r||e).length,i=0;i<o;i++){var a=r?r[i]:i;if(!t(e[a],a,e))return!1}return!0}function nn(e,t,n){t=Ze(t,n);for(var r=!$t(e)&&se(e),o=(r||e).length,i=0;i<o;i++){var a=r?r[i]:i;if(t(e[a],a,e))return!0}return!1}function rn(e,t,n,r){return $t(e)||(e=Ee(e)),("number"!=typeof n||r)&&(n=0),Bt(e,t,n)>=0}var on=k((function(e,t,n){var r,o;return P(t)?o=t:(t=Ve(t),r=t.slice(0,-1),t=t[t.length-1]),Xt(e,(function(e){var i=o;if(!i){if(r&&r.length&&(e=Be(e,r)),null==e)return;i=e[t]}return null==i?i:i.apply(e,n)}))}));function an(e,t){return Xt(e,Xe(t))}function sn(e,t){return Zt(e,Je(t))}function ln(e,t,n){var r,o,i=-1/0,a=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,l=(e=$t(e)?e:Ee(e)).length;s<l;s++)null!=(r=e[s])&&r>i&&(i=r);else t=Ze(t,n),Jt(e,(function(e,n,r){((o=t(e,n,r))>a||o===-1/0&&i===-1/0)&&(i=e,a=o)}));return i}function cn(e,t,n){var r,o,i=1/0,a=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,l=(e=$t(e)?e:Ee(e)).length;s<l;s++)null!=(r=e[s])&&r<i&&(i=r);else t=Ze(t,n),Jt(e,(function(e,n,r){((o=t(e,n,r))<a||o===1/0&&i===1/0)&&(i=e,a=o)}));return i}function un(e,t,n){if(null==t||n)return $t(e)||(e=Ee(e)),e[ot(e.length-1)];var r=$t(e)?Ue(e):Ee(e),o=oe(r);t=Math.max(Math.min(t,o),0);for(var i=o-1,a=0;a<t;a++){var s=ot(a,i),l=r[a];r[a]=r[s],r[s]=l}return r.slice(0,t)}function dn(e){return un(e,1/0)}function pn(e,t,n){var r=0;return t=Ze(t,n),an(Xt(e,(function(e,n,o){return{value:e,index:r++,criteria:t(e,n,o)}})).sort((function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index})),"value")}function fn(e,t){return function(n,r,o){var i=t?[[],[]]:{};return r=Ze(r,o),Jt(n,(function(t,o){var a=r(t,o,n);e(i,t,a)})),i}}var hn=fn((function(e,t,n){W(e,n)?e[n].push(t):e[n]=[t]})),mn=fn((function(e,t,n){e[n]=t})),gn=fn((function(e,t,n){W(e,n)?e[n]++:e[n]=1})),yn=fn((function(e,t,n){e[n?0:1].push(t)}),!0),vn=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function bn(e){return e?B(e)?a.call(e):I(e)?e.match(vn):$t(e)?Xt(e,Ge):Ee(e):[]}function xn(e){return null==e?0:$t(e)?e.length:se(e).length}function kn(e,t,n){return t in n}var wn=k((function(e,t){var n={},r=t[0];if(null==e)return n;P(r)?(t.length>1&&(r=Ye(r,t[1])),t=ge(e)):(r=kn,t=Tt(t,!1,!1),e=Object(e));for(var o=0,i=t.length;o<i;o++){var a=t[o],s=e[a];r(s,a,e)&&(n[a]=s)}return n})),Cn=k((function(e,t){var n,r=t[0];return P(r)?(r=Lt(r),t.length>1&&(n=t[1])):(t=Xt(Tt(t,!1,!1),String),r=function(e,n){return!rn(t,n)}),wn(e,r,n)}));function $n(e,t,n){return a.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function Tn(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:$n(e,e.length-t)}function Sn(e,t,n){return a.call(e,null==t||n?1:t)}function _n(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:Sn(e,Math.max(0,e.length-t))}function In(e){return Zt(e,Boolean)}function En(e,t){return Tt(e,t,!1)}var An=k((function(e,t){return t=Tt(t,!0,!0),Zt(e,(function(e){return!rn(t,e)}))})),Nn=k((function(e,t){return An(e,t)}));function On(e,t,n,r){T(t)||(r=n,n=t,t=!1),null!=n&&(n=Ze(n,r));for(var o=[],i=[],a=0,s=oe(e);a<s;a++){var l=e[a],c=n?n(l,a,e):l;t&&!n?(a&&i===c||o.push(l),i=c):n?rn(i,c)||(i.push(c),o.push(l)):rn(o,l)||o.push(l)}return o}var Ln=k((function(e){return On(Tt(e,!0,!0))}));function Dn(e){for(var t=[],n=arguments.length,r=0,o=oe(e);r<o;r++){var i=e[r];if(!rn(t,i)){var a;for(a=1;a<n&&rn(arguments[a],i);a++);a===n&&t.push(i)}}return t}function Mn(e){for(var t=e&&ln(e,oe).length||0,n=Array(t),r=0;r<t;r++)n[r]=an(e,r);return n}var jn=k(Mn);function Pn(e,t){for(var n={},r=0,o=oe(e);r<o;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n}function Rn(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),o=Array(r),i=0;i<r;i++,e+=n)o[i]=e;return o}function Fn(e,t){if(null==t||t<1)return[];for(var n=[],r=0,o=e.length;r<o;)n.push(a.call(e,r,r+=t));return n}function Un(e,t){return e._chain?ue(t).chain():t}function Hn(e){return Jt(Oe(e),(function(t){var n=ue[t]=e[t];ue.prototype[t]=function(){var e=[this._wrapped];return i.apply(e,arguments),Un(this,n.apply(ue,e))}})),ue}Jt(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=n[e];ue.prototype[e]=function(){var n=this._wrapped;return null!=n&&(t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0]),Un(this,n)}})),Jt(["concat","join","slice"],(function(e){var t=n[e];ue.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Un(this,e)}}));var qn=Hn({__proto__:null,VERSION:e,restArguments:k,isObject:w,isNull:C,isUndefined:$,isBoolean:T,isElement:S,isString:I,isNumber:E,isDate:A,isRegExp:N,isError:O,isSymbol:L,isArrayBuffer:D,isDataView:V,isArray:B,isFunction:P,isArguments:G,isFinite:J,isNaN:X,isTypedArray:re,isEmpty:le,isMatch:ce,isEqual:me,isMap:Te,isWeakMap:Se,isSet:_e,isWeakSet:Ie,keys:se,allKeys:ge,values:Ee,pairs:Ae,invert:Ne,functions:Oe,methods:Oe,extend:De,extendOwn:Me,assign:Me,defaults:je,create:Fe,clone:Ue,tap:He,get:We,has:ze,mapObject:et,identity:Ge,constant:Y,noop:tt,toPath:qe,property:Xe,propertyOf:nt,matcher:Je,matches:Je,times:rt,random:ot,now:it,escape:lt,unescape:ct,templateSettings:ut,template:gt,result:yt,uniqueId:bt,chain:xt,iteratee:Qe,partial:wt,bind:Ct,bindAll:St,memoize:_t,delay:It,defer:Et,throttle:At,debounce:Nt,wrap:Ot,negate:Lt,compose:Dt,after:Mt,before:jt,once:Pt,findKey:Rt,findIndex:Ut,findLastIndex:Ht,sortedIndex:qt,indexOf:Bt,lastIndexOf:Wt,find:zt,detect:zt,findWhere:Gt,each:Jt,forEach:Jt,map:Xt,collect:Xt,reduce:Kt,foldl:Kt,inject:Kt,reduceRight:Qt,foldr:Qt,filter:Zt,select:Zt,reject:en,every:tn,all:tn,some:nn,any:nn,contains:rn,includes:rn,include:rn,invoke:on,pluck:an,where:sn,max:ln,min:cn,shuffle:dn,sample:un,sortBy:pn,groupBy:hn,indexBy:mn,countBy:gn,partition:yn,toArray:bn,size:xn,pick:wn,omit:Cn,first:Tn,head:Tn,take:Tn,initial:$n,last:_n,rest:Sn,tail:Sn,drop:Sn,compact:In,flatten:En,without:Nn,uniq:On,unique:On,union:Ln,intersection:Dn,difference:An,unzip:Mn,transpose:Mn,zip:jn,object:Pn,range:Rn,chunk:Fn,mixin:Hn,default:ue});return qn._=qn,qn}())}var Ee,Ae;function Ne(){if(Ae)return Ce;Ae=1;const e=be(),t=ee(),n=Ze().padutils,r=fe().padeditor,o=Te(),i=Ie();Ee||(Ee=1,function(e){e.fn.niceSelect=function(t){if("string"==typeof t)return"update"==t?this.each((function(){var t=e(this),r=e(this).next(".nice-select"),o=r.hasClass("open");r.length&&(r.remove(),n(t),o&&t.next().trigger("click"))})):"destroy"==t?(this.each((function(){var t=e(this),n=e(this).next(".nice-select");n.length&&(n.remove(),t.css("display",""))})),0==e(".nice-select").length&&e(document).off(".nice_select")):console.log('Method "'+t+'" does not exist.'),this;function n(t){t.after(e("<div></div>").addClass("nice-select").addClass(t.attr("class")||"").addClass(t.attr("disabled")?"disabled":"").attr("tabindex",t.attr("disabled")?null:"0").html('<span class="current"></span><ul class="list thin-scrollbar"></ul>'));var n=t.next(),r=t.find("option"),o=t.find("option:selected");n.find(".current").html(o.data("display")||o.text()),r.each((function(t){var r=e(this),o=r.data("display");n.find("ul").append(e("<li></li>").attr("data-value",r.val()).attr("data-display",o||null).addClass("option"+(r.is(":selected")?" selected":"")+(r.is(":disabled")?" disabled":"")).html(r.text()))}))}this.hide(),this.each((function(){var t=e(this);t.next().hasClass("nice-select")||n(t)})),e(document).off(".nice_select"),e(document).on("click.nice_select touchstart",".nice-select",(function(t){var n=e(this);e(".nice-select").not(n).removeClass("open"),n.toggleClass("open"),n.hasClass("open")?(n.find(".option"),n.find(".focus").removeClass("focus"),n.find(".selected").addClass("focus"),n.closest(".toolbar").length>0&&(n.find(".list").css("left",n.offset().left),n.find(".list").css("top",n.offset().top+n.outerHeight()),n.find(".list").css("min-width",n.outerWidth()+"px")),$listHeight=n.find(".list").outerHeight(),$top=n.parent().offset().top,$bottom=e("body").height()-$top,$maxListHeight=$bottom-n.outerHeight()-20,$maxListHeight<200?(n.addClass("reverse"),$maxListHeight=250):n.removeClass("reverse"),n.find(".list").css("max-height",$maxListHeight+"px")):e("body").hasClass("mobileView")||n.focus()})),e(document).on("click.nice_select",(function(t){0===e(t.target).closest(".nice-select").length&&e(".nice-select").removeClass("open").find(".option")})),e(document).on("click.nice_select touchstart",".nice-select .option:not(.disabled)",(function(t){var n=e(this),r=n.closest(".nice-select");r.find(".selected").removeClass("selected"),n.addClass("selected");var o=n.data("display")||n.text();r.find(".current").text(o),r.prev("select").val(n.data("value")).trigger("change")})),e(document).on("keydown.nice_select",".nice-select",(function(t){var n=e(this),r=e(n.find(".focus")||n.find(".list .option.selected"));if(32==t.keyCode||13==t.keyCode)return n.hasClass("open")?r.trigger("click"):n.trigger("click"),!1;if(40==t.keyCode){if(n.hasClass("open")){var o=r.nextAll(".option:not(.disabled)").first();o.length>0&&(n.find(".focus").removeClass("focus"),o.addClass("focus"))}else n.trigger("click");return!1}if(38==t.keyCode){if(n.hasClass("open")){var i=r.prevAll(".option:not(.disabled)").first();i.length>0&&(n.find(".focus").removeClass("focus"),i.addClass("focus"))}else n.trigger("click");return!1}if(27==t.keyCode)n.hasClass("open")&&n.trigger("click");else if(9==t.keyCode&&n.hasClass("open"))return!1}));var r=document.createElement("a").style;return r.cssText="pointer-events:auto","auto"!==r.pointerEvents&&e("html").addClass("no-csspointerevents"),this}}(jQuery));class a{constructor(e){this.$el=e}getCommand(){return this.$el.attr("data-key")}getValue(){if(this.isSelect())return this.$el.find("select").val()}setValue(e){if(this.isSelect())return this.$el.find("select").val(e)}getType(){return this.$el.attr("data-type")}isSelect(){return"select"===this.getType()}isButton(){return"button"===this.getType()}bind(e){this.isButton()?this.$el.click((t=>{$(":focus").blur(),e(this.getCommand(),this),t.preventDefault()})):this.isSelect()&&this.$el.find("select").change((()=>{e(this.getCommand(),this)}))}}const s=(()=>{let e=100;const t=.04,r=n.makeAnimationScheduler((()=>-100!==e&&100!==e&&(e>=1.5?(e=100,$("#syncstatussyncing").css("display","none"),$("#syncstatusdone").css("display","none"),!1):e<0?(e+=t,e>=0&&($("#syncstatussyncing").css("display","none"),$("#syncstatusdone").css("display","block").css("opacity",1)),!0):(e+=t,e>=1&&$("#syncstatusdone").css("opacity",(1.5-e)/.5),!0))),40);return{syncing:()=>{e=-100,$("#syncstatussyncing").css("display","block"),$("#syncstatusdone").css("display","none")},done:()=>{e=-.5,r.scheduleAnimation()}}})();return Ce.padeditbar=new class{constructor(){this._editbarPosition=0,this.commands={},this.dropdowns=[]}init(){$("#editbar .editbarbutton").attr("unselectable","on"),this.enable(),$("#editbar [data-key]").each(((e,t)=>{$(t).unbind("click"),new a($(t)).bind(((e,t)=>{this.triggerCommand(e,t)}))})),$("body:not(#editorcontainerbox)").on("keydown",(e=>{this._bodyKeyEvent(e)})),$(".show-more-icon-btn").click((()=>{$(".toolbar").toggleClass("full-icons")})),this.checkAllIconsAreDisplayedInToolbar(),$(window).resize(i.debounce((()=>this.checkAllIconsAreDisplayedInToolbar()),100)),this._registerDefaultCommands(),t.callAll("postToolbarInit",{toolbar:this,ace:r.ace}),e.safari||$("select").niceSelect(),$('iframe[name="ace_outer"]').contents().scroll((e=>{$("#editbar").toggleClass("editor-scrolled",$(e.currentTarget).scrollTop()>2)}))}isEnabled(){return!0}disable(){$("#editbar").addClass("disabledtoolbar").removeClass("enabledtoolbar")}enable(){$("#editbar").addClass("enabledtoolbar").removeClass("disabledtoolbar")}registerCommand(e,t){return this.commands[e]=t,this}registerDropdownCommand(e,t){t=t||e,this.dropdowns.push(t),this.registerCommand(e,(()=>{this.toggleDropDown(t)}))}registerAceCommand(e,t){this.registerCommand(e,((e,n,r)=>{n.callWithAce((n=>{t(e,n,r)}),e,!0)}))}triggerCommand(e,t){this.isEnabled()&&this.commands[e]&&this.commands[e](e,r.ace,t),r.ace&&r.ace.focus()}toggleDropDown(e,t=null){let n=null;try{if("users"===e&&$("#users").hasClass("stickyUsers"))return;if($(".nice-select").removeClass("open"),$(".toolbar-popup").removeClass("popup-show"),"none"===e)for(const e of this.dropdowns){if("users"===e)continue;const t=$(`#${e}`);t.find("button#forcereconnect:visible").length>0||t.hasClass("popup-show")&&($(`li[data-key=${e}] > a`).removeClass("selected"),t.removeClass("popup-show"))}else for(const t of this.dropdowns){const n=$(`#${t}`);n.hasClass("popup-show")?($(`li[data-key=${t}] > a`).removeClass("selected"),n.removeClass("popup-show")):t===e&&($(`li[data-key=${t}] > a`).addClass("selected"),n.addClass("popup-show"))}}catch(e){n=e||new Error(e)}finally{t&&Promise.resolve().then((()=>t(n)))}}setSyncStatus(e){"syncing"===e?s.syncing():"done"===e&&s.done()}setEmbedLinks(){const e=window.location.href.split("?")[0],t="?showControls=true&showChat=true&showLineNumbers=true&useMonospaceFont=false",n='width="100%" height="600" frameborder="0"';if($("#readonlyinput").is(":checked")){const r=e.split("/");r.pop();const o=`${r.join("/")}/${clientVars.readOnlyId}`;$("#embedinput").val(`<iframe name="embed_readonly" src="${o}${t}" ${n}></iframe>`),$("#linkinput").val(o)}else $("#embedinput").val(`<iframe name="embed_readwrite" src="${e}${t}" ${n}></iframe>`),$("#linkinput").val(e)}checkAllIconsAreDisplayedInToolbar(){$(".toolbar").removeClass("cropped"),$("body").removeClass("mobile-layout");const e=$(".toolbar .menu_left")[0];(e&&e.scrollWidth>$(".toolbar").width()-280||$(".toolbar").width()<1e3)&&$("body").addClass("mobile-layout"),e&&e.scrollWidth>$(".toolbar").width()&&$(".toolbar").addClass("cropped")}_bodyKeyEvent(e){if(120===e.keyCode&&e.altKey||27===e.keyCode)if(1===$(":focus").parents(".toolbar").length)this.toggleDropDown("none"),$(":focus").blur(),"undefined"==typeof pad?$("#editorcontainerbox").focus():(r.ace.focus(),e.preventDefault());else{const t=parent.parent.$("#editbar button").first();$(e.currentTarget).blur(),t.focus(),e.preventDefault()}if(1===$(":focus").parents(".toolbar").length){if(39!==e.keyCode&&37!==e.keyCode)return;const t=$("#editbar").find("button, select");if(37===e.keyCode){if($(".popup").is(":visible")||"input"===e.target.localName)return;this._editbarPosition--,-1===this._editbarPosition&&(this._editbarPosition=t.length-1),$(t[this._editbarPosition]).focus()}if(39===e.keyCode){if($(".popup").is(":visible")||"input"===e.target.localName)return;this._editbarPosition++,this._editbarPosition>=t.length&&(this._editbarPosition=0),$(t[this._editbarPosition]).focus()}}}_registerDefaultCommands(){this.registerDropdownCommand("showusers","users"),this.registerDropdownCommand("settings"),this.registerDropdownCommand("connectivity"),this.registerDropdownCommand("import_export"),this.registerDropdownCommand("embed"),this.registerCommand("settings",(()=>{this.toggleDropDown("settings"),$("#options-stickychat").focus()})),this.registerCommand("import_export",(()=>{this.toggleDropDown("import_export"),0!==$("#importfileinput").length?setTimeout((()=>{$("#importfileinput").focus()}),100):$(".exportlink").first().focus()})),this.registerCommand("showusers",(()=>{this.toggleDropDown("users"),$("#myusernameedit").focus()})),this.registerCommand("embed",(()=>{this.setEmbedLinks(),this.toggleDropDown("embed"),$("#linkinput").focus().select()})),this.registerCommand("savedRevision",(()=>{o.saveNow()})),this.registerCommand("showTimeSlider",(()=>{const e=document.location.pathname;let t=`${e}/timeslider`;("/"===e||clientVars.ep_singlePad.active)&&(t=`${e}timeslider`),document.location=t}));const e=(e,t)=>{t.ace_toggleAttributeOnSelection(e)};this.registerAceCommand("bold",e),this.registerAceCommand("italic",e),this.registerAceCommand("underline",e),this.registerAceCommand("strikethrough",e),this.registerAceCommand("undo",((e,t)=>{t.ace_doUndoRedo(e)})),this.registerAceCommand("redo",((e,t)=>{t.ace_doUndoRedo(e)})),this.registerAceCommand("insertunorderedlist",((e,t)=>{t.ace_doInsertUnorderedList()})),this.registerAceCommand("insertorderedlist",((e,t)=>{t.ace_doInsertOrderedList()})),this.registerAceCommand("indent",((e,t)=>{t.ace_doIndentOutdent(!1)||t.ace_doInsertUnorderedList()})),this.registerAceCommand("outdent",((e,t)=>{t.ace_doIndentOutdent(!0)})),this.registerAceCommand("clearauthorship",((e,t)=>{const n=t.ace_getRep();let r=!1;const o=n.lines.atIndex(n.lines.length()-1).width-1,i=n.lines.length()-1;0===n.selStart[0]&&0===n.selStart[1]&&n.selEnd[0]===i&&n.selEnd[1]===o&&(r=!0),!n.selStart||!n.selEnd||t.ace_isCaret()||r?window.confirm(html10n.get("pad.editbar.clearcolors"))&&t.ace_performDocumentApplyAttributesToCharRange(0,t.ace_getRep().alltext.length,[["author",""]]):t.ace_setAttributeOnSelection("author","")})),this.registerCommand("timeslider_returnToPad",(e=>{document.referrer.length>0&&"p"===document.referrer.substring(document.referrer.lastIndexOf("/")-1,document.referrer.lastIndexOf("/"))?document.location=document.referrer:document.location=document.location.href.substring(0,document.location.href.lastIndexOf("/"))}))}},Ce}var Oe,Le,De,Me={};function je(){if(Le)return we;Le=1;const e=Ne().padeditbar,t=function(){if(Oe)return Me;Oe=1,Me.showCountDownTimerToReconnectOnModal=(t,i)=>{if(clientVars.automaticReconnectionTimeout&&t.is(".with_reconnect_timer")){e(t);const a=n(t,i);t.find("#cancelreconnect").one("click",(()=>{a.cancel(),r(t)})),o(t)}};const e=e=>{if(0===e.find("#cancelreconnect").length){const n=e.find("#defaulttext"),r=e.find("#forcereconnect"),o=$("<p>").addClass("reconnecttimer").append($("<span>").attr("data-l10n-id","pad.modals.reconnecttimer").text("Trying to reconnect in")).append(" ").append($("<span>").addClass("timetoexpire")),i=$("<button>").attr("id","cancelreconnect").attr("data-l10n-id","pad.modals.cancel").text("Cancel");t(o),t(i),o.insertAfter(n),i.insertAfter(r)}},t=e=>{html10n.translateElement(html10n.translations,e.get(0))},n=(e,t)=>{const n=clientVars.automaticReconnectionTimeout*u.nextTry(),r=new d(n);return r.onTick(((t,n)=>{c(e,t,n)})).onExpire((()=>{e.is(".disconnected")?a((()=>{l(e)}),t):l(e)})).start(),r},r=e=>{i(e,!0)},o=e=>{i(e,!1)},i=(e,t)=>{e.find("#cancelreconnect, .reconnecttimer").toggleClass("hidden",t),e.find("#defaulttext").toggleClass("hidden",!t)},a=(e,t)=>{s(e,t),t.socket.connect()},s=(e,t)=>{1===u.counter&&t.socket.once("connect",e)},l=e=>{e.find("#forcereconnect").click()},c=(e,t,n)=>{t=t<10?`0${t}`:t,n=n<10?`0${n}`:n,e.find(".timetoexpire").text(`${t}:${n}`)},u={counter:0,nextTry(){const e=2**this.counter;return this.counter++,e}},d=function(e,t){this.duration=e,this.granularity=t||1e3,this.running=!1,this.onTickCallbacks=[],this.onExpireCallbacks=[]};return d.prototype.start=function(){if(this.running)return;this.running=!0;const e=Date.now(),t=this;let n;const r=()=>{n=t.duration-Math.floor((Date.now()-e)/1e3),n>0?(t.timeoutId=setTimeout(r,t.granularity),t.tick(n)):(t.running=!1,t.tick(0),t.expire())};r()},d.prototype.tick=function(e){const t=d.parse(e);this.onTickCallbacks.forEach((function(e){e.call(this,t.minutes,t.seconds)}),this)},d.prototype.expire=function(){this.onExpireCallbacks.forEach((function(e){e.call(this)}),this)},d.prototype.onTick=function(e){return"function"==typeof e&&this.onTickCallbacks.push(e),this},d.prototype.onExpire=function(e){return"function"==typeof e&&this.onExpireCallbacks.push(e),this},d.prototype.cancel=function(){return this.running=!1,clearTimeout(this.timeoutId),this},d.parse=e=>({minutes:e/60|0,seconds:e%60|0}),Me}(),n=(()=>{let n;return{init:e=>{n=e},showModal:r=>{e.toggleDropDown("none"),$("#connectivity .visible").removeClass("visible"),$(`#connectivity .${r}`).addClass("visible");const o=$(`#connectivity .${r}`);t.showCountDownTimerToReconnectOnModal(o,n),e.toggleDropDown("connectivity")},showOverlay:()=>{$("#toolbar-overlay").show()},hideOverlay:()=>{$("#toolbar-overlay").hide()}}})();return we.padmodals=n,we}var Pe,Re={};var Fe,Ue={};function He(){if(Fe)return Ue;Fe=1;const e=Ze().padutils,t=ee();let n={},r=!1,o=!1;const i=(()=>{const o=(()=>{const t=()=>"usertr"+t.counter++;t.counter=1;const n=[],r=[],o=[],i=(e,t)=>{let n=Math.abs(e/12);return 2===t?n**=2:3===t?n**=3:4===t?n**=4:t>=5&&(n**=5),Math.round(26*(1-n))},a=6,{scheduleAnimation:s}=e.makeAnimationScheduler((()=>{for(let e=r.length-1;e>=0;e--){const t=r[e],n=++t.animationStep,o=i(n,t.animationPower),s=f(t),l=void 0===t.opacity?1:t.opacity;n<=-a?s.find("td").height(o):n===1-a?s.empty().append(d(o,t.data)).find("td").css("opacity",1*l/a):n<0?s.find("td").css("opacity",l*(a- -n)/a).height(o):0===n&&(s.empty().append(d(o,t.data)).find("td").css("opacity",1*l).height(o),r.splice(e,1))}for(let e=n.length-1;e>=0;e--){const t=n[e],r=++t.animationStep,o=f(t),s=i(r,t.animationPower),c=void 0===t.opacity?1:t.opacity;r<a?o.find("td").css("opacity",c*(a-r)/a).height(s):r===a?o.empty().append(l(s)):r<=12?o.find("td").height(s):(n.splice(e,1),o.remove())}return m(),r.length>0||n.length>0}),20,2),l=e=>$("<td>").attr("colspan",4).css("border",0).css("height",`${e}px`),u=e=>!e.name&&"Disconnected"!==e.status,d=(t,n)=>{let r;return n.name?r=document.createTextNode(n.name):(r=$("<input>").attr("data-l10n-id","pad.userlist.unnamed").attr("type","text").addClass("editempty").addClass("newinput").attr("value",html10n.get("pad.userlist.unnamed")),u(n)&&r.attr("disabled","disabled")),$().add($("<td>").css("height",`${t}px`).addClass("usertdswatch").append($("<div>").addClass("swatch").css("background",e.escapeHtml(n.color)).html("&nbsp;"))).add($("<td>").css("height",`${t}px`).addClass("usertdname").append(r)).add($("<td>").css("height",`${t}px`).addClass("activity").text(n.activity))},p=(e,t,n)=>$("<tr>").attr("data-authorId",n).attr("id",e).append(t),f=e=>$(`#${e.domId}`),h=e=>{e.data&&"Disconnected"===e.data.status?e.opacity=.5:delete e.opacity},m=()=>{$("#otheruserstable input.newinput").each((function(){const e=$(this).closest("tr");if(e.length>0){const t=e.parent().children().index(e);if(t>=0){const e=o[t].data.id;c($(this),e)}}})).removeClass("newinput")},g=(e,n,a)=>{e=Math.max(0,Math.min(o.length,e)),a=void 0===a?4:a;const c=t(),u={data:n,animationStep:-12,domId:c,animationPower:a},g=n.id;let y;return h(u),o.splice(e,0,u),0===a?(y=p(c,d(i(0),n),g),u.animationStep=0):(r.push(u),y=p(c,l(i(-12)),g)),$("table#otheruserstable").show(),0===e?$("table#otheruserstable").prepend(y):f(o[e-1]).after(y),0!==a&&s(),m(),u},y=(e,t)=>{t=void 0===t?4:t;const r=o[e];r&&(o.splice(e,1),0===t?f(r).remove():(r.animationStep=-r.animationStep,r.animationPower=t,n.push(r),s())),0===o.length&&$("table#otheruserstable").hide()};return{insertRow:g,removeRow:y,moveRow:(e,t,n)=>{n=void 0===n?1:n;const r=o[e];if(r&&e!==t){const o=r.data;y(e,n),g(t,o,n)}},updateRow:(e,t)=>{const n=o[e];if(n&&(n.data=t,h(n),0===n.animationStep)){((e,t,n)=>{const r=d(t,n);return u(n)&&e.find("td.usertdname input:enabled").length>0?r.each(((t,n)=>{const r=$(e.find("td").get(t));r.hasClass("usertdname")?$(n).remove():r.replaceWith(n)})):e.empty().append(r),e})(f(n),i(0),n.data).find("td").css("opacity",void 0===n.opacity?1:n.opacity),m()}}}})(),i=[],l=[],c=(e,t)=>{d(e,(()=>{const e=u(t);return e>=0&&i[e].name||""}),(n=>{n?(e.attr("disabled","disabled"),p.suggestUserName(t,n)):(e.addClass("editempty"),e.val(html10n.get("pad.userlist.unnamed")))}))},u=e=>{let t=-1;for(let n=0;n<i.length;n++)if(i[n].userId===e){t=n;break}return t},d=(t,n,r)=>{t.bind("focus",(e=>{const r=n();t.val()!==r&&t.val(r),t.addClass("editactive").removeClass("editempty")})),t.bind("blur",(e=>{const n=t.removeClass("editactive").val();r(n)})),e.bindEnterAndEscape(t,(()=>{t.blur()}),(()=>{t.val(n()).blur()})),t.removeAttr("disabled").addClass("editable")};let p;const f={init:(e,t)=>{p=t,f.setMyUserInfo(e),0===$("#online_count").length&&$("#editbar [data-key=showusers] > a").append('<span id="online_count">1</span>'),$("#otheruserstable tr").remove(),$("#myusernameedit").addClass("myusernameedithoverable"),d($("#myusernameedit"),(()=>n.name||""),(e=>{n.name=e,p.notifyChangeName(e),window.setTimeout((()=>{f.renderMyUserInfo()}),0)})),$("#myswatchbox").click(s),$("#mycolorpicker .pickerswatchouter").click((function(){$("#mycolorpicker .pickerswatchouter").removeClass("picked"),$(this).addClass("picked")})),$("#mycolorpickersave").click((()=>{a(!0)})),$("#mycolorpickercancel").click((()=>{a(!1)}))},usersOnline:()=>{const e=[].concat(i);return e.push(n),e},users:()=>{const e=f.usersOnline(),t=clientVars.collab_client_vars.historicalAuthorData;for(const[n,{userId:r}]of Object.entries(t)){let o=!1;e.forEach((e=>{e.userId===r&&(o=!0)})),!1===o&&e.push(t[n])}return e},setMyUserInfo:e=>{"number"==typeof e.colorId&&(e.colorId=clientVars.colorPalette[e.colorId]),n=$.extend({},e),f.renderMyUserInfo()},userJoinOrUpdate:r=>{if(!r.userId||r.userId===n.userId)return;t.callAll("userJoinOrUpdate",{userInfo:r});const a={};a.color="number"==typeof r.colorId?clientVars.colorPalette[r.colorId]:r.colorId,a.name=r.name,a.status="",a.activity="",a.id=r.userId;const s=u(r.userId);let c=i.length;s>=0&&c--;const d=e.binarySearch(c,(e=>{s>=0&&e>=s&&e++;const t=i[e],n=(t.name||"").toLowerCase(),o=(r.name||"").toLowerCase(),a=t.userId,l=r.userId;return n>o||n===o&&a>l}));s>=0?s===d?(i[s]=r,l[s]=a,o.updateRow(s,a)):(i.splice(s,1),l.splice(s,1),i.splice(d,0,r),l.splice(d,0,a),o.updateRow(s,a),o.moveRow(s,d)):(i.splice(d,0,r),l.splice(d,0,a),o.insertRow(d,a)),f.updateNumberOfOnlineUsers()},updateNumberOfOnlineUsers:()=>{let e=1;for(let t=0;t<l.length;t++)""===l[t].status&&e++;return $("#online_count").text(e),e},userLeave:e=>{const n=u(e.userId);if(n>=0){const r=l[n];r.status="Disconnected",o.updateRow(n,r),r.leaveTimer&&window.clearTimeout(r.leaveTimer);const a=e.userId,s=window.setTimeout((()=>{const n=u(a);if(n>=0){const r=l[n];"Disconnected"===r.status&&r.leaveTimer===s&&(i.splice(n,1),l.splice(n,1),o.removeRow(n),t.callAll("userLeave",{userInfo:e}))}}),8e3);r.leaveTimer=s}f.updateNumberOfOnlineUsers()},renderMyUserInfo:()=>{n.name?$("#myusernameedit").removeClass("editempty").val(n.name):$("#myusernameedit").attr("placeholder",html10n.get("pad.userlist.entername")),r?$("#myswatchbox").addClass("myswatchboxunhoverable").removeClass("myswatchboxhoverable"):$("#myswatchbox").addClass("myswatchboxhoverable").removeClass("myswatchboxunhoverable"),$("#myswatch").css({"background-color":n.colorId}),$("li[data-key=showusers] > a").css({"box-shadow":`inset 0 0 30px ${n.colorId}`})}};return f})(),a=e=>{if(e){let e=$("#mycolorpickerpreview").css("background-color");const t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);if(t){delete t[0];for(let e=1;e<=3;++e)t[e]=parseInt(t[e]).toString(16),1===t[e].length&&(t[e]=`0${t[e]}`);e=`#${t.join("")}`}n.colorId=e,pad.notifyChangeColor(e),i.renderMyUserInfo()}r=!1,$("#mycolorpicker").removeClass("popup-show")},s=()=>{if($.farbtastic("#colorpicker").setColor(n.colorId),!r){const e=pad.getColorPalette();if(!o){const t=$("#colorpickerswatches");for(let n=0;n<e.length;n++){const r=$("<li>",{style:`background: ${e[n]};`});r.appendTo(t),r.bind("click",(e=>{$("#colorpickerswatches li").removeClass("picked"),$(e.target).addClass("picked");const t=(n=$("#colorpickerswatches .picked"),$("#colorpickerswatches li").index(n));var n;pad.notifyChangeColor(t)}))}o=!0}$("#mycolorpicker").addClass("popup-show"),r=!0,$("#colorpickerswatches li").removeClass("picked"),$($("#colorpickerswatches li")[n.colorId]).addClass("picked")}};return Ue.paduserlist=i,Ue}var qe,Ve={};function Be(){if(qe)return Ve;qe=1;const e={isCssHex:e=>/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(e),css2triple:t=>{const n=e.css2sixhex(t),r=e=>Number(`0x${e}`)/255;return[r(n.substr(0,2)),r(n.substr(2,2)),r(n.substr(4,2))]},css2sixhex:e=>{let t=/[0-9a-fA-F]+/.exec(e)[0];if(6!==t.length){const e=t.charAt(0),n=t.charAt(1),r=t.charAt(2);t=e+e+n+n+r+r}return t},triple2css:t=>{const n=t=>`0${e.clamp(Math.round(255*t),0,255).toString(16)}`.slice(-2);return`#${n(t[0])}${n(t[1])}${n(t[2])}`},clamp:(e,t,n)=>e<t?t:e>n?n:e,min3:(e,t,n)=>e<t?e<n?e:n:t<n?t:n,max3:(e,t,n)=>e>t?e>n?e:n:t>n?t:n,colorMin:t=>e.min3(t[0],t[1],t[2]),colorMax:t=>e.max3(t[0],t[1],t[2]),scale:(t,n,r)=>e.clamp(n+t*(r-n),0,1),unscale:(t,n,r)=>e.clamp((t-n)/(r-n),0,1),scaleColor:(t,n,r)=>[e.scale(t[0],n,r),e.scale(t[1],n,r),e.scale(t[2],n,r)],unscaleColor:(t,n,r)=>[e.unscale(t[0],n,r),e.unscale(t[1],n,r),e.unscale(t[2],n,r)],luminosity:e=>.3*e[0]+.59*e[1]+.11*e[2],saturate:t=>{const n=e.colorMin(t),r=e.colorMax(t);return r-n<=0?[1,1,1]:e.unscaleColor(t,n,r)},blend:(t,n,r)=>[e.scale(r,t[0],n[0]),e.scale(r,t[1],n[1]),e.scale(r,t[2],n[2])],invert:e=>[1-e[0],1-e[1],1-e[2]],complementary:t=>{const n=e.invert(t);return[n[0]>=t[0]?Math.min(1.3*n[0],1):.3*t[0],n[1]>=t[1]?Math.min(1.59*n[1],1):.59*t[1],n[2]>=t[2]?Math.min(1.11*n[2],1):.11*t[2]]},textColorFromBackgroundColor:(t,n)=>{const r="colibris"===n?"var(--super-light-color)":"#fff",o="colibris"===n?"var(--super-dark-color)":"#222";return e.luminosity(e.css2triple(t))<.5?r:o}};return Ve.colorutils=e,Ve}var We,ze,Ge={};function Je(){return We||(We=1,Ge.connect=(e,t="/",n={})=>{const r=new URL(e,window.location),o=new URL("socket.io",r),i=new URL(t,new URL("/",r));return io(i.href,Object.assign({path:o.pathname},n))}),Ge}function Xe(){return ze||(ze=1,function(e){let t;M(),j||(j=1,function(e){e.fn.farbtastic=function(t){return e.farbtastic(this,t),this},e.farbtastic=function(t,n){return(t=e(t)[0]).farbtastic||(t.farbtastic=new e._farbtastic(t,n))},e._farbtastic=function(t,n){var r=this;r.linkTo=function(t){return"object"==typeof r.callback&&e(r.callback).unbind("keyup",r.updateValue),r.color=null,"function"==typeof t?r.callback=t:"object"!=typeof t&&"string"!=typeof t||(r.callback=e(t),r.callback.bind("keyup",r.updateValue),r.callback[0].value&&r.setColor(r.callback[0].value)),this},r.updateValue=function(e){this.value&&this.value!=r.color&&r.setColor(this.value)},r.setColor=function(e){var t=r.unpack(e);return r.color!=e&&t&&(r.color=e,r.rgb=t,r.hsl=r.RGBToHSL(r.rgb),r.updateDisplay()),this},r.setHSL=function(e){r.hsl=e;var t=[e[0]];return t[1]=1*e[1]+0,t[2]=1*e[2]+0,r.rgb=r.HSLToRGB(t),r.color=r.pack(r.rgb),r.updateDisplay(),this},r.initWidget=function(){var o={width:n.width,height:n.width};e(t).html('<div class="farbtastic" style="position: relative"><div class="farbtastic-solid"></div><canvas class="farbtastic-mask"></canvas><canvas class="farbtastic-overlay"></canvas></div>').find("*").attr(o).css(o).end().find("div>*").css("position","absolute"),browser.msie&&e("canvas",t).each((function(){var t={class:e(this).attr("class"),style:this.getAttribute("style")},n=document.createElement("canvas");e(this).before(e(n).attr(t)).remove(),G_vmlCanvasManager&&G_vmlCanvasManager.initElement(n),e(n).attr(o).css(o).css("position","absolute").find("*").attr(o).css(o)})),r.radius=(n.width-n.wheelWidth)/2-1,r.square=Math.floor(.7*(r.radius-n.wheelWidth/2))-1,r.mid=Math.floor(n.width/2),r.markerSize=.3*n.wheelWidth,r.solidFill=e(".farbtastic-solid",t).css({width:2*r.square-1,height:2*r.square-1,left:r.mid-r.square,top:r.mid-r.square}),r.cnvMask=e(".farbtastic-mask",t),r.ctxMask=r.cnvMask[0].getContext("2d"),r.cnvOverlay=e(".farbtastic-overlay",t),r.ctxOverlay=r.cnvOverlay[0].getContext("2d"),r.ctxMask.translate(r.mid,r.mid),r.ctxOverlay.translate(r.mid,r.mid),r.drawCircle(),r.drawMask()},r.drawCircle=function(){var e,t,o=r.radius,i=n.wheelWidth,a=8/o/24*Math.PI,s=r.ctxMask,l=0;s.save(),s.lineWidth=i/o,s.scale(o,o);for(var c=0;c<=24;++c){var u=c/24,d=u*Math.PI*2,p=Math.sin(l),f=-Math.cos(l);if(x2=Math.sin(d),y2=-Math.cos(d),am=(l+d)/2,tan=1/Math.cos((d-l)/2),xm=Math.sin(am)*tan,ym=-Math.cos(am)*tan,color2=r.pack(r.HSLToRGB([u,1,.5])),c>0)if(browser.msie){var h=(1+Math.min(Math.abs(Math.tan(l)),Math.abs(Math.tan(Math.PI/2-l))))/24;e=r.pack(r.HSLToRGB([t-.15*h,1,.5])),color2=r.pack(r.HSLToRGB([u+.15*h,1,.5])),(y=s.createLinearGradient(p,f,x2,y2)).addColorStop(0,e),y.addColorStop(1,color2),s.fillStyle=y;var m=(o+i/2)/o,g=(o-i/2)/o;s.beginPath(),s.moveTo(p*m,f*m),s.quadraticCurveTo(xm*m,ym*m,x2*m,y2*m),s.lineTo(x2*g,y2*g),s.quadraticCurveTo(xm*g,ym*g,p*g,f*g),s.fill()}else{var y;(y=s.createLinearGradient(p,f,x2,y2)).addColorStop(0,e),y.addColorStop(1,color2),s.strokeStyle=y,s.beginPath(),s.moveTo(p,f),s.quadraticCurveTo(xm,ym,x2,y2),s.stroke()}l=d-a,e=color2,t=u}s.restore()},r.drawMask=function(){var t=2*r.square,n=r.square;function o(e,t,n){for(var r=1/e,o=1/t,i=0;i<=t;++i)for(var a=1-i*o,s=0;s<=e;++s){var l=1-s*r,c=1-2*Math.min(a*l,(1-a)*l),u=c>0?.5*(2*a-1+c)/c:0;n(s,i,u=1*u+0,c=1*c+0)}}if(r.ctxMask.getImageData){var i=Math.floor(t/2),a=document.createElement("canvas");a.width=a.height=i+1;var s=a.getContext("2d"),l=s.getImageData(0,0,i+1,i+1),c=0;o(i,i,(function(e,t,n,r){l.data[c++]=l.data[c++]=l.data[c++]=255*n,l.data[c++]=255*r})),s.putImageData(l,0,0),r.ctxMask.drawImage(a,0,0,i+1,i+1,-n,-n,2*n,2*n)}else if(browser.msie){var u,d,p=Math.floor(t/6);o(p,6,(function(t,o,i,a){if(0==t&&(u=d,d=[]),i=Math.round(255*i),a=Math.round(255*a),o>0){var s=u[t][0],l=u[t][1],c=r.packDX(s,l),f=r.packDX(i,a),h=Math.round(r.mid+(.333*(o-1)-1)*n),m=Math.round(r.mid+(.333*o-1)*n);e("<div>").css({position:"absolute",filter:"progid:DXImageTransform.Microsoft.Gradient(StartColorStr="+c+", EndColorStr="+f+", GradientType=0)",top:h,height:m-h,left:r.mid+(6*t-n-1),width:6-(t==p?Math.round(3):0)}).appendTo(r.cnvMask)}d.push([i,a])}))}else o(i=Math.floor(t/2),i,(function(e,t,o,i){o=Math.round(255*o),r.ctxMask.fillStyle="rgba("+o+", "+o+", "+o+", "+i+")",r.ctxMask.fillRect(2*e-n-1,2*t-n-1,2,2)}))},r.drawMarkers=function(){var e=n.width,t=6.28*r.hsl[0],o=Math.sin(t)*r.radius,a=-Math.cos(t)*r.radius,s=2*r.square*(.5-r.hsl[1]),l=2*r.square*(.5-r.hsl[2]),c=[{x:o,y:a,r:r.markerSize+1,c:"rgb(0,0,0,.4)",lw:2},{x:o,y:a,r:r.markerSize,c:"#fff",lw:2},{x:s,y:l,r:r.markerSize+1,c:"rgb(0,0,0,.4)",lw:2},{x:s,y:l,r:r.markerSize,c:"#fff",lw:2}];for(i in r.ctxOverlay.clearRect(-r.mid,-r.mid,e,e),c){var u=c[i];r.ctxOverlay.lineWidth=u.lw,r.ctxOverlay.strokeStyle=u.c,r.ctxOverlay.beginPath(),r.ctxOverlay.arc(u.x,u.y,u.r,0,2*Math.PI,!0),r.ctxOverlay.stroke()}},r.updateDisplay=function(){r.invert=.3*r.rgb[0]+.59*r.rgb[1]+.11*r.rgb[2]<=.6,r.solidFill.css("backgroundColor",r.pack(r.HSLToRGB([r.hsl[0],1,.5]))),r.drawMarkers(),"object"==typeof r.callback?(e(r.callback).css({backgroundColor:r.color,color:r.invert?"#fff":"#000"}),e(r.callback).each((function(){"string"==typeof this.value&&this.value!=r.color&&(this.value=r.color)}))):"function"==typeof r.callback&&r.callback.call(r,r.color)},r.widgetCoords=function(e){return{x:e.pageX-r.offset.left-r.mid,y:e.pageY-r.offset.top-r.mid}},r.mousedown=function(n){e._farbtastic.dragging||(e(document).bind("mousemove",r.mousemove).bind("mouseup",r.mouseup),e._farbtastic.dragging=!0),r.offset=e(t).offset();var o=r.widgetCoords(n);return r.circleDrag=Math.max(Math.abs(o.x),Math.abs(o.y))>r.square+2,r.mousemove(n),!1},r.mousemove=function(e){var t=r.widgetCoords(e);if(r.circleDrag){var n=Math.atan2(t.x,-t.y)/6.28;r.setHSL([(n+1)%1,r.hsl[1],r.hsl[2]])}else{var o=Math.max(0,Math.min(1,-t.x/r.square/2+.5)),i=Math.max(0,Math.min(1,-t.y/r.square/2+.5));r.setHSL([r.hsl[0],o,i])}return!1},r.mouseup=function(){e(document).unbind("mousemove",r.mousemove),e(document).unbind("mouseup",r.mouseup),e._farbtastic.dragging=!1},r.dec2hex=function(e){return(e<16?"0":"")+e.toString(16)},r.packDX=function(e,t){return"#"+r.dec2hex(t)+r.dec2hex(e)+r.dec2hex(e)+r.dec2hex(e)},r.pack=function(e){var t=Math.round(255*e[0]),n=Math.round(255*e[1]),o=Math.round(255*e[2]);return"#"+r.dec2hex(t)+r.dec2hex(n)+r.dec2hex(o)},r.unpack=function(e){if(7==e.length){function t(t){return parseInt(e.substring(t,t+2),16)/255}return[t(1),t(3),t(5)]}if(4==e.length){function n(t){return parseInt(e.substring(t,t+1),16)/15}return[n(1),n(2),n(3)]}},r.HSLToRGB=function(e){var t,n,r=e[0],o=e[1],i=e[2];return t=2*i-(n=i<=.5?i*(o+1):i+o-i*o),[this.hueToRGB(t,n,r+.33333),this.hueToRGB(t,n,r),this.hueToRGB(t,n,r-.33333)]},r.hueToRGB=function(e,t,n){return 6*(n=(n+1)%1)<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(.66666-n)*6:e},r.RGBToHSL=function(e){var t=e[0],n=e[1],r=e[2],o=Math.min(t,n,r),i=Math.max(t,n,r),a=i-o,s=0,l=0,c=(o+i)/2;return c>0&&c<1&&(l=a/(c<.5?2*c:2-2*c)),a>0&&(i==t&&i!=n&&(s+=(n-r)/a),i==n&&i!=r&&(s+=2+(r-t)/a),i==r&&i!=t&&(s+=4+(t-n)/a),s/=6),[s,l,c]},n.callback||(n={callback:n}),n=e.extend({width:300,wheelWidth:(n.width||300)/10,callback:null},n),r.initWidget(),e("canvas.farbtastic-overlay",t).mousedown(r.mousedown),n.callback&&r.linkTo(n.callback),r.setColor("#808080")}}(jQuery)),F();const n=Ze().Cookies,r=he().chat,o=function(){if(ge)return ye;ge=1;const e=he().chat,t=ee(),n=be();let r;const o=()=>r&&r.socket;return ye.getCollabClient=(i,a,s,l,c)=>{const u=i;r=c;let d,p=a.rev,f=!1,h="CONNECTING",m=0,g=0,y=500;const v=s.userId,b={};b[v]=s;let x=!1;const k={onUserJoin:()=>{},onUserLeave:()=>{},onUpdateUserInfo:()=>{},onChannelStateChange:()=>{},onClientMessage:()=>{},onInternalAction:()=>{},onConnectionTrouble:()=>{},onServerMessage:()=>{}};n.firefox&&$(window).bind("keydown",(e=>{27===e.which&&e.preventDefault()}));const w=()=>{if(u.getInInternationalComposition())return;const e=Date.now();if(!o()||"CONNECTING"===h)return void("CONNECTING"===h&&e-g>2e4?N("DISCONNECTED","initsocketfail"):setTimeout(w,1e3));if(f)return void(e-m>2e4?N("DISCONNECTED","slowcommit"):e-m>5e3?k.onConnectionTrouble("SLOW"):setTimeout(w,3e3));const t=m+y;if(e<t)return void setTimeout(w,t-e);let n=!1;if(x)setTimeout(w,3e3);else{const t=u.prepareUserChangeset();t.changeset&&(m=e,f=!0,d={type:"USER_CHANGES",baseRev:p,changeset:t.changeset,apool:t.apool},T(d),n=!0,k.onInternalAction("commitPerformed"))}n&&setTimeout(w,3e3)},C=()=>{u.applyPreparedChangesetToBase(),M();try{k.onInternalAction("commitAcceptedByServer"),k.onConnectionTrouble("OK")}catch(e){}w()},T=e=>{o().json.send({type:"COLLABROOM",component:"pad",data:e})},S=new class{constructor(){this._promiseChain=Promise.resolve()}async enqueue(e){const t=this._promiseChain.then(e);return this._promiseChain=t.catch((()=>{})),await t}},_=e=>{I(e.userId,e.colorId)},I=(e,t,n)=>{"number"==typeof t&&(t=clientVars.colorPalette[t]);const r=t;n?u.setAuthorInfo(e,{bgcolor:r,fade:.5}):u.setAuthorInfo(e,{bgcolor:r})},E=e=>{I(e.userId,e.colorId,!0)},A=e=>{for(const[t,n]of Object.entries(e))b[t]||I(t,n.colorId,!0)},N=(e,t)=>{e!==h&&(h=e,k.onChannelStateChange(h,t))},O=e=>{const t=[];return $.each(e,((e,n)=>{t.push(n)})),t};let L=[];const D=e=>{const t=[];for(let n=0;n<L.length;n++){const r=L[n];e&&e!==r.tag?t.push(r):r()}L=t},M=()=>{f=!1,k.onInternalAction("newlyIdle"),R()},j=e=>{x=e},P=[],R=()=>{setTimeout((()=>{if(!f)for(;P.length>0;)P.shift()()}),0)},F={setOnUserJoin:e=>{k.onUserJoin=e},setOnUserLeave:e=>{k.onUserLeave=e},setOnUpdateUserInfo:e=>{k.onUpdateUserInfo=e},setOnChannelStateChange:e=>{k.onChannelStateChange=e},setOnClientMessage:e=>{k.onClientMessage=e},setOnInternalAction:e=>{k.onInternalAction=e},setOnConnectionTrouble:e=>{k.onConnectionTrouble=e},updateUserInfo:(U=e=>{e.userId=v,b[v]=e,_(e),o()&&T({type:"USERINFO_UPDATE",userInfo:e})},function(...e){const t=()=>{U.call(this,...e)};t.tag=H,"CONNECTING"===h?L.push(t):t()}),handleMessageFromServer:n=>{if(!o())return;if(!n.data)return;const i=n;if("COLLABROOM"!==i.type&&"CUSTOM"!==i.type)return;const a=i.data;if("NEW_CHANGES"===a.type)S.enqueue((async()=>{await u.getInInternationalComposition();const{newRev:e,changeset:t,author:n="",apool:r}=a;e===p+1?(p=e,u.applyChangesToBase(t,n,r)):window.console.warn(`bad message revision on NEW_CHANGES: ${e} not ${p+1}`)}));else if("ACCEPT_COMMIT"===a.type)S.enqueue((()=>{const e=a.newRev;e===p+1?(p=e,C()):window.console.warn(`bad message revision on ACCEPT_COMMIT: ${e} not ${p+1}`)}));else if("CLIENT_RECONNECT"===a.type)S.enqueue((()=>{if(a.noChanges)return void j(!1);const{headRev:e,newRev:t,changeset:n,author:o="",apool:i}=a;t===p+1?(p=t,o===r.getUserId()?C():u.applyChangesToBase(n,o,i),t===e&&j(!1)):window.console.warn(`bad message revision on CLIENT_RECONNECT: ${t} not ${p+1}`)}));else if("USER_NEWINFO"===a.type){const e=a.userInfo,t=e.userId;b[t]?(b[t]=e,k.onUpdateUserInfo(e)):(b[t]=e,k.onUserJoin(e)),_(e)}else if("USER_LEAVE"===a.type){const e=a.userInfo,t=e.userId;b[t]&&(delete b[e.userId],E(e),k.onUserLeave(e))}else if("CLIENT_MESSAGE"===a.type)k.onClientMessage(a.payload);else if("CHAT_MESSAGE"===a.type)e.addMessage(a.message,!0,!1);else if("CHAT_MESSAGES"===a.type){for(let t=a.messages.length-1;t>=0;t--)e.addMessage(a.messages[t],!0,!0);e.gotInitalMessages||(e.scrollDown(),e.gotInitalMessages=!0,e.historyPointer=clientVars.chatHead-a.messages.length),$("#chatloadmessagesball").css("display","none"),e.historyPointer<=0?$("#chatloadmessagesbutton").css("display","none"):$("#chatloadmessagesbutton").css("display","block")}a.type.indexOf("USER_")>-1&&(a.payload=a.userInfo),"NEW_CHANGES"===a.type&&(a.payload=a),t.callAll(`handleClientMessage_${a.type}`,{payload:a.payload})},getConnectedUsers:()=>O(b),sendClientMessage:e=>{T({type:"CLIENT_MESSAGE",payload:e})},sendMessage:T,getCurrentRevisionNumber:()=>p,getMissedChanges:()=>{const e={};e.userInfo=b[v],e.baseRev=p,f&&d&&(e.committedChangeset=d.changeset,e.committedChangesetAPool=d.apool,u.applyPreparedChangesetToBase());const t=u.prepareUserChangeset();return t.changeset&&(e.furtherChangeset=t.changeset,e.furtherChangesetAPool=t.apool),e},callWhenNotCommitting:e=>{P.push(e),R()},addHistoricalAuthors:A,setChannelState:N,setStateIdle:M,setIsPendingRevision:j,set commitDelay(e){y=e},get commitDelay(){return y}};var U,H;return A(a.historicalAuthorData),_(s),u.setProperty("userAuthor",v),u.setBaseAttributedText(a.initialAttributedText,a.apool),u.setUserChangeNotificationCallback(w),N("CONNECTED"),D(),g=Date.now(),F},ye}().getCollabClient,a=function(){if(De)return ke;De=1;const e=je().padmodals,t=(()=>{let t={what:"connecting"};return{init:()=>{$("button#forcereconnect").click((()=>{window.location.reload()}))},connected:()=>{t={what:"connected"},e.showModal("connected"),e.hideOverlay()},reconnecting:()=>{t={what:"reconnecting"},e.showModal("reconnecting"),e.showOverlay()},disconnected:n=>{if("disconnected"===t.what)return;t={what:"disconnected",why:n};let r=String(n);-1===["badChangeset","corruptPad","deleted","disconnected","initsocketfail","looping","rateLimited","rejected","slowcommit","unauth","userdup"].indexOf(r)&&(r="disconnected"),e.showModal(r),e.showOverlay()},isFullyConnected:()=>"connected"===t.what,getStatus:()=>t}})();return ke.padconnectionstatus=t,ke}().padconnectionstatus,s=W().padcookie,l=Ne().padeditbar,c=fe().padeditor,u=function(){if(Pe)return Re;Pe=1;const e=(()=>{const e=()=>{$("#import .importframe").remove();const e=$("<iframe>").css("display","none").attr("name","importiframe").addClass("importframe");$("#import").append(e)},t=()=>{$("#importsubmitinput").addClass("throbbold"),$("#importformfilediv").addClass("importformenabled"),$("#importsubmitinput").removeAttr("disabled"),$("#importmessagefail").fadeOut("fast")},n=function(t){t.preventDefault(),$("#importmessagefail").fadeOut("fast"),window.confirm(html10n.get("pad.impexp.confirmimport"))&&($("#importsubmitinput").attr({disabled:!0}).val(html10n.get("pad.impexp.importing")),window.setTimeout((()=>$("#importfileinput").attr({disabled:!0})),0),$("#importarrow").stop(!0,!0).hide(),$("#importstatusball").show(),(async()=>{const{code:t,message:n,data:{directDatabaseAccess:o}={}}=await $.ajax({url:`${window.location.href.split("?")[0].split("#")[0]}/import`,method:"POST",data:new FormData(this),processData:!1,contentType:!1,dataType:"json",timeout:25e3}).catch((e=>e.responseJSON?e.responseJSON:{code:2,message:"Unknown import error"}));0!==t?r(n):($("#import_export").removeClass("popup-show"),o&&window.location.reload()),$("#importsubmitinput").removeAttr("disabled").val(html10n.get("pad.impexp.importbutton")),window.setTimeout((()=>$("#importfileinput").removeAttr("disabled")),0),$("#importstatusball").hide(),e()})())},r=e=>{const t=html10n.get(`pad.impexp.${-1!==["convertFailed","uploadFailed","padHasData","maxFileSize","permission"].indexOf(e)?e:"copypaste"}`),n=e=>{$("#importmessagefail").empty().append($("<strong>").css("color","red").text(`${html10n.get("pad.impexp.importfailed")}: `)).append(document.createTextNode(t))[e?"fadeIn":"show"]()};$("#importexport .importmessage").is(":visible")?($("#importmessagesuccess").fadeOut("fast"),$("#importmessagefail").fadeOut("fast",(()=>n(!0)))):n()};function o(){let e=$(this);return e=e.hasClass("exporthrefpdf")?"PDF":e.hasClass("exporthrefdoc")?"Microsoft Word":e.hasClass("exporthrefodt")?"OpenDocument":"this file",alert(html10n.get("pad.impexp.exportdisabled",{type:e})),!1}return{init:r=>{const i=clientVars.padId;$("#importsubmitinput").val(html10n.get("pad.impexp.importbutton")),html10n.bind("localized",(()=>{$("#importsubmitinput").val(html10n.get("pad.impexp.importbutton"))})),$("#exporthtmla").attr("href",`${i}/export/html`),$("#exportetherpada").attr("href",`${i}/export/etherpad`),$("#exportplaina").attr("href",`${i}/export/txt`),"no"===clientVars.exportAvailable?($("#exportworda").remove(),$("#exportpdfa").remove(),$("#exportopena").remove(),$("#importmessageabiword").show()):"withoutPDF"===clientVars.exportAvailable?($("#exportpdfa").remove(),$("#exportworda").attr("href",`${i}/export/doc`),$("#exportopena").attr("href",`${i}/export/odt`),$("#importexport").css({height:"142px"}),$("#importexportline").css({height:"142px"})):($("#exportworda").attr("href",`${i}/export/doc`),$("#exportpdfa").attr("href",`${i}/export/pdf`),$("#exportopena").attr("href",`${i}/export/odt`)),e(),$("#importfileinput").change(t),$("#importform").unbind("submit").submit(n),$(".disabledexport").click(o)},disable:()=>{$("#impexp-disabled-clickcatcher").show(),$("#import").css("opacity",.5),$("#impexp-export").css("opacity",.5)},enable:()=>{$("#impexp-disabled-clickcatcher").hide(),$("#import").css("opacity",1),$("#impexp-export").css("opacity",1)}}})();return Re.padimpexp=e,Re}().padimpexp,d=je().padmodals,p=Te(),f=He().paduserlist,h=Ze().padutils,m=Be().colorutils,g=Ze().randomString,y=Je(),v=ee(),b=[{name:"noColors",checkVal:"true",callback:e=>{T.noColors=!0,$("#clearAuthorship").hide()}},{name:"showControls",checkVal:"true",callback:e=>{$("#editbar").css("display","flex")}},{name:"showChat",checkVal:null,callback:e=>{"false"===e&&(T.hideChat=!0,r.hide(),$("#chaticon").hide())}},{name:"showLineNumbers",checkVal:"false",callback:e=>{T.LineNumbersDisabled=!0}},{name:"useMonospaceFont",checkVal:"true",callback:e=>{T.useMonospaceFontGlobal=!0}},{name:"userName",checkVal:null,callback:e=>{T.globalUserName=decodeURIComponent(e),clientVars.userName=decodeURIComponent(e)}},{name:"userColor",checkVal:null,callback:e=>{T.globalUserColor=decodeURIComponent(e),clientVars.userColor=decodeURIComponent(e)}},{name:"rtl",checkVal:"true",callback:e=>{T.rtlIsTrue=!0}},{name:"alwaysShowChat",checkVal:"true",callback:e=>{T.hideChat||r.stickToScreen()}},{name:"chatAndUsers",checkVal:"true",callback:e=>{r.chatAndUsers()}},{name:"lang",checkVal:null,callback:e=>{window.html10n.localize([e,"en"]),n.set("language",e)}}],x=()=>{for(const e of b){const t=clientVars.padOptions[e.name];t.toString()===e.checkVal&&e.callback(t)}const e=k();for(const t of b){const n=e.get(t.name);!n||n!==t.checkVal&&null!=t.checkVal||t.callback(n)}},k=()=>new URL(window.location.href).searchParams,w=e=>{let r=clientVars.padId;if(r=decodeURIComponent(r),!e){const e=document.title.split("|"),t=e[e.length-1];document.title=`${r.replace(/_+/g," ")} | ${t}`}let o=n.get("token");null==o&&(o=`t.${g()}`,n.set("token",o,{expires:60}));const i=k(),a={colorId:i.get("userColor"),name:i.get("userName")},s={component:"pad",type:"CLIENT_READY",padId:r,sessionID:n.get("sessionID"),token:o,userInfo:a};e&&(s.client_rev=C.collabClient.getCurrentRevisionNumber(),s.reconnect=!0),t.json.send(s)};const C={collabClient:null,myUserInfo:null,diagnosticInfo:{},initTime:0,clientTimeOffset:null,padOptions:{},_messageQ:new class{constructor(){this._q=[],this._cc=null}setCollabClient(e){this._cc=e,this.enqueue()}enqueue(...e){if(null==this._cc)this._q.push(...e);else{for(;this._q.length>0;)this._cc.handleMessageFromServer(this._q.shift());for(const t of e)this._cc.handleMessageFromServer(t)}}},getPadId:()=>clientVars.padId,getClientIp:()=>clientVars.clientIp,getColorPalette:()=>clientVars.colorPalette,getPrivilege:e=>clientVars.accountPrivs[e],getUserId:()=>C.myUserInfo.userId,getUserName:()=>C.myUserInfo.name,userList:()=>f.users(),sendClientMessage:e=>{C.collabClient.sendClientMessage(e)},init(){h.setupGlobalExceptionHandler(),$((()=>(async()=>{null!=window.customStart&&window.customStart(),$("#colorpicker").farbtastic({callback:"#mycolorpickerpreview",width:220}),$("#readonlyinput").on("click",(()=>{l.setEmbedLinks()})),s.init(),await(async()=>{let n=!1,r=clientVars.padId;r=decodeURIComponent(r),t=C.socket=y.connect(e.baseURL,"/",{query:{padId:r},reconnectionAttempts:5,reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3}),t.once("connect",(()=>{w(!1)})),t.on("reconnect",(()=>{null!=C.collabClient&&C.collabClient.setChannelState("CONNECTED"),w(n)}));const o=()=>{null!=C.collabClient&&(C.collabClient.setStateIdle(),C.collabClient.setIsPendingRevision(!0),C.collabClient.setChannelState("RECONNECTING"))};t.on("disconnect",(e=>{"io server disconnect"===e&&(o(),t.connect())})),t.on("reconnecting",o),t.on("reconnect_failed",(e=>{if(null==C.collabClient)throw new Error("Reconnect timed out");C.collabClient.setChannelState("DISCONNECTED","reconnect_timeout")})),t.on("error",(e=>{null!=C.collabClient&&(C.collabClient.setStateIdle(),C.collabClient.setIsPendingRevision(!0)),o(),console.log(`socket.io connection error: ${JSON.stringify(e)}`)})),t.on("message",(e=>{if(e.accessStatus)"deny"===e.accessStatus&&($("#loading").hide(),$("#permissionDenied").show(),n&&($("#editorcontainer").hide(),$("#editorloadingbox").show()));else if(n||"CLIENT_VARS"!==e.type){if(e.disconnect)return a.disconnected(e.disconnect),t.disconnect(),c.disable(),l.disable(),void u.disable();C._messageQ.enqueue(e)}else n=!0,window.clientVars=Object.assign(e.data,clientVars)})),await Promise.all([new Promise((e=>{const n=r=>{r.accessStatus||"CLIENT_VARS"!==r.type||(t.off("message",n),e())};t.on("message",n)})),v.aCallAll("_socketCreated",{socket:t})])})(),this._afterHandshake()})()))},_afterHandshake(){C.clientTimeOffset=Date.now()-clientVars.serverTimestamp,r.init(this),x(),s.init(),C.initTime=+new Date,C.padOptions=clientVars.initialOptions,C.myUserInfo={userId:clientVars.userId,name:clientVars.userName,ip:C.getClientIp(),colorId:clientVars.userColor};if(u.init(this),p.init(this),c.init(C.padOptions.view||{},this).then((()=>{l.init(),setTimeout((()=>{c.ace.focus()}),0),s.getPref("chatAlwaysVisible")&&(r.stickToScreen(!0),$("#options-stickychat").prop("checked",!0)),s.getPref("chatAndUsers")&&(r.chatAndUsers(!0),$("#options-chatandusers").prop("checked",!0)),!1===s.getPref("showAuthorshipColors")&&C.changeViewOption("showAuthorColors",!1),!1===s.getPref("showLineNumbers")&&C.changeViewOption("showLineNumbers",!1),!0===s.getPref("rtlIsTrue")&&C.changeViewOption("rtlIsTrue",!0),C.changeViewOption("padFontFamily",s.getPref("padFontFamily")),$("#viewfontmenu").val(s.getPref("padFontFamily")).niceSelect("update");const e=e=>{e.matches&&($("#options-chatandusers:checked").click(),$("#options-stickychat:checked").click())},t=window.matchMedia("(max-width: 800px)");t.addListener(e),setTimeout((()=>{e(t)}),0),$("#editorcontainer").addClass("initialized"),v.aCallAll("postAceInit",{ace:c.ace,clientVars:clientVars,pad:C})})),f.init(C.myUserInfo,this),a.init(),d.init(this),C.collabClient=o(c.ace,clientVars.collab_client_vars,C.myUserInfo,{colorPalette:C.getColorPalette()},C),this._messageQ.setCollabClient(this.collabClient),C.collabClient.setOnUserJoin(C.handleUserJoin),C.collabClient.setOnUpdateUserInfo(C.handleUserUpdate),C.collabClient.setOnUserLeave(C.handleUserLeave),C.collabClient.setOnClientMessage(C.handleClientMessage),C.collabClient.setOnChannelStateChange(C.handleChannelStateChange),C.collabClient.setOnInternalAction(C.handleCollabAction),-1!==clientVars.chatHead){const e=clientVars.chatHead,t=Math.max(e-100,0);C.collabClient.sendMessage({type:"GET_CHAT_MESSAGES",start:t,end:e})}else $("#chatloadmessagesbutton").css("display","none");window.clientVars.readonly?(r.hide(),$("#myusernameedit").attr("disabled",!0),$("#chatinput").attr("disabled",!0),$("#chaticon").hide(),$("#options-chatandusers").parent().hide(),$("#options-stickychat").parent().hide()):T.hideChat||$("#chaticon").show(),$("body").addClass(window.clientVars.readonly?"readonly":"readwrite"),c.ace.callWithAce((e=>{e.ace_setEditable(!window.clientVars.readonly)})),!0===T.LineNumbersDisabled&&this.changeViewOption("showLineNumbers",!1),!0===T.noColors&&this.changeViewOption("noColors",!0),!0===T.rtlIsTrue&&this.changeViewOption("rtlIsTrue",!0),!0===T.useMonospaceFontGlobal&&this.changeViewOption("padFontFamily","RobotoMono"),!1!==T.globalUserName&&(this.notifyChangeName(T.globalUserName),this.myUserInfo.name=T.globalUserName,$("#myusernameedit").val(T.globalUserName)),!1!==T.globalUserColor&&m.isCssHex(T.globalUserColor)&&(this.myUserInfo.globalUserColor=T.globalUserColor,this.notifyChangeColor(T.globalUserColor),f.setMyUserInfo(this.myUserInfo))},dispose:()=>{c.dispose()},notifyChangeName:e=>{C.myUserInfo.name=e,C.collabClient.updateUserInfo(C.myUserInfo)},notifyChangeColor:e=>{C.myUserInfo.colorId=e,C.collabClient.updateUserInfo(C.myUserInfo)},changePadOption:(e,t)=>{const n={};n[e]=t,C.handleOptionsChange(n),C.collabClient.sendClientMessage({type:"padoptions",options:n,changedBy:C.myUserInfo.name||"unnamed"})},changeViewOption:(e,t)=>{const n={view:{}};n.view[e]=t,C.handleOptionsChange(n)},handleOptionsChange:e=>{if(e.view){C.padOptions.view||(C.padOptions.view={});for(const[t,n]of Object.entries(e.view))C.padOptions.view[t]=n,s.setPref(t,n);c.setViewOptions(C.padOptions.view)}},getPadOptions:()=>C.padOptions,suggestUserName:(e,t)=>{C.collabClient.sendClientMessage({type:"suggestUserName",unnamedId:e,newName:t})},handleUserJoin:e=>{f.userJoinOrUpdate(e)},handleUserUpdate:e=>{f.userJoinOrUpdate(e)},handleUserLeave:e=>{f.userLeave(e)},handleClientMessage:e=>{if("suggestUserName"===e.type)e.unnamedId===C.myUserInfo.userId&&e.newName&&!C.myUserInfo.name&&(C.notifyChangeName(e.newName),f.setMyUserInfo(C.myUserInfo));else if("newRevisionList"===e.type)p.newRevisionList(e.revisionList);else if("revisionLabel"===e.type)p.newRevisionList(e.revisionList);else if("padoptions"===e.type){const t=e.options;C.handleOptionsChange(t)}},handleChannelStateChange:(e,n)=>{const r=!!a.isFullyConnected(),o="connecting"===a.getStatus().what;if("CONNECTED"===e)c.enable(),l.enable(),u.enable(),a.connected();else if("RECONNECTING"===e)c.disable(),l.disable(),u.disable(),a.reconnecting();else if("DISCONNECTED"===e){C.diagnosticInfo.disconnectedMessage=n,C.diagnosticInfo.padId=C.getPadId(),C.diagnosticInfo.socket={};for(const[e,n]of Object.entries(t.socket||{})){const t=typeof n;"string"!==t&&"number"!==t||(C.diagnosticInfo.socket[e]=n)}C.asyncSendDiagnosticInfo(),"string"==typeof window.ajlog&&(window.ajlog+=`Disconnected: ${n}\n`),c.disable(),l.disable(),u.disable(),a.disconnected(n)}const i=!!a.isFullyConnected();i!==r&&C.handleIsFullyConnected(i,o)},handleIsFullyConnected:(e,t)=>{C.determineChatVisibility(e&&!t),C.determineChatAndUsersVisibility(e&&!t),C.determineAuthorshipColorsVisibility(),setTimeout((()=>{l.toggleDropDown("none")}),1e3)},determineChatVisibility:e=>{s.getPref("chatAlwaysVisible")?(r.stickToScreen(!0),$("#options-stickychat").prop("checked",!0)):$("#options-stickychat").prop("checked",!1)},determineChatAndUsersVisibility:e=>{s.getPref("chatAndUsersVisible")?(r.chatAndUsers(!0),$("#options-chatandusers").prop("checked",!0)):$("#options-chatandusers").prop("checked",!1)},determineAuthorshipColorsVisibility:()=>{s.getPref("showAuthorshipColors")?(C.changeViewOption("showAuthorColors",!0),$("#options-colorscheck").prop("checked",!0)):$("#options-colorscheck").prop("checked",!1)},handleCollabAction:e=>{"commitPerformed"===e?l.setSyncStatus("syncing"):"newlyIdle"===e&&l.setSyncStatus("done")},asyncSendDiagnosticInfo:()=>{window.setTimeout((()=>{$.ajax({type:"post",url:"ep/pad/connection-diagnostic-info",data:{diagnosticInfo:JSON.stringify(C.diagnosticInfo)},success:()=>{},error:()=>{}})}),0)},forceReconnect:()=>{$("form#reconnectform input.padId").val(C.getPadId()),C.diagnosticInfo.collabDiagnosticInfo=C.collabClient.getDiagnosticInfo(),$("form#reconnectform input.diagnosticInfo").val(JSON.stringify(C.diagnosticInfo)),$("form#reconnectform input.missedChanges").val(JSON.stringify(C.collabClient.getMissedChanges())),$("form#reconnectform").submit()},callWhenNotCommitting:e=>{C.collabClient.callWhenNotCommitting(e)},getCollabRevisionNumber:()=>C.collabClient.getCurrentRevisionNumber(),isFullyConnected:()=>a.isFullyConnected(),addHistoricalAuthors:e=>{C.collabClient?C.collabClient.addHistoricalAuthors(e):window.setTimeout((()=>{C.addHistoricalAuthors(e)}),1e3)}},T={LineNumbersDisabled:!1,noColors:!1,useMonospaceFontGlobal:!1,globalUserName:!1,globalUserColor:!1,rtlIsTrue:!1};C.settings=T,e.baseURL="",e.settings=T,e.randomString=g,e.getParams=x,e.pad=C,e.init=()=>C.init()}(L)),L}var Ye,Ke,Qe={};function Ze(){if(Ke)return b;Ke=1;const e=x.exports,n=e=>{const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";let n="";e=e||20;for(let r=0;r<e;r++){const e=Math.floor(Math.random()*t.length);n+=t.substring(e,e+1)}return n},r=new RegExp(`[${["0-9","A-Z","a-z","À-Ö","Ø-ö","ø-ÿ","Ā-῿","぀-鿿","豈-﷿","ﹰ-﻾","０-９","Ａ-Ｚ","ａ-ｚ","ｦ-ￜ"].join("")}]`),o=(()=>{const e=`[-:@_.,~%+/?=&#!;()\\[\\]$'*${r.source.slice(1,-1)}]`,t=`(?:${["(?:x-)?man","afp","file","ftps?","gopher","https?","nfs","sftp","smb","txmt"].join("|")})://`,n=`(?:${["about","geo","mailto","tel"].join("|")}):`;return new RegExp(`(?:${t}|${n}|www\\.)${e}*(?![:.,;?!)\\]'*])${e}`,"g")})(),i={warnWithStack:(...e)=>{const t=new Error;Error.captureStackTrace&&Error.captureStackTrace(t,i.warnWithStack),t.name="",t.stack&&e.push(t.stack),console.warn(...e)},escapeHtml:t=>e.escapeHTML(String(t)),uniqueId:()=>{const e=(e,t)=>(Array(t+1).join("0")+Number(e).toString(35)).slice(-t);return[Xe().pad.getClientIp(),e(+new Date,7),e(Math.floor(1e9*Math.random()),4)].join(".")},simpleDateTime:e=>{const t=new Date(+e);return`${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()]} ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]} ${t.getDate()} ${t.getFullYear()} ${`${t.getHours()}:${`0${t.getMinutes()}`.slice(-2)}`}`},wordCharRegex:r,urlRegex:o,findURLs:e=>{const t=new RegExp(i.urlRegex,"g");t.lastIndex=0;let n,r=null;for(;n=t.exec(e);){r=r||[];const e=n.index,t=n[0];r.push([e,t])}return r},escapeHtmlWithClickableLinks:(t,n)=>{let r=0;const o=[],a=i.findURLs(t),s=n=>{n>r&&(o.push(e.escapeHTML(t.substring(r,n))),r=n)};if(a)for(let t=0;t<a.length;t++){const r=a[t][0],i=a[t][1];s(r),o.push("<a ",n?`target="${e.escapeHTMLAttribute(n)}" `:"",'href="',e.escapeHTMLAttribute(i),'" rel="noreferrer noopener">'),s(r+i.length),o.push("</a>")}return s(t.length),o.join("")},bindEnterAndEscape:(e,t,n)=>{t&&e.keypress((e=>{13===e.which&&t(e)})),n&&e.keydown((e=>{27===e.which&&n(e)}))},timediff:e=>{const t=Xe().pad,n=(e,t)=>`${e=Math.round(e)} ${t}${1!==e?"s":""} ago`;return(e=Math.max(0,(+new Date-+e-t.clientTimeOffset)/1e3))<60?n(e,"second"):(e/=60)<60?n(e,"minute"):(e/=60)<24?n(e,"hour"):n(e/=24,"day")},makeAnimationScheduler:(e,t,n)=>{void 0===n&&(n=1);let r=null;const o=()=>{r||(r=window.setTimeout((()=>{r=null;let t=n,i=!0;for(;i&&t>0;)i=e(),t--;i&&o()}),t*n))};return{scheduleAnimation:o}},makeFieldLabeledWhenEmpty:(e,t)=>{e=$(e);const n=()=>{e.addClass("editempty"),e.val(t)};return e.focus((()=>{e.hasClass("editempty")&&e.val(""),e.removeClass("editempty")})),e.blur((()=>{e.val()||n()})),{clear:n}},getCheckbox:e=>$(e).is(":checked"),setCheckbox:(e,t)=>{t?$(e).attr("checked","checked"):$(e).removeAttr("checked")},bindCheckboxChange:(e,t)=>{$(e).change(t)},encodeUserId:e=>e.replace(/[^a-y0-9]/g,(e=>"."===e?"-":`z${e.charCodeAt(0)}z`)),decodeUserId:e=>e.replace(/[a-y0-9]+|-|z.+?z/g,(e=>"-"===e?".":"z"===e.charAt(0)?String.fromCharCode(Number(e.slice(1,-1))):e))};let a=null;i.setupGlobalExceptionHandler=()=>{null==a&&(F(),a=e=>{let t,r,o,i,a;if(e instanceof ErrorEvent)t="Uncaught exception",r=e.error||{},({message:o,filename:i,lineno:a}=e);else{if(!(e instanceof PromiseRejectionEvent))throw new Error(`unknown event: ${e.toString()}`);t="Unhandled Promise rejection",r=e.reason||{},({message:o="unknown",fileName:i="unknown",lineNumber:a=-1}=r)}null==r.name||o===r.name||o.startsWith(`${r.name}: `)||(o=`${r.name}: ${o}`);const s=n(20);let l=!1;if($(".gritter-item .error-msg").each((function(){$(this).text()===o&&(l=!0)})),!l){const e=document.createTextNode.bind(document),n=[$("<p>").append($("<b>").text("Please press and hold Ctrl and press F5 to reload this page")),$("<p>").text("If the problem persists, please send this error message to your webmaster:"),$("<div>").css("text-align","left").css("font-size",".8em").css("margin-top","1em").append($("<b>").addClass("error-msg").text(o)).append($("<br>")).append(e(`at ${i} at line ${a}`)).append($("<br>")).append(e(`ErrorId: ${s}`)).append($("<br>")).append(e(t)).append($("<br>")).append(e(`URL: ${window.location.href}`)).append($("<br>")).append(e(`UserAgent: ${navigator.userAgent}`)).append($("<br>"))];$.gritter.add({title:"An error occurred",text:n,class_name:"error",position:"bottom",sticky:!0})}$.post(`${clientVars.staticRootAddress}jserror`,{errorInfo:JSON.stringify({errorId:s,type:t,msg:o,url:window.location.href,source:i,linenumber:a,userAgent:navigator.userAgent,stack:r.stack})})},window.onerror=null,window.addEventListener("error",a),window.addEventListener("unhandledrejection",a))},i.binarySearch=function(){if(Ye)return Qe;Ye=1;const e=(e,t)=>{if(e<1)return 0;if(t(0))return 0;if(!t(e-1))return e;let n=0,r=e-1;for(;r-n>1;){const e=Math.floor((n+r)/2);t(e)?r=e:n=e}return r};return Qe.isNodeText=e=>3===e.nodeType,Qe.getAssoc=(e,t)=>e[`_magicdom_${t}`],Qe.setAssoc=(e,t,n)=>{e[`_magicdom_${t}`]=n},Qe.binarySearch=e,Qe.binarySearchInfinite=(t,n)=>{let r=0;for(;!n(r);)r+=t;return e(r,n)},Qe.noop=()=>{},Qe}().binarySearch;const s=()=>{try{return!window.top.location.hostname}catch(e){return!0}};return"undefined"!=typeof window&&(b.Cookies=t.default.withAttributes({sameSite:s()?"None":"Lax",secure:"https:"===window.location.protocol})),b.randomString=n,b.padutils=i,b}var et=Ze();const tt=(e,t,n,r)=>{e.preventDefault();const o=((e,t)=>{const n=e[0].contentWindow.getSelection().getRangeAt(0),r=document.createElement("div");r.append(n.cloneContents());try{r.querySelectorAll(".link").forEach((e=>{const n=e.getAttribute("class"),o=/(?:^| )(lc-[A-Za-z0-9]*)/.exec(n)[1];let i;t[o]?(i=document.createElement("a"),i.innerHTML=e.innerHTML,i.setAttribute("href",t[o].data.hyperlink)):(i=document.createElement("span"),i.innerHTML=e.innerHTML),r.querySelector(`.${o}`).replaceWith(i)}))}catch(e){console.error("[ep_full_hyperlinks]: copy data has an error",e)}return r})(t,r);e.originalEvent.clipboardData.setData("text/html",o.outerHTML),n&&t.contents()[0].execCommand("delete")},nt=(e,t)=>{((e,t)=>{const n=e.originalEvent.clipboardData.getData("text/html");if(!t.contents()[0].getSelection().getRangeAt(0))return!1;e.preventDefault();const r=document.createElement("div");r.innerHTML=n;const o=r.getElementsByTagName("a"),i={};for(const e of o){const t=e.href,n=e.innerHTML,r=`lc-${et.randomString(16)}`;e.className=r,e.id=r,i[r]={data:{author:"empty",linkId:r,timestamp:(new Date).getTime(),text:n,originalLinkId:r,hyperlink:t,headerId:null,date:new Date,formattedDate:new Date}}}pad.plugins.ep_full_hyperlinks.saveLinkWithoutSelection(clientVars.padId,i),t.contents()[0].execCommand("insertHTML",!1,$("<div>").append($(r).clone()).html())})(e,t)},rt=["ep_full_hyperlinks/static/css/link.css"];function ot(e){this.container=null,this.padOuter=null,this.padInner=null,this.ace=e.ace;const t=document.location,n=""===t.port?"https:"===t.protocol?443:80:t.port,r=`${t.protocol}//${t.hostname}:${n}/link`;this.padId=clientVars.padId,this.socket=io.connect(r,{query:`padId=${this.padId}`}),this.padId=clientVars.padId,this.links=[],this.mapFakeLinks=[],this.mapOriginalLinksId=[],this.init(),this.preLinkMarker=(e=>new g(e))(this.ace)}ot.prototype.init=async function(){const e=this;this.findContainers(),this.insertContainers();const t=await this.getLinks();$.isEmptyObject(t)||this.setLinks(t),this.linkListen(),this.pushLink("add",((e,t)=>{this.setLink(e,t)})),$(".addLink").on("click touchstart",(e=>{e.preventDefault(),this.displayNewLinkForm()}));this.container.parent().on("submit","form.link-edit-form",(async function(t){t.preventDefault(),t.stopPropagation();const n=$(this).closest(".link-container"),r=$(this).closest(".link-edit-form"),o=n.data("linkid"),i=r.find("#hyperlink-text").val();let a=r.find("#hyperlink-url").val();const s=r.find("#hyperlink-text-hidden").val();r.find(".link-text-text-old").val(i);const c=$('iframe[name="ace_outer"]').contents().find('iframe[name="ace_inner"]'),u=`.${o}`,d=e.ace;d.callWithAce((e=>{const t=e.ace_getRepFromSelector(u,c);s!==i&&(e.ace_replaceRange(t[0][0],t[0][1],i),s.length>i.length?t[0][1][1]-=s.length-i.length:s.length<i.length&&(t[0][1][1]+=i.length-s.length)),d.callWithAce((e=>{e.ace_performSelectionChange(t[0][0],t[0][1],!0),e.ace_setAttributeOnSelection("link",o)}))}),"editLinkedSelection",!0),/^http:\/\//.test(a)||/^https:\/\//.test(a)||(a=`http://${a}`);const p={};p.linkId=o,p.padId=clientVars.padId,p.linkText=i,p.oldLinkText=s,p.hyperlink=a;try{await e._send("updateLinkText",p)}catch(e){if("unauth"!==e.message)throw e;return}n.removeClass("editing"),e.updateLinkBoxText(o,i,a),l(o),e.padOuter.find(`#show-form-${o}`).show(),e.padOuter.find(`#edit-form-${o}`).hide(),n.attr({"data-loaded":!1}),e.setLinkNewText(o,i,a)})),this.container.on("click","#link-cancel-btn",(function(){const t=$(this).closest(".link-container")[0].id;e.padOuter.find(`#show-form-${t}`).show(),e.padOuter.find(`#edit-form-${t}`).hide(),l(t)}));let n;this.container.parent().on("click",".ep_hyperlink_docs_bubble_button_edit",(function(t){const n=$(this).closest(".link-container")[0].id;e.padOuter.find(`#show-form-${n}`).hide(),e.padOuter.find(`#edit-form-${n}`).show(),e.padOuter.find(`#edit-form-${n}`).find("#hyperlink-text").focus((function(){this.setSelectionRange(this.value.length,this.value.length)})).select(),clientVars.userAgent.isMobile&&(t=>{const n=$('iframe[name="ace_outer"]').contents().find("#outerdocbody").parent(),r=$("#mainHeader").innerHeight(),o=e.padOuter.find(`#edit-form-${t}`).closest(".link-container").offset().top-r-25;n.animate({scrollTop:o})})(n)})),this.container.parent().on("click",".ep_hyperlink_docs_bubble_button_copy",(function(e){const t=document.createElement("input");document.body.appendChild(t),t.value=this.getAttribute("data-hyperlink"),t.select(),document.execCommand("copy"),document.body.removeChild(t),$.gritter.add({text:"Link copied to clipboard"});const n=$(this).closest(".link-container")[0].id;l(n)})),this.container.parent().on("click",".ep_hyperlink_docs_bubble_button_delete",(async function(){const t=$(this).closest(".link-container")[0].id;e.deleteLink(t);const n=$('iframe[name="ace_outer"]').contents().find('iframe[name="ace_inner"]'),r=`.${t}`,o=e.ace;o.callWithAce((e=>{const t=e.ace_getRepFromSelector(r,n);$.each(t,((e,t)=>{o.callWithAce((e=>{e.ace_performSelectionChange(t[0],t[1],!0),e.ace_setAttributeOnSelection("link","link-deleted")}))}))}),"deleteLinkedSelection",!0);try{await e._send("deleteLink",{padId:e.padId,linkId:t,authorId:clientVars.userId})}catch(e){if("unauth"!==e.message)throw e;return}})),this.container.on("mouseover",".sidebar-link",(e=>{clearTimeout(n)})).on("mouseout",".sidebar-link",(e=>{n=setTimeout((()=>{const t=e.currentTarget.id;l(t)}),3e3)})),this.padInner.contents().on("click",".link",(t=>{t.preventDefault(),clearTimeout(n);const o=e.linkIdOf(t);fetch(`/pluginfw/hyperlink/${clientVars.padId}/links/${o}`).then((e=>e.json())).then((n=>{const i={...n.link,linkId:o};((e,t,n)=>{const o=$('iframe[name="ace_outer"]').contents(),i=a().find('iframe[name="ace_inner"]'),d=t.linkId,p=0!==s().find(`#${d}`).length;if(c(),!t.hyperlink)return console.error("[hyperlink]: link does not exist",t),!1;let f=s().find(`#${d}`);p||(f=$("#linkBoxTemplate").tmpl({...t}));const h=f.attr("data-loaded");p?(f.show(),t.hyperlink!==f.find("a.ep_hyperlink_title").attr("href")&&f.attr("data-loaded","false"),f.attr("data-hyperlink",t.hyperlink),f.find("input#hyperlink-url").val(t.hyperlink),f.find("a.ep_hyperlink_title").attr({title:t.hyperlink,href:t.hyperlink})):o.find("#linkBoxWrapper").append(f);const m=i.contents().find(`.${d}`).text();if(f.find("input#hyperlink-text-hidden").val(m),f.find("input#hyperlink-text").val(m),"true"!==h){let e,o=t.hyperlink||f.attr("data-hyperlink");try{e=new URL(o)}catch(e){return console.error(`[hyperlink]: ${e}`),void l(d)}const i=f.find("#ep_hyperlink_img"),a=f.find("a.ep_hyperlink_title"),s=f.find("#card_loading_hyperlink"),c=f.find("#ep_hyperlink_description");c.text(""),a.text(o),i.hide(),a.show(),s.show(),/^http:\/\//.test(o)||/^https:\/\//.test(o)||(o=`https://${o}`);const u=(e,t,n)=>{i.attr("src",n),i.on("load",(()=>{s.fadeOut(500,(()=>{i.fadeIn(),a.text(t.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"")),c.text(e.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"")),f.attr({"data-loaded":!0})}))}))};if(!r(o))return u(o,o,"../static/plugins/ep_full_hyperlinks/static/dist/img/nometa.png"),!1;const p=t=>{if(t.metadata.image&&t.metadata.title)u(o,t.metadata.title,t.metadata.image);else{const r=`https://${e.hostname}`;!0!==t.last?n.emit("metaResolver",{padId:clientVars.padId,editedHyperlink:r,last:!0},p):u(o,t.metadata.title||o,"../static/plugins/ep_full_hyperlinks/static/dist/img/nometa.png")}};e.hostname.indexOf("twitter.com")>=0?u(o,"Twitter","../static/plugins/ep_full_hyperlinks/static/dist/img/twitter.png"):e.protocol.indexOf("mailto")>=0?u(o,"Send email","../static/plugins/ep_full_hyperlinks/static/dist/img/envelope.svg"):e.protocol.indexOf("skype")>=0?u(o,"Open Skype","../static/plugins/ep_full_hyperlinks/static/dist/img/skype.svg"):n.emit("metaResolver",{padId:clientVars.padId,hyperlink:o,last:!1},p)}u(e,f,i),f.addClass("hyperlink-display")})(t,i,e.socket)}))})),this.container.parent().on("click","a.ep_hyperlink_title",d),this.addListenersToCloseOpenedLink(),$("#options-links").trigger("change"),e.padInner.contents().on("copy",(t=>{tt(t,e.padInner,!1,e.links)})),e.padInner.contents().on("cut",(t=>{tt(t,e.padInner,!0,e.links)})),e.padInner.contents().on("paste",(t=>{nt(t,e.padInner)}))},ot.prototype.linkListen=function(){this.socket.on("pushAddLinkInBulk",(async()=>{const e=await this.getLinks();if(!$.isEmptyObject(e)){const t={};for(const n in e)Object.hasOwn(e,n)||(t[n]={},t[n].data=e[n]);this.Links=t}}))},ot.prototype.findContainers=function(){const e=$('iframe[name="ace_outer"]').contents();this.padOuter=e,this.padInner=e.find('iframe[name="ace_inner"]'),this.outerBody=e.find("#outerdocbody")},ot.prototype.setLinkNewText=function(e,t,n){this.links[e]?(this.links[e].data.text=t,this.links[e].data.hyperlink=n):this.linkReplies[e]&&(this.linkReplies[e].text=t,this.linkReplies[e].hyperlink=n)},ot.prototype.addListenersToCloseOpenedLink=function(){const e=this;$(document).on("touchstart click",(t=>{e.closeOpenedLinkIfNotOnSelectedElements(t)})),this.padOuter.find("html").on("touchstart click",(t=>{e.closeOpenedLinkIfNotOnSelectedElements(t)})),this.padInner.contents().find("html").on("touchstart click",(t=>{e.closeOpenedLinkIfNotOnSelectedElements(t)}))},ot.prototype.closeOpenedLink=function(e){c()},ot.prototype.closeOpenedLinkIfNotOnSelectedElements=function(e){(e=>!!($(e.target).closest(".link").length||$(e.target).closest(".link-modal").length||$(e.target).closest(".ep_hyperlink_docs_bubble_button_edit").length||$(e.target).closest(".ep_hyperlink_docs_bubble_button_delete").length||$(e.target).closest(".ep_hyperlink_docs_bubble_button_copy").length||$(e.target).closest(".full-display-link").length||$(e.target).closest(".link-title-wrapper").length||$(e.target).closest(".link-edit-form").length||$(e.target).closest(".link-text-text").length||$(e.target).closest(".link-text-hyperlink").length))(e)||this.closeOpenedLink(e)},ot.prototype.linkIdOf=function(e){const t=e.currentTarget.classList,n=/(?:^| )(lc-[A-Za-z0-9]*)/.exec(t);return n?n[1]:null},ot.prototype.insertContainers=function(){const e=$('iframe[name="ace_outer"]').contents().find("#outerdocbody").prepend('<div id="linkBoxWrapper"></div>');this.container=e},ot.prototype.setLinks=function(e){for(const t in e)this.setLink(t,e[t])},ot.prototype.setLink=function(e,t){const n=this.links;t.formattedDate=new Date(t.timestamp).toISOString(),null==n[e]&&(n[e]={}),n[e].data=t},ot.prototype.setLinkNewText=function(e,t,n){this.links[e]&&(this.links[e].data.text=t,this.links[e].data.hyperlink=n)},ot.prototype.getLinks=async function(){return(await this._send("getLinks",{padId:this.padId})).links},ot.prototype.getLinkData=function(){const e={};return e.padId=this.padId,e.link={},e.link.author=clientVars.userId,e.link.name=pad.myUserInfo.name,e.link.timestamp=(new Date).getTime(),void 0===e.link.name&&(e.link.name=clientVars.userAgent),e},ot.prototype.deleteLink=function(e){$('iframe[name="ace_outer"]').contents().find(`#${e}`).remove()},ot.prototype.displayNewLinkForm=function(){const e=this,t={};this.ace.callWithAce((e=>{const n=e.ace_getRep();t.lines=n.lines,t.selStart=n.selStart,t.selEnd=n.selEnd}),"saveLinkedSelection",!0);const n=e.getSelectedText(t);if(0===n.length)return void $.gritter.add({text:"Please first select the text to link"});e.createNewLinkFormIfDontExist(t),$("body").hasClass("mobileView")||$("#newLink").css("left",$(".toolbar .addLink").offset().left),$("#newLink").find("textarea").val(""),$("#newLink").find(".link-content, .to-value").removeClass("error"),$("#newLink").addClass("popup-show"),pad.plugins.ep_full_hyperlinks.preLinkMarker.markSelectedText(),setTimeout((()=>$("#newLink #hyperlink-url").focus().select()),500);const r=e.getFirstElementSelected();e.isElementInViewport(r)||e.scrollViewportIfSelectedTextIsNotVisible(r),$("#newLink").find("#hyperlink-text").val(n),$("#newLink").find("#hyperlink-text-hidden").val(n)},ot.prototype.scrollViewportIfSelectedTextIsNotVisible=function(e){const t=e.offsetTop,n=$('iframe[name="ace_outer"]').contents();n.find("#outerdocbody").scrollTop(t),n.find("#outerdocbody").parent().scrollTop(t)},ot.prototype.isElementInViewport=function(e){const t=e.getBoundingClientRect(),n=$('iframe[name="ace_outer"]').contents().find("#outerdocbody").parent().scrollTop(),r=$('iframe[name="ace_outer"]').contents().find("#outerdocbody").scrollTop()||n,o=t.top-r,i=t.bottom-r,a=$('iframe[name="ace_outer"]'),s=a.height(),l=this.getIntValueOfCSSProperty(a,"padding-top");return!(o<0||i>s-l)},ot.prototype.getIntValueOfCSSProperty=function(e,t){const n=e.css(t);return parseInt(n)||0},ot.prototype.getFirstElementSelected=function(){let e;return this.ace.callWithAce((t=>{const n=t.ace_getRep(),r=`#${n.lines.atIndex(n.selStart[0]).key}`,o=$('iframe[name="ace_outer"]').contents().find('iframe[name="ace_inner"]').contents();e=o.find(r)}),"getFirstElementSelected",!0),e[0]},ot.prototype.checkNoTextSelected=function(e){return e.selStart[0]===e.selEnd[0]&&e.selStart[1]===e.selEnd[1]},ot.prototype.createNewLinkFormIfDontExist=function(e){const t=this.getLinkData(),n=this;f(t,((r,o)=>{t.link.oldText=r.oldText,t.link.text=r.text,t.link.hyperlink=r.hyperlink,n.saveLink(t,e)}))},ot.prototype.getSelectedText=function(e){const t=[],n=this.getLastLine(e.selStart[0],e);for(let r=e.selStart[0];r<=n;++r){const n=e.lines.atIndex(r);if(e.selStart[0]>r||e.selStart[0]===r&&e.selStart[1]>=n.text.length)continue;if(e.selEnd[0]<r||e.selEnd[0]===r&&e.selEnd[1]<=0)continue;const o=e.selStart[0]<r||e.selStart[1]<0?0:e.selStart[1],i=e.selEnd[0]>r||e.selEnd[1]>n.text.length?n.text.length:e.selEnd[1];t.push(n.text.substring(0===o&&this.lineHasMarker(n)?1:o,i))}return t.join("\n")},ot.prototype.getLastLine=function(e,t){let n=t.selEnd[0];return n>e&&this.lastLineSelectedIsEmpty(t,n)&&n--,n},ot.prototype.lastLineSelectedIsEmpty=function(e,t){const n=e.lines.atIndex(t),r=this.lineHasMarker(n)?1:0;return e.selEnd[1]===r},ot.prototype.lineHasMarker=function(e){return 1===e.lineMarker},ot.prototype.cleanLine=function(e,t){return this.lineHasMarker(e)&&(t=t.substring(1)),t},ot.prototype.saveLink=async function(e,t){const n=await this._send("addLink",e);if(null==n)return;const[r,o]=n;o.linkId=r,this.ace.callWithAce((e=>{t=e.ace_getRep(),e.ace_performSelectionChange(t.selStart,t.selEnd,!0),e.ace_setAttributeOnSelection("link",r)}),"insertLink",!0),this.setLink(r,o)},ot.prototype.saveLinkWithoutSelection=async function(e,t){const n=this.buildLinks(t),r=await this._send("bulkAddLink",e,n);this.setLinks(r)},ot.prototype.buildLinks=function(e){const t=[];for(const n in e)if(!Object.hasOwn(e,n)){const r=this.buildLink(n,e[n].data);t.push(r)}return t},ot.prototype.buildLink=function(e,t){const n={};return n.padId=this.padId,n.linkId=e,n.text=t.text,n.hyperlink=t.hyperlink,n.changeTo=t.changeTo,n.changeFrom=t.changeFrom,n.name=t.name,n.timestamp=parseInt(t.timestamp),n},ot.prototype._send=async function(e,...t){return await new Promise(((n,r)=>{this.socket.emit(e,...t,((e,t)=>{if(null!=e)return r(Object.assign(new Error(e.message),{name:e.name}));n(t)}))}))},ot.prototype.getMapfakeLinks=function(){return this.mapFakeLinks},ot.prototype.findLinkText=function(e){return e.find(".compact-display-content .link-text-text, .full-display-link .link-title-wrapper .link-text-text")},ot.prototype.findHyperLinkText=function(e){return e.find(".compact-display-content .link-text-hyperlink, .full-display-link .link-title-wrapper .link-text-hyperlink")},ot.prototype.updateLinkBoxText=function(e,t,n){const r=this.container.parent().find(`[data-linkid='${e}']`);r.attr("data-hyperlink",n);this.findLinkText(r).val(t);this.findHyperLinkText(r).val(n)},ot.prototype.showChangeAsAccepted=function(e){const t=this,n=this.container.parent().find(`[data-linkid='${e}']`);n.closest(".sidebar-link").find(".link-container.change-accepted").addBack(".change-accepted").each((function(){$(this).removeClass("change-accepted");const e={linkId:$(this).attr("data-linkid"),padId:t.padId};t._send("revertChange",e)})),n.addClass("change-accepted")},ot.prototype.showChangeAsReverted=function(e){this.container.parent().find(`[data-linkid='${e}']`).removeClass("change-accepted")},ot.prototype.pushLink=function(e,t){const n=this.socket,r=this;n.on("textLinkUpdated",((e,t,n)=>{r.updateLinkBoxText(e,t,n)})),n.on("linkDeleted",(e=>{r.deleteLink(e)})),n.on("changeAccepted",(e=>{r.showChangeAsAccepted(e)})),n.on("changeReverted",(e=>{r.showChangeAsReverted(e)})),"add"===e&&n.on("pushAddLink",((e,n)=>{t(e,n)}))};function it(e,t){const n=this.documentAttributeManager,r=[],o=t.contents().find(e);return $.each(o,((e,t)=>{const o=[[],[]],i=$(t).closest("div"),a=$(i).prevAll("div").length;o[0][0]=a,o[1][0]=a;let s=0,l=!1;const c=n.getAttributesOnLine(a);$.each(c,((e,t)=>{"lmkr"===t[0]&&(l=!0)})),l&&s++,$(t).prevAll("span").each((function(){const e=$(this).text().length;s+=e})),o[0][1]=s,o[1][1]=o[0][1]+$(t).text().length,r.push(o)})),r}const at=(e,t,n)=>rt,st=(e,t)=>{pad.plugins||(pad.plugins={});const n=new ot(t);return pad.plugins.ep_full_hyperlinks=n,$("#editorcontainerbox").hasClass("flex-layout")||$.gritter.add({title:"Error",text:"ep_full_hyperlinks: Please upgrade to etherpad 1.8.3 for this plugin to work correctly",sticky:!0,class_name:"error"}),[]},lt=(e,t,n)=>"link"===t.key&&"link-deleted"!==t.value?["link",t.value]:t.key===m&&t.value===clientVars.userId?[m,t.value]:[],ct=(e,t)=>{pad.plugins||(pad.plugins={});const n=t.callstack.editEvent.eventType;if("setup"!==n&&"setBaseText"!==n&&"importText"!==n)return"unmarkPreSelectedTextToLink"===n?pad.plugins.ep_full_hyperlinks.preLinkMarker.handleUnmarkText(t):"markPreSelectedTextToLink"===n&&pad.plugins.ep_full_hyperlinks.preLinkMarker.handleMarkText(t),[]},ut=(e,t)=>{const n=/(?:^| )(lc-[A-Za-z0-9]*)/.exec(t.cls),r=/(?:^| )(fakelink-[A-Za-z0-9]*)/.exec(t.cls);if(n&&n[1]&&t.cc.doAttrib(t.state,`link::${n[1]}`),r){const e=pad.plugins.ep_full_hyperlinks.getMapfakeLinks()[r[1]];t.cc.doAttrib(t.state,`link::${e}`)}return[]};exports.aceAttribsToClasses=lt,exports.aceEditEvent=ct,exports.aceEditorCSS=at,exports.aceInitialized=(e,t)=>{t.editorInfo.ace_getRepFromSelector=it.bind(t)},exports.acePostWriteDomLineHTML=(e,t)=>{const n=$(t.node).find("a");n.length>0&&n.each((function(){$(this).on("click",d)}))},exports.collectContentPre=ut,exports.postAceInit=st;//# sourceMappingURL=bundle.js.map
